<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Baxter-King Band-Pass Filter ([6, 32], K=12)</title>
<style>* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #fff;
    color: #333;
    padding: 20px;
}
.figure-title {
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 16px;
    color: #222;
}
.figure-source {
    font-size: 11px;
    color: #888;
    text-align: center;
    margin-top: 8px;
}
.panel-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
}
.panel {
    width: calc(100% - 16px);
    min-width: 300px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 12px;
}
.panel-title {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 8px;
    color: #444;
}
.axis text { font-size: 11px; fill: #666; }
.axis line, .axis path { stroke: #ccc; }
.grid line { stroke: #f0f0f0; stroke-dasharray: 2,2; }
.grid .domain { stroke: none; }
.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    z-index: 1000;
}
.legend { font-size: 11px; }
.legend rect { rx: 2; }
svg { overflow: visible; }
</style>
</head>
<body>
<div class="figure-title">Baxter-King Band-Pass Filter ([6, 32], K=12)</div>
<div class="panel-grid">
<div class="panel">
<div class="panel-title">Trend-Cycle Decomposition</div>
<div id="filt_tc_67"></div>
</div>
<div class="panel">
<div class="panel-title">Cyclical Component</div>
<div id="filt_cy_68"></div>
</div>
</div>

<div class="tooltip" id="tooltip"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script>
// Shared utilities
const tooltip = d3.select('#tooltip');
function fmt(v) {
    if (v === null || v === undefined) return '';
    return Math.abs(v) >= 1000 ? v.toFixed(1) : (Math.abs(v) >= 1 ? v.toFixed(3) : v.toFixed(4));
}
function showTip(evt, html) {
    tooltip.html(html).style('opacity',1)
        .style('left',(evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px');
}
function hideTip() { tooltip.style('opacity',0); }

(function() {
    const data = [{"x":13,"trend":4.091513168296541,"cycle":0.009436200755429974,"orig":4.100949369051971,"zero":0},
{"x":14,"trend":4.097723272025459,"cycle":0.008225368367154123,"orig":4.105948640392613,"zero":0},
{"x":15,"trend":4.101055243524569,"cycle":0.0073582192929909085,"orig":4.10841346281756,"zero":0},
{"x":16,"trend":4.107365853606816,"cycle":0.00683198822338589,"orig":4.114197841830202,"zero":0},
{"x":17,"trend":4.1059433510879835,"cycle":0.0062362176590303325,"orig":4.112179568747014,"zero":0},
{"x":18,"trend":4.109890023810428,"cycle":0.005186472330753464,"orig":4.115076496141182,"zero":0},
{"x":19,"trend":4.111410612453163,"cycle":0.003812795120277393,"orig":4.11522340757344,"zero":0},
{"x":20,"trend":4.117476031046486,"cycle":0.0027490558051913305,"orig":4.120225086851677,"zero":0},
{"x":21,"trend":4.114686549966168,"cycle":0.0024089035266369047,"orig":4.117095453492804,"zero":0},
{"x":22,"trend":4.118125320246905,"cycle":0.0032716696365119174,"orig":4.121396989883417,"zero":0},
{"x":23,"trend":4.118759639391768,"cycle":0.005053106079369166,"orig":4.123812745471137,"zero":0},
{"x":24,"trend":4.121377796419054,"cycle":0.006954258230160368,"orig":4.128332054649214,"zero":0},
{"x":25,"trend":4.123125871639043,"cycle":0.00815153214264959,"orig":4.131277403781692,"zero":0},
{"x":26,"trend":4.118671446023242,"cycle":0.008170960916519615,"orig":4.126842406939762,"zero":0},
{"x":27,"trend":4.122827144717117,"cycle":0.006512870652226152,"orig":4.129340015369343,"zero":0},
{"x":28,"trend":4.125799288642012,"cycle":0.003391046005686807,"orig":4.129190334647699,"zero":0},
{"x":29,"trend":4.123820806801965,"cycle":-0.00033176764139543347,"orig":4.123489039160569,"zero":0},
{"x":30,"trend":4.127062132582283,"cycle":-0.0036491796128356874,"orig":4.123412952969447,"zero":0},
{"x":31,"trend":4.119644605530729,"cycle":-0.005925612250537296,"orig":4.113718993280192,"zero":0},
{"x":32,"trend":4.130494226727808,"cycle":-0.007024613278463446,"orig":4.123469613449345,"zero":0},
{"x":33,"trend":4.127674704983327,"cycle":-0.007344058123528965,"orig":4.120330646859798,"zero":0},
{"x":34,"trend":4.1259886776864105,"cycle":-0.007006788955030638,"orig":4.11898188873138,"zero":0},
{"x":35,"trend":4.128177601338139,"cycle":-0.005822360165544563,"orig":4.1223552411725946,"zero":0},
{"x":36,"trend":4.131374590482832,"cycle":-0.003550121020128,"orig":4.127824469462704,"zero":0},
{"x":37,"trend":4.123259550728667,"cycle":-0.0005057140328879745,"orig":4.122753836695779,"zero":0},
{"x":38,"trend":4.129171255068754,"cycle":0.0026232226001842857,"orig":4.131794477668938,"zero":0},
{"x":39,"trend":4.131269422873488,"cycle":0.0054942577871994885,"orig":4.136763680660687,"zero":0},
{"x":40,"trend":4.126148999501055,"cycle":0.0079914309537501,"orig":4.134140430454805,"zero":0},
{"x":41,"trend":4.126994812535751,"cycle":0.010182521238781855,"orig":4.137177333774534,"zero":0},
{"x":42,"trend":4.1283023524427325,"cycle":0.012260816358751717,"orig":4.140563168801484,"zero":0},
{"x":43,"trend":4.1247394963436985,"cycle":0.014074799302252194,"orig":4.13881429564595,"zero":0},
{"x":44,"trend":4.127183400196239,"cycle":0.015117645446716108,"orig":4.142301045642955,"zero":0},
{"x":45,"trend":4.128356204263875,"cycle":0.01402109249309845,"orig":4.142377296756973,"zero":0},
{"x":46,"trend":4.126853538523167,"cycle":0.009664105090129119,"orig":4.136517643613296,"zero":0},
{"x":47,"trend":4.121432148702925,"cycle":0.002288351145565054,"orig":4.12372049984849,"zero":0},
{"x":48,"trend":4.122949367585476,"cycle":-0.00659546432511951,"orig":4.116353903260356,"zero":0},
{"x":49,"trend":4.127683801866384,"cycle":-0.01459108968259179,"orig":4.113092712183793,"zero":0},
{"x":50,"trend":4.125064589744508,"cycle":-0.019387813625743405,"orig":4.105676776118765,"zero":0},
{"x":51,"trend":4.120228043233881,"cycle":-0.020322306381408695,"orig":4.099905736852473,"zero":0},
{"x":52,"trend":4.120498584971184,"cycle":-0.017957704524597343,"orig":4.102540880446586,"zero":0},
{"x":53,"trend":4.1251055984506015,"cycle":-0.013194567402817325,"orig":4.111911031047784,"zero":0},
{"x":54,"trend":4.127127098619217,"cycle":-0.007145654322377792,"orig":4.1199814442968385,"zero":0},
{"x":55,"trend":4.124040037494327,"cycle":-0.0012619013319199873,"orig":4.122778136162407,"zero":0},
{"x":56,"trend":4.119876327706906,"cycle":0.0028904687778886495,"orig":4.122766796484794,"zero":0},
{"x":57,"trend":4.126534885786354,"cycle":0.004133569649562505,"orig":4.1306684554359165,"zero":0},
{"x":58,"trend":4.128191491107576,"cycle":0.001930362490045856,"orig":4.130121853597622,"zero":0},
{"x":59,"trend":4.1313327125736325,"cycle":-0.0027944746815536242,"orig":4.128538237892079,"zero":0},
{"x":60,"trend":4.131325824652691,"cycle":-0.007661971070134874,"orig":4.123663853582556,"zero":0},
{"x":61,"trend":4.12862579056908,"cycle":-0.010213201013279355,"orig":4.118412589555801,"zero":0},
{"x":62,"trend":4.134781916375916,"cycle":-0.009334437227824136,"orig":4.125447479148091,"zero":0},
{"x":63,"trend":4.139529461237078,"cycle":-0.005592460088488113,"orig":4.13393700114859,"zero":0},
{"x":64,"trend":4.14239356521967,"cycle":-0.000895097404283618,"orig":4.141498467815387,"zero":0},
{"x":65,"trend":4.142366309945136,"cycle":0.002417849035033476,"orig":4.14478415898017,"zero":0},
{"x":66,"trend":4.142191996657281,"cycle":0.0031038848188722767,"orig":4.145295881476153,"zero":0},
{"x":67,"trend":4.152836129375985,"cycle":0.0016246901730992275,"orig":4.154460819549085,"zero":0},
{"x":68,"trend":4.149025817071932,"cycle":-0.00017255209947800165,"orig":4.148853264972454,"zero":0},
{"x":69,"trend":4.152666527928175,"cycle":-0.0005201477838200907,"orig":4.152146380144355,"zero":0},
{"x":70,"trend":4.1581202959874695,"cycle":0.0007549748416844637,"orig":4.158875270829154,"zero":0},
{"x":71,"trend":4.159919777868946,"cycle":0.002740537758502651,"orig":4.162660315627448,"zero":0},
{"x":72,"trend":4.1600077240075795,"cycle":0.004340087986269378,"orig":4.164347811993848,"zero":0},
{"x":73,"trend":4.163272011848976,"cycle":0.004908342632117257,"orig":4.168180354481093,"zero":0},
{"x":74,"trend":4.168530906037793,"cycle":0.004453842322624718,"orig":4.172984748360418,"zero":0},
{"x":75,"trend":4.1691577858975215,"cycle":0.002953048730527874,"orig":4.172110834628049,"zero":0},
{"x":76,"trend":4.174587319596423,"cycle":0.00026292003526220964,"orig":4.174850239631685,"zero":0},
{"x":77,"trend":4.174289283759526,"cycle":-0.0032306244697204722,"orig":4.171058659289805,"zero":0},
{"x":78,"trend":4.179898491486862,"cycle":-0.006587184847523714,"orig":4.173311306639339,"zero":0},
{"x":79,"trend":4.184709212877435,"cycle":-0.008704789740782426,"orig":4.176004423136652,"zero":0},
{"x":80,"trend":4.183852824543465,"cycle":-0.009054869759643758,"orig":4.174797954783822,"zero":0},
{"x":81,"trend":4.1878727964241005,"cycle":-0.007783353324543718,"orig":4.180089443099557,"zero":0},
{"x":82,"trend":4.193226379234644,"cycle":-0.00583328371278416,"orig":4.18739309552186,"zero":0},
{"x":83,"trend":4.196460831288147,"cycle":-0.004508730213038131,"orig":4.191952101075109,"zero":0},
{"x":84,"trend":4.202190918447826,"cycle":-0.004333546525687418,"orig":4.197857371922138,"zero":0},
{"x":85,"trend":4.205473917233954,"cycle":-0.004742865844887173,"orig":4.2007310513890666,"zero":0},
{"x":86,"trend":4.205860130763522,"cycle":-0.0045463475441785695,"orig":4.2013137832193435,"zero":0},
{"x":87,"trend":4.214558846718182,"cycle":-0.003095172892206996,"orig":4.211463673825975,"zero":0},
{"x":88,"trend":4.218158782434155,"cycle":-0.0007989705655268298,"orig":4.2173598118686275,"zero":0},
{"x":89,"trend":4.220859814852641,"cycle":0.0010904929745338965,"orig":4.221950307827175,"zero":0},
{"x":90,"trend":4.227144802348415,"cycle":0.0015339551658955092,"orig":4.228678757514311,"zero":0},
{"x":91,"trend":4.229235960375582,"cycle":0.0007723028182276409,"orig":4.23000826319381,"zero":0},
{"x":92,"trend":4.236485882357404,"cycle":0.00020423834933200324,"orig":4.2366901207067365,"zero":0},
{"x":93,"trend":4.238681890986297,"cycle":0.0011487789819918104,"orig":4.239830669968288,"zero":0},
{"x":94,"trend":4.243813202546692,"cycle":0.004030398659454551,"orig":4.247843601206147,"zero":0},
{"x":95,"trend":4.24683815594504,"cycle":0.007818068217791296,"orig":4.254656224162832,"zero":0},
{"x":96,"trend":4.254270501424482,"cycle":0.0105521486605826,"orig":4.264822650085065,"zero":0},
{"x":97,"trend":4.255815235082321,"cycle":0.010707951200681659,"orig":4.266523186283003,"zero":0},
{"x":98,"trend":4.257255077240681,"cycle":0.008139421737309527,"orig":4.265394498977991,"zero":0},
{"x":99,"trend":4.263173112458768,"cycle":0.0038816876775104314,"orig":4.267054800136278,"zero":0},
{"x":100,"trend":4.265539210808603,"cycle":-0.000212136462541479,"orig":4.265327074346062,"zero":0},
{"x":101,"trend":4.27292422174121,"cycle":-0.0026982404100288904,"orig":4.270225981331181,"zero":0},
{"x":102,"trend":4.276559053463155,"cycle":-0.0030242206997702914,"orig":4.273534832763384,"zero":0},
{"x":103,"trend":4.271148748078089,"cycle":-0.0018038080548112012,"orig":4.269344940023278,"zero":0},
{"x":104,"trend":4.282746954518758,"cycle":-0.0002326915030286536,"orig":4.282514263015729,"zero":0},
{"x":105,"trend":4.286320742583479,"cycle":0.00021869661972913346,"orig":4.286539439203208,"zero":0},
{"x":106,"trend":4.285944089968203,"cycle":-0.0011637581759006838,"orig":4.2847803317923026,"zero":0},
{"x":107,"trend":4.2914031488561335,"cycle":-0.003990811169198208,"orig":4.287412337686935,"zero":0},
{"x":108,"trend":4.298008362941736,"cycle":-0.0071312008317166165,"orig":4.290877162110019,"zero":0},
{"x":109,"trend":4.294225191358684,"cycle":-0.009088108040032877,"orig":4.285137083318651,"zero":0},
{"x":110,"trend":4.308426681974533,"cycle":-0.008760438729415704,"orig":4.299666243245117,"zero":0},
{"x":111,"trend":4.304782363349425,"cycle":-0.006341162733348768,"orig":4.298441200616076,"zero":0},
{"x":112,"trend":4.311375884196504,"cycle":-0.003033465319906975,"orig":4.308342418876597,"zero":0},
{"x":113,"trend":4.316050418087307,"cycle":-0.00026241558778582197,"orig":4.315788002499521,"zero":0},
{"x":114,"trend":4.3225158537001365,"cycle":0.000865527040568706,"orig":4.323381380740705,"zero":0},
{"x":115,"trend":4.323319400384288,"cycle":0.00021572639212662226,"orig":4.323535126776415,"zero":0},
{"x":116,"trend":4.330046091108341,"cycle":-0.0014057290473505346,"orig":4.32864036206099,"zero":0},
{"x":117,"trend":4.338061210561455,"cycle":-0.003181216382250593,"orig":4.334879994179205,"zero":0},
{"x":118,"trend":4.339472497001939,"cycle":-0.004296408772716351,"orig":4.335176088229223,"zero":0},
{"x":119,"trend":4.348497743244672,"cycle":-0.004176869843380643,"orig":4.3443208734012915,"zero":0},
{"x":120,"trend":4.353730459625956,"cycle":-0.0030229381322076643,"orig":4.350707521493748,"zero":0},
{"x":121,"trend":4.353948945338213,"cycle":-0.001657553470596776,"orig":4.352291391867616,"zero":0},
{"x":122,"trend":4.365036969095797,"cycle":-0.0008777604285849921,"orig":4.364159208667212,"zero":0},
{"x":123,"trend":4.371848523900421,"cycle":-0.001363235073098143,"orig":4.3704852888273225,"zero":0},
{"x":124,"trend":4.374438330846251,"cycle":-0.0027815275035608378,"orig":4.371656803342691,"zero":0},
{"x":125,"trend":4.381400865385656,"cycle":-0.004219701065397333,"orig":4.377181164320258,"zero":0},
{"x":126,"trend":4.386236133014287,"cycle":-0.004469532146265387,"orig":4.381766600868022,"zero":0},
{"x":127,"trend":4.392666570527328,"cycle":-0.0023940269995948033,"orig":4.3902725435277326,"zero":0},
{"x":128,"trend":4.39837932880838,"cycle":0.0018481608129376076,"orig":4.400227489621318,"zero":0},
{"x":129,"trend":4.402838014279449,"cycle":0.006507050798442882,"orig":4.409345065077892,"zero":0},
{"x":130,"trend":4.408184720691815,"cycle":0.009988194368072911,"orig":4.418172915059888,"zero":0},
{"x":131,"trend":4.414427764748463,"cycle":0.011589439206453403,"orig":4.426017203954916,"zero":0},
{"x":132,"trend":4.418700374278339,"cycle":0.011566273259493207,"orig":4.430266647537833,"zero":0},
{"x":133,"trend":4.424187396370624,"cycle":0.010453035443155553,"orig":4.434640431813779,"zero":0},
{"x":134,"trend":4.4276245278855,"cycle":0.008633393546547463,"orig":4.4362579214320474,"zero":0},
{"x":135,"trend":4.430677623913376,"cycle":0.005931888530796514,"orig":4.436609512444173,"zero":0},
{"x":136,"trend":4.437576884351478,"cycle":0.002458011273308497,"orig":4.440034895624787,"zero":0},
{"x":137,"trend":4.4475892143564595,"cycle":-0.0009846061982608512,"orig":4.446604608158198,"zero":0},
{"x":138,"trend":4.443926459054054,"cycle":-0.003338506182000517,"orig":4.440587952872053,"zero":0},
{"x":139,"trend":4.440529781877237,"cycle":-0.003794815698698259,"orig":4.436734966178539,"zero":0},
{"x":140,"trend":4.459843808015461,"cycle":-0.0026169407786437865,"orig":4.457226867236817,"zero":0},
{"x":141,"trend":4.457468501766769,"cycle":-0.0007739624449131649,"orig":4.456694539321856,"zero":0},
{"x":142,"trend":4.462839889621386,"cycle":0.0006676487953216903,"orig":4.4635075384167076,"zero":0},
{"x":143,"trend":4.461844591954789,"cycle":0.0009045192973859278,"orig":4.462749111252175,"zero":0},
{"x":144,"trend":4.467084749601303,"cycle":0.00018451124432289356,"orig":4.467269260845626,"zero":0},
{"x":145,"trend":4.472096259222524,"cycle":-0.0005157532719197583,"orig":4.471580505950604,"zero":0},
{"x":146,"trend":4.477913075819615,"cycle":-0.0002694902186620718,"orig":4.477643585600952,"zero":0},
{"x":147,"trend":4.479085009291054,"cycle":0.0008246289993435324,"orig":4.479909638290398,"zero":0},
{"x":148,"trend":4.480460562197942,"cycle":0.0017450621839614489,"orig":4.482205624381904,"zero":0},
{"x":149,"trend":4.487151903551334,"cycle":0.0013563680889555896,"orig":4.488508271640289,"zero":0},
{"x":150,"trend":4.4881819835934955,"cycle":-0.0004583898652145979,"orig":4.487723593728281,"zero":0},
{"x":151,"trend":4.495820612922076,"cycle":-0.0023275168757838777,"orig":4.493493096046292,"zero":0},
{"x":152,"trend":4.500116832837048,"cycle":-0.002616493627132052,"orig":4.497500339209917,"zero":0},
{"x":153,"trend":4.494675000415242,"cycle":-0.0012199222507777302,"orig":4.493455078164464,"zero":0},
{"x":154,"trend":4.504482639787897,"cycle":0.0011213222753664598,"orig":4.5056039620632635,"zero":0},
{"x":155,"trend":4.506989640750245,"cycle":0.003449997414442879,"orig":4.510439638164688,"zero":0},
{"x":156,"trend":4.512991799573615,"cycle":0.0051313724262198185,"orig":4.518123171999835,"zero":0},
{"x":157,"trend":4.510494948304037,"cycle":0.006259238310484236,"orig":4.516754186614521,"zero":0},
{"x":158,"trend":4.512463494697696,"cycle":0.007409117627815612,"orig":4.5198726123255115,"zero":0},
{"x":159,"trend":4.514437642814199,"cycle":0.008984382040991931,"orig":4.523422024855191,"zero":0},
{"x":160,"trend":4.518599677383795,"cycle":0.01075692888244291,"orig":4.529356606266238,"zero":0},
{"x":161,"trend":4.51997559648055,"cycle":0.012085041839095104,"orig":4.532060638319645,"zero":0},
{"x":162,"trend":4.520043783454913,"cycle":0.012407311591114384,"orig":4.532451095046027,"zero":0},
{"x":163,"trend":4.518548501560839,"cycle":0.01194986103159941,"orig":4.530498362592438,"zero":0},
{"x":164,"trend":4.516427061891311,"cycle":0.01134466730837197,"orig":4.527771729199683,"zero":0},
{"x":165,"trend":4.52131299483935,"cycle":0.01106281738521428,"orig":4.532375812224564,"zero":0},
{"x":166,"trend":4.517231165353134,"cycle":0.011251262153723199,"orig":4.528482427506857,"zero":0},
{"x":167,"trend":4.517585475261877,"cycle":0.01117655671982433,"orig":4.528762031981702,"zero":0},
{"x":168,"trend":4.515330449642606,"cycle":0.010163211618788498,"orig":4.525493661261395,"zero":0},
{"x":169,"trend":4.512759992099583,"cycle":0.007962799810888654,"orig":4.5207227919104715,"zero":0},
{"x":170,"trend":4.509114956429358,"cycle":0.005073070346743189,"orig":4.514188026776101,"zero":0},
{"x":171,"trend":4.509834114167155,"cycle":0.0023015008537035087,"orig":4.512135615020859,"zero":0},
{"x":172,"trend":4.508573589373191,"cycle":-3.43550246713481e-5,"orig":4.50853923434852,"zero":0},
{"x":173,"trend":4.505849773363215,"cycle":-0.0020978838003253425,"orig":4.503751889562889,"zero":0},
{"x":174,"trend":4.502792069358817,"cycle":-0.004334423713265659,"orig":4.498457645645551,"zero":0},
{"x":175,"trend":4.499137852814278,"cycle":-0.007105010440179221,"orig":4.4920328423740985,"zero":0},
{"x":176,"trend":4.5011330555960285,"cycle":-0.010248652787021029,"orig":4.490884402809008,"zero":0},
{"x":177,"trend":4.49914781303183,"cycle":-0.013341286227586,"orig":4.485806526804244,"zero":0},
{"x":178,"trend":4.499059222011194,"cycle":-0.015997914661292204,"orig":4.483061307349902,"zero":0},
{"x":179,"trend":4.494640658254164,"cycle":-0.017644810989579734,"orig":4.476995847264583,"zero":0},
{"x":180,"trend":4.494336144023731,"cycle":-0.01776780656654904,"orig":4.4765683374571825,"zero":0},
{"x":181,"trend":4.499082663321722,"cycle":-0.015881261023368703,"orig":4.483201402298353,"zero":0},
{"x":182,"trend":4.495431155982829,"cycle":-0.012114529001866478,"orig":4.483316626980963,"zero":0},
{"x":183,"trend":4.49746294660478,"cycle":-0.006933986928894603,"orig":4.490528959675886,"zero":0},
{"x":184,"trend":4.496658230111425,"cycle":-0.001258268269860613,"orig":4.4953999618415645,"zero":0},
{"x":185,"trend":4.495670703483332,"cycle":0.0037388868255933544,"orig":4.499409590308925,"zero":0},
{"x":186,"trend":4.500743161984187,"cycle":0.00688144756118611,"orig":4.507624609545373,"zero":0},
{"x":187,"trend":4.4997734226171335,"cycle":0.007529216288739857,"orig":4.507302638905873,"zero":0},
{"x":188,"trend":4.500117206885275,"cycle":0.006074278497034943,"orig":4.50619148538231,"zero":0},
{"x":189,"trend":4.5032005714598204,"cycle":0.0038395626190886323,"orig":4.507040134078909,"zero":0},
{"x":190,"trend":4.502648173327135,"cycle":0.002307124414839809,"orig":4.504955297741974,"zero":0},
{"x":191,"trend":4.50823922387947,"cycle":0.002302649779822155,"orig":4.510541873659292,"zero":0},
{"x":192,"trend":4.501583588500707,"cycle":0.003381657867665838,"orig":4.504965246368373,"zero":0},
{"x":193,"trend":4.509256260615405,"cycle":0.004194391476867079,"orig":4.513450652092272,"zero":0},
{"x":194,"trend":4.511413819056918,"cycle":0.0032242539632807155,"orig":4.514638073020199,"zero":0},
{"x":195,"trend":4.51180149667263,"cycle":0.00020460499994125192,"orig":4.512006101672571,"zero":0},
{"x":196,"trend":4.509728773165233,"cycle":-0.0036973868017480954,"orig":4.506031386363485,"zero":0},
{"x":197,"trend":4.512705420444771,"cycle":-0.006946813512095487,"orig":4.505758606932676,"zero":0},
{"x":198,"trend":4.5153587346709045,"cycle":-0.008323013026677442,"orig":4.507035721644227,"zero":0},
{"x":199,"trend":4.519701974780206,"cycle":-0.007541117585380744,"orig":4.512160857194826,"zero":0},
{"x":200,"trend":4.515421292099,"cycle":-0.00544459272414842,"orig":4.509976699374851,"zero":0},
{"x":201,"trend":4.519452120609235,"cycle":-0.0030486695322446966,"orig":4.51640345107699,"zero":0},
{"x":202,"trend":4.518857131929215,"cycle":-0.0012228240938072232,"orig":4.517634307835408,"zero":0},
{"x":203,"trend":4.524586130550259,"cycle":-0.00026923066565361087,"orig":4.524316899884605,"zero":0},
{"x":204,"trend":4.524598231362941,"cycle":1.4614551073710569e-5,"orig":4.524612845914015,"zero":0},
{"x":205,"trend":4.526055735424375,"cycle":7.773670867412819e-5,"orig":4.526133472133049,"zero":0},
{"x":206,"trend":4.532171310266592,"cycle":-2.3532024382488803e-5,"orig":4.5321477782422095,"zero":0},
{"x":207,"trend":4.528606185514289,"cycle":-0.0004671631208477134,"orig":4.528139022393441,"zero":0},
{"x":208,"trend":4.5330628761661185,"cycle":-0.0012163545968703338,"orig":4.531846521569248,"zero":0},
{"x":209,"trend":4.541291182511591,"cycle":-0.0022469102356059423,"orig":4.539044272275985,"zero":0},
{"x":210,"trend":4.534800302457953,"cycle":-0.0035888689881554275,"orig":4.531211433469797,"zero":0},
{"x":211,"trend":4.5436915199030175,"cycle":-0.005036206749554406,"orig":4.5386553131534635,"zero":0},
{"x":212,"trend":4.545243453793458,"cycle":-0.005917173920626753,"orig":4.5393262798728315,"zero":0},
{"x":213,"trend":4.545798582392232,"cycle":-0.005202118161246133,"orig":4.540596464230986,"zero":0},
{"x":214,"trend":4.551465484046587,"cycle":-0.00237370707836794,"orig":4.549091776968219,"zero":0},
{"x":215,"trend":4.55021445711144,"cycle":0.0013576753077740866,"orig":4.5515721324192135,"zero":0},
{"x":216,"trend":4.555159873790594,"cycle":0.004348499629554747,"orig":4.559508373420149,"zero":0},
{"x":217,"trend":4.557163356673523,"cycle":0.005935095862496326,"orig":4.563098452536019,"zero":0},
{"x":218,"trend":4.563678855812607,"cycle":0.006652442786183585,"orig":4.5703312985987905,"zero":0},
{"x":219,"trend":4.5617119779264845,"cycle":0.007267140892688706,"orig":4.568979118819173,"zero":0},
{"x":220,"trend":4.563198036468019,"cycle":0.007931277794976807,"orig":4.571129314262995,"zero":0},
{"x":221,"trend":4.564396889523159,"cycle":0.007632145266688706,"orig":4.572029034789847,"zero":0},
{"x":222,"trend":4.571461060367829,"cycle":0.005055503579481965,"orig":4.576516563947311,"zero":0},
{"x":223,"trend":4.573024349043299,"cycle":0.0003207486157945916,"orig":4.573345097659094,"zero":0},
{"x":224,"trend":4.581565382976622,"cycle":-0.0049664969709661555,"orig":4.576598886005656,"zero":0},
{"x":225,"trend":4.565406103889379,"cycle":-0.008371046653269293,"orig":4.55703505723611,"zero":0},
{"x":226,"trend":4.577112058238315,"cycle":-0.008012671594994372,"orig":4.5690993866433205,"zero":0},
{"x":227,"trend":4.584516823093874,"cycle":-0.0042399198290584555,"orig":4.580276903264815,"zero":0},
{"x":228,"trend":4.584810713970625,"cycle":0.0006178828584218476,"orig":4.585428596829047,"zero":0},
{"x":229,"trend":4.5832548606467585,"cycle":0.0037503363832042946,"orig":4.587005197029963,"zero":0},
{"x":230,"trend":4.583347458537831,"cycle":0.004079238672469954,"orig":4.587426697210301,"zero":0},
{"x":231,"trend":4.587301803932364,"cycle":0.002377007937682696,"orig":4.589678811870047,"zero":0},
{"x":232,"trend":4.591990143936074,"cycle":0.0007207463772441469,"orig":4.592710890313318,"zero":0},
{"x":233,"trend":4.592538012482346,"cycle":0.0004269923873825715,"orig":4.592965004869729,"zero":0},
{"x":234,"trend":4.594890439887415,"cycle":0.0012359741987392758,"orig":4.596126414086154,"zero":0},
{"x":235,"trend":4.593940724210532,"cycle":0.0016729433700900659,"orig":4.595613667580622,"zero":0},
{"x":236,"trend":4.599395890043972,"cycle":0.0005969164149838141,"orig":4.599992806458956,"zero":0},
{"x":237,"trend":4.60033859657742,"cycle":-0.0020087524754042047,"orig":4.598329844102016,"zero":0},
{"x":238,"trend":4.601685171781082,"cycle":-0.004502803635191871,"orig":4.59718236814589,"zero":0},
{"x":239,"trend":4.602281998948579,"cycle":-0.005520063431025374,"orig":4.596761935517553,"zero":0},
{"x":240,"trend":4.611633241826728,"cycle":-0.004729559212485829,"orig":4.606903682614242,"zero":0}];
    const series = [{"name":"Original","color":"#1f77b4","key":"orig","dash":""},{"name":"Trend","color":"#ff7f0e","key":"trend","dash":"6,3"}];
    const bands = [];
    const refLines = [];

    const container = d3.select('#filt_tc_67');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Value') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Value');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":13,"trend":4.091513168296541,"cycle":0.009436200755429974,"orig":4.100949369051971,"zero":0},
{"x":14,"trend":4.097723272025459,"cycle":0.008225368367154123,"orig":4.105948640392613,"zero":0},
{"x":15,"trend":4.101055243524569,"cycle":0.0073582192929909085,"orig":4.10841346281756,"zero":0},
{"x":16,"trend":4.107365853606816,"cycle":0.00683198822338589,"orig":4.114197841830202,"zero":0},
{"x":17,"trend":4.1059433510879835,"cycle":0.0062362176590303325,"orig":4.112179568747014,"zero":0},
{"x":18,"trend":4.109890023810428,"cycle":0.005186472330753464,"orig":4.115076496141182,"zero":0},
{"x":19,"trend":4.111410612453163,"cycle":0.003812795120277393,"orig":4.11522340757344,"zero":0},
{"x":20,"trend":4.117476031046486,"cycle":0.0027490558051913305,"orig":4.120225086851677,"zero":0},
{"x":21,"trend":4.114686549966168,"cycle":0.0024089035266369047,"orig":4.117095453492804,"zero":0},
{"x":22,"trend":4.118125320246905,"cycle":0.0032716696365119174,"orig":4.121396989883417,"zero":0},
{"x":23,"trend":4.118759639391768,"cycle":0.005053106079369166,"orig":4.123812745471137,"zero":0},
{"x":24,"trend":4.121377796419054,"cycle":0.006954258230160368,"orig":4.128332054649214,"zero":0},
{"x":25,"trend":4.123125871639043,"cycle":0.00815153214264959,"orig":4.131277403781692,"zero":0},
{"x":26,"trend":4.118671446023242,"cycle":0.008170960916519615,"orig":4.126842406939762,"zero":0},
{"x":27,"trend":4.122827144717117,"cycle":0.006512870652226152,"orig":4.129340015369343,"zero":0},
{"x":28,"trend":4.125799288642012,"cycle":0.003391046005686807,"orig":4.129190334647699,"zero":0},
{"x":29,"trend":4.123820806801965,"cycle":-0.00033176764139543347,"orig":4.123489039160569,"zero":0},
{"x":30,"trend":4.127062132582283,"cycle":-0.0036491796128356874,"orig":4.123412952969447,"zero":0},
{"x":31,"trend":4.119644605530729,"cycle":-0.005925612250537296,"orig":4.113718993280192,"zero":0},
{"x":32,"trend":4.130494226727808,"cycle":-0.007024613278463446,"orig":4.123469613449345,"zero":0},
{"x":33,"trend":4.127674704983327,"cycle":-0.007344058123528965,"orig":4.120330646859798,"zero":0},
{"x":34,"trend":4.1259886776864105,"cycle":-0.007006788955030638,"orig":4.11898188873138,"zero":0},
{"x":35,"trend":4.128177601338139,"cycle":-0.005822360165544563,"orig":4.1223552411725946,"zero":0},
{"x":36,"trend":4.131374590482832,"cycle":-0.003550121020128,"orig":4.127824469462704,"zero":0},
{"x":37,"trend":4.123259550728667,"cycle":-0.0005057140328879745,"orig":4.122753836695779,"zero":0},
{"x":38,"trend":4.129171255068754,"cycle":0.0026232226001842857,"orig":4.131794477668938,"zero":0},
{"x":39,"trend":4.131269422873488,"cycle":0.0054942577871994885,"orig":4.136763680660687,"zero":0},
{"x":40,"trend":4.126148999501055,"cycle":0.0079914309537501,"orig":4.134140430454805,"zero":0},
{"x":41,"trend":4.126994812535751,"cycle":0.010182521238781855,"orig":4.137177333774534,"zero":0},
{"x":42,"trend":4.1283023524427325,"cycle":0.012260816358751717,"orig":4.140563168801484,"zero":0},
{"x":43,"trend":4.1247394963436985,"cycle":0.014074799302252194,"orig":4.13881429564595,"zero":0},
{"x":44,"trend":4.127183400196239,"cycle":0.015117645446716108,"orig":4.142301045642955,"zero":0},
{"x":45,"trend":4.128356204263875,"cycle":0.01402109249309845,"orig":4.142377296756973,"zero":0},
{"x":46,"trend":4.126853538523167,"cycle":0.009664105090129119,"orig":4.136517643613296,"zero":0},
{"x":47,"trend":4.121432148702925,"cycle":0.002288351145565054,"orig":4.12372049984849,"zero":0},
{"x":48,"trend":4.122949367585476,"cycle":-0.00659546432511951,"orig":4.116353903260356,"zero":0},
{"x":49,"trend":4.127683801866384,"cycle":-0.01459108968259179,"orig":4.113092712183793,"zero":0},
{"x":50,"trend":4.125064589744508,"cycle":-0.019387813625743405,"orig":4.105676776118765,"zero":0},
{"x":51,"trend":4.120228043233881,"cycle":-0.020322306381408695,"orig":4.099905736852473,"zero":0},
{"x":52,"trend":4.120498584971184,"cycle":-0.017957704524597343,"orig":4.102540880446586,"zero":0},
{"x":53,"trend":4.1251055984506015,"cycle":-0.013194567402817325,"orig":4.111911031047784,"zero":0},
{"x":54,"trend":4.127127098619217,"cycle":-0.007145654322377792,"orig":4.1199814442968385,"zero":0},
{"x":55,"trend":4.124040037494327,"cycle":-0.0012619013319199873,"orig":4.122778136162407,"zero":0},
{"x":56,"trend":4.119876327706906,"cycle":0.0028904687778886495,"orig":4.122766796484794,"zero":0},
{"x":57,"trend":4.126534885786354,"cycle":0.004133569649562505,"orig":4.1306684554359165,"zero":0},
{"x":58,"trend":4.128191491107576,"cycle":0.001930362490045856,"orig":4.130121853597622,"zero":0},
{"x":59,"trend":4.1313327125736325,"cycle":-0.0027944746815536242,"orig":4.128538237892079,"zero":0},
{"x":60,"trend":4.131325824652691,"cycle":-0.007661971070134874,"orig":4.123663853582556,"zero":0},
{"x":61,"trend":4.12862579056908,"cycle":-0.010213201013279355,"orig":4.118412589555801,"zero":0},
{"x":62,"trend":4.134781916375916,"cycle":-0.009334437227824136,"orig":4.125447479148091,"zero":0},
{"x":63,"trend":4.139529461237078,"cycle":-0.005592460088488113,"orig":4.13393700114859,"zero":0},
{"x":64,"trend":4.14239356521967,"cycle":-0.000895097404283618,"orig":4.141498467815387,"zero":0},
{"x":65,"trend":4.142366309945136,"cycle":0.002417849035033476,"orig":4.14478415898017,"zero":0},
{"x":66,"trend":4.142191996657281,"cycle":0.0031038848188722767,"orig":4.145295881476153,"zero":0},
{"x":67,"trend":4.152836129375985,"cycle":0.0016246901730992275,"orig":4.154460819549085,"zero":0},
{"x":68,"trend":4.149025817071932,"cycle":-0.00017255209947800165,"orig":4.148853264972454,"zero":0},
{"x":69,"trend":4.152666527928175,"cycle":-0.0005201477838200907,"orig":4.152146380144355,"zero":0},
{"x":70,"trend":4.1581202959874695,"cycle":0.0007549748416844637,"orig":4.158875270829154,"zero":0},
{"x":71,"trend":4.159919777868946,"cycle":0.002740537758502651,"orig":4.162660315627448,"zero":0},
{"x":72,"trend":4.1600077240075795,"cycle":0.004340087986269378,"orig":4.164347811993848,"zero":0},
{"x":73,"trend":4.163272011848976,"cycle":0.004908342632117257,"orig":4.168180354481093,"zero":0},
{"x":74,"trend":4.168530906037793,"cycle":0.004453842322624718,"orig":4.172984748360418,"zero":0},
{"x":75,"trend":4.1691577858975215,"cycle":0.002953048730527874,"orig":4.172110834628049,"zero":0},
{"x":76,"trend":4.174587319596423,"cycle":0.00026292003526220964,"orig":4.174850239631685,"zero":0},
{"x":77,"trend":4.174289283759526,"cycle":-0.0032306244697204722,"orig":4.171058659289805,"zero":0},
{"x":78,"trend":4.179898491486862,"cycle":-0.006587184847523714,"orig":4.173311306639339,"zero":0},
{"x":79,"trend":4.184709212877435,"cycle":-0.008704789740782426,"orig":4.176004423136652,"zero":0},
{"x":80,"trend":4.183852824543465,"cycle":-0.009054869759643758,"orig":4.174797954783822,"zero":0},
{"x":81,"trend":4.1878727964241005,"cycle":-0.007783353324543718,"orig":4.180089443099557,"zero":0},
{"x":82,"trend":4.193226379234644,"cycle":-0.00583328371278416,"orig":4.18739309552186,"zero":0},
{"x":83,"trend":4.196460831288147,"cycle":-0.004508730213038131,"orig":4.191952101075109,"zero":0},
{"x":84,"trend":4.202190918447826,"cycle":-0.004333546525687418,"orig":4.197857371922138,"zero":0},
{"x":85,"trend":4.205473917233954,"cycle":-0.004742865844887173,"orig":4.2007310513890666,"zero":0},
{"x":86,"trend":4.205860130763522,"cycle":-0.0045463475441785695,"orig":4.2013137832193435,"zero":0},
{"x":87,"trend":4.214558846718182,"cycle":-0.003095172892206996,"orig":4.211463673825975,"zero":0},
{"x":88,"trend":4.218158782434155,"cycle":-0.0007989705655268298,"orig":4.2173598118686275,"zero":0},
{"x":89,"trend":4.220859814852641,"cycle":0.0010904929745338965,"orig":4.221950307827175,"zero":0},
{"x":90,"trend":4.227144802348415,"cycle":0.0015339551658955092,"orig":4.228678757514311,"zero":0},
{"x":91,"trend":4.229235960375582,"cycle":0.0007723028182276409,"orig":4.23000826319381,"zero":0},
{"x":92,"trend":4.236485882357404,"cycle":0.00020423834933200324,"orig":4.2366901207067365,"zero":0},
{"x":93,"trend":4.238681890986297,"cycle":0.0011487789819918104,"orig":4.239830669968288,"zero":0},
{"x":94,"trend":4.243813202546692,"cycle":0.004030398659454551,"orig":4.247843601206147,"zero":0},
{"x":95,"trend":4.24683815594504,"cycle":0.007818068217791296,"orig":4.254656224162832,"zero":0},
{"x":96,"trend":4.254270501424482,"cycle":0.0105521486605826,"orig":4.264822650085065,"zero":0},
{"x":97,"trend":4.255815235082321,"cycle":0.010707951200681659,"orig":4.266523186283003,"zero":0},
{"x":98,"trend":4.257255077240681,"cycle":0.008139421737309527,"orig":4.265394498977991,"zero":0},
{"x":99,"trend":4.263173112458768,"cycle":0.0038816876775104314,"orig":4.267054800136278,"zero":0},
{"x":100,"trend":4.265539210808603,"cycle":-0.000212136462541479,"orig":4.265327074346062,"zero":0},
{"x":101,"trend":4.27292422174121,"cycle":-0.0026982404100288904,"orig":4.270225981331181,"zero":0},
{"x":102,"trend":4.276559053463155,"cycle":-0.0030242206997702914,"orig":4.273534832763384,"zero":0},
{"x":103,"trend":4.271148748078089,"cycle":-0.0018038080548112012,"orig":4.269344940023278,"zero":0},
{"x":104,"trend":4.282746954518758,"cycle":-0.0002326915030286536,"orig":4.282514263015729,"zero":0},
{"x":105,"trend":4.286320742583479,"cycle":0.00021869661972913346,"orig":4.286539439203208,"zero":0},
{"x":106,"trend":4.285944089968203,"cycle":-0.0011637581759006838,"orig":4.2847803317923026,"zero":0},
{"x":107,"trend":4.2914031488561335,"cycle":-0.003990811169198208,"orig":4.287412337686935,"zero":0},
{"x":108,"trend":4.298008362941736,"cycle":-0.0071312008317166165,"orig":4.290877162110019,"zero":0},
{"x":109,"trend":4.294225191358684,"cycle":-0.009088108040032877,"orig":4.285137083318651,"zero":0},
{"x":110,"trend":4.308426681974533,"cycle":-0.008760438729415704,"orig":4.299666243245117,"zero":0},
{"x":111,"trend":4.304782363349425,"cycle":-0.006341162733348768,"orig":4.298441200616076,"zero":0},
{"x":112,"trend":4.311375884196504,"cycle":-0.003033465319906975,"orig":4.308342418876597,"zero":0},
{"x":113,"trend":4.316050418087307,"cycle":-0.00026241558778582197,"orig":4.315788002499521,"zero":0},
{"x":114,"trend":4.3225158537001365,"cycle":0.000865527040568706,"orig":4.323381380740705,"zero":0},
{"x":115,"trend":4.323319400384288,"cycle":0.00021572639212662226,"orig":4.323535126776415,"zero":0},
{"x":116,"trend":4.330046091108341,"cycle":-0.0014057290473505346,"orig":4.32864036206099,"zero":0},
{"x":117,"trend":4.338061210561455,"cycle":-0.003181216382250593,"orig":4.334879994179205,"zero":0},
{"x":118,"trend":4.339472497001939,"cycle":-0.004296408772716351,"orig":4.335176088229223,"zero":0},
{"x":119,"trend":4.348497743244672,"cycle":-0.004176869843380643,"orig":4.3443208734012915,"zero":0},
{"x":120,"trend":4.353730459625956,"cycle":-0.0030229381322076643,"orig":4.350707521493748,"zero":0},
{"x":121,"trend":4.353948945338213,"cycle":-0.001657553470596776,"orig":4.352291391867616,"zero":0},
{"x":122,"trend":4.365036969095797,"cycle":-0.0008777604285849921,"orig":4.364159208667212,"zero":0},
{"x":123,"trend":4.371848523900421,"cycle":-0.001363235073098143,"orig":4.3704852888273225,"zero":0},
{"x":124,"trend":4.374438330846251,"cycle":-0.0027815275035608378,"orig":4.371656803342691,"zero":0},
{"x":125,"trend":4.381400865385656,"cycle":-0.004219701065397333,"orig":4.377181164320258,"zero":0},
{"x":126,"trend":4.386236133014287,"cycle":-0.004469532146265387,"orig":4.381766600868022,"zero":0},
{"x":127,"trend":4.392666570527328,"cycle":-0.0023940269995948033,"orig":4.3902725435277326,"zero":0},
{"x":128,"trend":4.39837932880838,"cycle":0.0018481608129376076,"orig":4.400227489621318,"zero":0},
{"x":129,"trend":4.402838014279449,"cycle":0.006507050798442882,"orig":4.409345065077892,"zero":0},
{"x":130,"trend":4.408184720691815,"cycle":0.009988194368072911,"orig":4.418172915059888,"zero":0},
{"x":131,"trend":4.414427764748463,"cycle":0.011589439206453403,"orig":4.426017203954916,"zero":0},
{"x":132,"trend":4.418700374278339,"cycle":0.011566273259493207,"orig":4.430266647537833,"zero":0},
{"x":133,"trend":4.424187396370624,"cycle":0.010453035443155553,"orig":4.434640431813779,"zero":0},
{"x":134,"trend":4.4276245278855,"cycle":0.008633393546547463,"orig":4.4362579214320474,"zero":0},
{"x":135,"trend":4.430677623913376,"cycle":0.005931888530796514,"orig":4.436609512444173,"zero":0},
{"x":136,"trend":4.437576884351478,"cycle":0.002458011273308497,"orig":4.440034895624787,"zero":0},
{"x":137,"trend":4.4475892143564595,"cycle":-0.0009846061982608512,"orig":4.446604608158198,"zero":0},
{"x":138,"trend":4.443926459054054,"cycle":-0.003338506182000517,"orig":4.440587952872053,"zero":0},
{"x":139,"trend":4.440529781877237,"cycle":-0.003794815698698259,"orig":4.436734966178539,"zero":0},
{"x":140,"trend":4.459843808015461,"cycle":-0.0026169407786437865,"orig":4.457226867236817,"zero":0},
{"x":141,"trend":4.457468501766769,"cycle":-0.0007739624449131649,"orig":4.456694539321856,"zero":0},
{"x":142,"trend":4.462839889621386,"cycle":0.0006676487953216903,"orig":4.4635075384167076,"zero":0},
{"x":143,"trend":4.461844591954789,"cycle":0.0009045192973859278,"orig":4.462749111252175,"zero":0},
{"x":144,"trend":4.467084749601303,"cycle":0.00018451124432289356,"orig":4.467269260845626,"zero":0},
{"x":145,"trend":4.472096259222524,"cycle":-0.0005157532719197583,"orig":4.471580505950604,"zero":0},
{"x":146,"trend":4.477913075819615,"cycle":-0.0002694902186620718,"orig":4.477643585600952,"zero":0},
{"x":147,"trend":4.479085009291054,"cycle":0.0008246289993435324,"orig":4.479909638290398,"zero":0},
{"x":148,"trend":4.480460562197942,"cycle":0.0017450621839614489,"orig":4.482205624381904,"zero":0},
{"x":149,"trend":4.487151903551334,"cycle":0.0013563680889555896,"orig":4.488508271640289,"zero":0},
{"x":150,"trend":4.4881819835934955,"cycle":-0.0004583898652145979,"orig":4.487723593728281,"zero":0},
{"x":151,"trend":4.495820612922076,"cycle":-0.0023275168757838777,"orig":4.493493096046292,"zero":0},
{"x":152,"trend":4.500116832837048,"cycle":-0.002616493627132052,"orig":4.497500339209917,"zero":0},
{"x":153,"trend":4.494675000415242,"cycle":-0.0012199222507777302,"orig":4.493455078164464,"zero":0},
{"x":154,"trend":4.504482639787897,"cycle":0.0011213222753664598,"orig":4.5056039620632635,"zero":0},
{"x":155,"trend":4.506989640750245,"cycle":0.003449997414442879,"orig":4.510439638164688,"zero":0},
{"x":156,"trend":4.512991799573615,"cycle":0.0051313724262198185,"orig":4.518123171999835,"zero":0},
{"x":157,"trend":4.510494948304037,"cycle":0.006259238310484236,"orig":4.516754186614521,"zero":0},
{"x":158,"trend":4.512463494697696,"cycle":0.007409117627815612,"orig":4.5198726123255115,"zero":0},
{"x":159,"trend":4.514437642814199,"cycle":0.008984382040991931,"orig":4.523422024855191,"zero":0},
{"x":160,"trend":4.518599677383795,"cycle":0.01075692888244291,"orig":4.529356606266238,"zero":0},
{"x":161,"trend":4.51997559648055,"cycle":0.012085041839095104,"orig":4.532060638319645,"zero":0},
{"x":162,"trend":4.520043783454913,"cycle":0.012407311591114384,"orig":4.532451095046027,"zero":0},
{"x":163,"trend":4.518548501560839,"cycle":0.01194986103159941,"orig":4.530498362592438,"zero":0},
{"x":164,"trend":4.516427061891311,"cycle":0.01134466730837197,"orig":4.527771729199683,"zero":0},
{"x":165,"trend":4.52131299483935,"cycle":0.01106281738521428,"orig":4.532375812224564,"zero":0},
{"x":166,"trend":4.517231165353134,"cycle":0.011251262153723199,"orig":4.528482427506857,"zero":0},
{"x":167,"trend":4.517585475261877,"cycle":0.01117655671982433,"orig":4.528762031981702,"zero":0},
{"x":168,"trend":4.515330449642606,"cycle":0.010163211618788498,"orig":4.525493661261395,"zero":0},
{"x":169,"trend":4.512759992099583,"cycle":0.007962799810888654,"orig":4.5207227919104715,"zero":0},
{"x":170,"trend":4.509114956429358,"cycle":0.005073070346743189,"orig":4.514188026776101,"zero":0},
{"x":171,"trend":4.509834114167155,"cycle":0.0023015008537035087,"orig":4.512135615020859,"zero":0},
{"x":172,"trend":4.508573589373191,"cycle":-3.43550246713481e-5,"orig":4.50853923434852,"zero":0},
{"x":173,"trend":4.505849773363215,"cycle":-0.0020978838003253425,"orig":4.503751889562889,"zero":0},
{"x":174,"trend":4.502792069358817,"cycle":-0.004334423713265659,"orig":4.498457645645551,"zero":0},
{"x":175,"trend":4.499137852814278,"cycle":-0.007105010440179221,"orig":4.4920328423740985,"zero":0},
{"x":176,"trend":4.5011330555960285,"cycle":-0.010248652787021029,"orig":4.490884402809008,"zero":0},
{"x":177,"trend":4.49914781303183,"cycle":-0.013341286227586,"orig":4.485806526804244,"zero":0},
{"x":178,"trend":4.499059222011194,"cycle":-0.015997914661292204,"orig":4.483061307349902,"zero":0},
{"x":179,"trend":4.494640658254164,"cycle":-0.017644810989579734,"orig":4.476995847264583,"zero":0},
{"x":180,"trend":4.494336144023731,"cycle":-0.01776780656654904,"orig":4.4765683374571825,"zero":0},
{"x":181,"trend":4.499082663321722,"cycle":-0.015881261023368703,"orig":4.483201402298353,"zero":0},
{"x":182,"trend":4.495431155982829,"cycle":-0.012114529001866478,"orig":4.483316626980963,"zero":0},
{"x":183,"trend":4.49746294660478,"cycle":-0.006933986928894603,"orig":4.490528959675886,"zero":0},
{"x":184,"trend":4.496658230111425,"cycle":-0.001258268269860613,"orig":4.4953999618415645,"zero":0},
{"x":185,"trend":4.495670703483332,"cycle":0.0037388868255933544,"orig":4.499409590308925,"zero":0},
{"x":186,"trend":4.500743161984187,"cycle":0.00688144756118611,"orig":4.507624609545373,"zero":0},
{"x":187,"trend":4.4997734226171335,"cycle":0.007529216288739857,"orig":4.507302638905873,"zero":0},
{"x":188,"trend":4.500117206885275,"cycle":0.006074278497034943,"orig":4.50619148538231,"zero":0},
{"x":189,"trend":4.5032005714598204,"cycle":0.0038395626190886323,"orig":4.507040134078909,"zero":0},
{"x":190,"trend":4.502648173327135,"cycle":0.002307124414839809,"orig":4.504955297741974,"zero":0},
{"x":191,"trend":4.50823922387947,"cycle":0.002302649779822155,"orig":4.510541873659292,"zero":0},
{"x":192,"trend":4.501583588500707,"cycle":0.003381657867665838,"orig":4.504965246368373,"zero":0},
{"x":193,"trend":4.509256260615405,"cycle":0.004194391476867079,"orig":4.513450652092272,"zero":0},
{"x":194,"trend":4.511413819056918,"cycle":0.0032242539632807155,"orig":4.514638073020199,"zero":0},
{"x":195,"trend":4.51180149667263,"cycle":0.00020460499994125192,"orig":4.512006101672571,"zero":0},
{"x":196,"trend":4.509728773165233,"cycle":-0.0036973868017480954,"orig":4.506031386363485,"zero":0},
{"x":197,"trend":4.512705420444771,"cycle":-0.006946813512095487,"orig":4.505758606932676,"zero":0},
{"x":198,"trend":4.5153587346709045,"cycle":-0.008323013026677442,"orig":4.507035721644227,"zero":0},
{"x":199,"trend":4.519701974780206,"cycle":-0.007541117585380744,"orig":4.512160857194826,"zero":0},
{"x":200,"trend":4.515421292099,"cycle":-0.00544459272414842,"orig":4.509976699374851,"zero":0},
{"x":201,"trend":4.519452120609235,"cycle":-0.0030486695322446966,"orig":4.51640345107699,"zero":0},
{"x":202,"trend":4.518857131929215,"cycle":-0.0012228240938072232,"orig":4.517634307835408,"zero":0},
{"x":203,"trend":4.524586130550259,"cycle":-0.00026923066565361087,"orig":4.524316899884605,"zero":0},
{"x":204,"trend":4.524598231362941,"cycle":1.4614551073710569e-5,"orig":4.524612845914015,"zero":0},
{"x":205,"trend":4.526055735424375,"cycle":7.773670867412819e-5,"orig":4.526133472133049,"zero":0},
{"x":206,"trend":4.532171310266592,"cycle":-2.3532024382488803e-5,"orig":4.5321477782422095,"zero":0},
{"x":207,"trend":4.528606185514289,"cycle":-0.0004671631208477134,"orig":4.528139022393441,"zero":0},
{"x":208,"trend":4.5330628761661185,"cycle":-0.0012163545968703338,"orig":4.531846521569248,"zero":0},
{"x":209,"trend":4.541291182511591,"cycle":-0.0022469102356059423,"orig":4.539044272275985,"zero":0},
{"x":210,"trend":4.534800302457953,"cycle":-0.0035888689881554275,"orig":4.531211433469797,"zero":0},
{"x":211,"trend":4.5436915199030175,"cycle":-0.005036206749554406,"orig":4.5386553131534635,"zero":0},
{"x":212,"trend":4.545243453793458,"cycle":-0.005917173920626753,"orig":4.5393262798728315,"zero":0},
{"x":213,"trend":4.545798582392232,"cycle":-0.005202118161246133,"orig":4.540596464230986,"zero":0},
{"x":214,"trend":4.551465484046587,"cycle":-0.00237370707836794,"orig":4.549091776968219,"zero":0},
{"x":215,"trend":4.55021445711144,"cycle":0.0013576753077740866,"orig":4.5515721324192135,"zero":0},
{"x":216,"trend":4.555159873790594,"cycle":0.004348499629554747,"orig":4.559508373420149,"zero":0},
{"x":217,"trend":4.557163356673523,"cycle":0.005935095862496326,"orig":4.563098452536019,"zero":0},
{"x":218,"trend":4.563678855812607,"cycle":0.006652442786183585,"orig":4.5703312985987905,"zero":0},
{"x":219,"trend":4.5617119779264845,"cycle":0.007267140892688706,"orig":4.568979118819173,"zero":0},
{"x":220,"trend":4.563198036468019,"cycle":0.007931277794976807,"orig":4.571129314262995,"zero":0},
{"x":221,"trend":4.564396889523159,"cycle":0.007632145266688706,"orig":4.572029034789847,"zero":0},
{"x":222,"trend":4.571461060367829,"cycle":0.005055503579481965,"orig":4.576516563947311,"zero":0},
{"x":223,"trend":4.573024349043299,"cycle":0.0003207486157945916,"orig":4.573345097659094,"zero":0},
{"x":224,"trend":4.581565382976622,"cycle":-0.0049664969709661555,"orig":4.576598886005656,"zero":0},
{"x":225,"trend":4.565406103889379,"cycle":-0.008371046653269293,"orig":4.55703505723611,"zero":0},
{"x":226,"trend":4.577112058238315,"cycle":-0.008012671594994372,"orig":4.5690993866433205,"zero":0},
{"x":227,"trend":4.584516823093874,"cycle":-0.0042399198290584555,"orig":4.580276903264815,"zero":0},
{"x":228,"trend":4.584810713970625,"cycle":0.0006178828584218476,"orig":4.585428596829047,"zero":0},
{"x":229,"trend":4.5832548606467585,"cycle":0.0037503363832042946,"orig":4.587005197029963,"zero":0},
{"x":230,"trend":4.583347458537831,"cycle":0.004079238672469954,"orig":4.587426697210301,"zero":0},
{"x":231,"trend":4.587301803932364,"cycle":0.002377007937682696,"orig":4.589678811870047,"zero":0},
{"x":232,"trend":4.591990143936074,"cycle":0.0007207463772441469,"orig":4.592710890313318,"zero":0},
{"x":233,"trend":4.592538012482346,"cycle":0.0004269923873825715,"orig":4.592965004869729,"zero":0},
{"x":234,"trend":4.594890439887415,"cycle":0.0012359741987392758,"orig":4.596126414086154,"zero":0},
{"x":235,"trend":4.593940724210532,"cycle":0.0016729433700900659,"orig":4.595613667580622,"zero":0},
{"x":236,"trend":4.599395890043972,"cycle":0.0005969164149838141,"orig":4.599992806458956,"zero":0},
{"x":237,"trend":4.60033859657742,"cycle":-0.0020087524754042047,"orig":4.598329844102016,"zero":0},
{"x":238,"trend":4.601685171781082,"cycle":-0.004502803635191871,"orig":4.59718236814589,"zero":0},
{"x":239,"trend":4.602281998948579,"cycle":-0.005520063431025374,"orig":4.596761935517553,"zero":0},
{"x":240,"trend":4.611633241826728,"cycle":-0.004729559212485829,"orig":4.606903682614242,"zero":0}];
    const series = [{"name":"Cycle","color":"#2ca02c","key":"cycle","dash":""}];
    const bands = [];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#filt_cy_68');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Cycle') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Cycle');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

</script>
</body>
</html>