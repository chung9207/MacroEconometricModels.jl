<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Boosted HP Filter (BIC, 7 iter)</title>
<style>* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #fff;
    color: #333;
    padding: 20px;
}
.figure-title {
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 16px;
    color: #222;
}
.figure-source {
    font-size: 11px;
    color: #888;
    text-align: center;
    margin-top: 8px;
}
.panel-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
}
.panel {
    width: calc(100% - 16px);
    min-width: 300px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 12px;
}
.panel-title {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 8px;
    color: #444;
}
.axis text { font-size: 11px; fill: #666; }
.axis line, .axis path { stroke: #ccc; }
.grid line { stroke: #f0f0f0; stroke-dasharray: 2,2; }
.grid .domain { stroke: none; }
.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    z-index: 1000;
}
.legend { font-size: 11px; }
.legend rect { rx: 2; }
svg { overflow: visible; }
</style>
</head>
<body>
<div class="figure-title">Boosted HP Filter (BIC, 7 iter)</div>
<div class="panel-grid">
<div class="panel">
<div class="panel-title">Trend-Cycle Decomposition</div>
<div id="filt_tc_69"></div>
</div>
<div class="panel">
<div class="panel-title">Cyclical Component</div>
<div id="filt_cy_70"></div>
</div>
</div>

<div class="tooltip" id="tooltip"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script>
// Shared utilities
const tooltip = d3.select('#tooltip');
function fmt(v) {
    if (v === null || v === undefined) return '';
    return Math.abs(v) >= 1000 ? v.toFixed(1) : (Math.abs(v) >= 1 ? v.toFixed(3) : v.toFixed(4));
}
function showTip(evt, html) {
    tooltip.html(html).style('opacity',1)
        .style('left',(evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px');
}
function hideTip() { tooltip.style('opacity',0); }

(function() {
    const data = [{"x":1,"trend":4.02866654924226,"cycle":-0.0017410975188192298,"orig":4.026925451723441,"zero":0},
{"x":2,"trend":4.035386861544049,"cycle":0.004633501947451998,"orig":4.040020363491501,"zero":0},
{"x":3,"trend":4.0420876901326235,"cycle":-0.0006201318446240375,"orig":4.041467558288,"zero":0},
{"x":4,"trend":4.048759963628309,"cycle":-0.0009812911091735537,"orig":4.047778672519136,"zero":0},
{"x":5,"trend":4.055384024721849,"cycle":-0.0013025854400442842,"orig":4.054081439281805,"zero":0},
{"x":6,"trend":4.061930027607179,"cycle":-0.0026825590225406748,"orig":4.059247468584639,"zero":0},
{"x":7,"trend":4.068358503632927,"cycle":-0.002313969574321956,"orig":4.066044534058605,"zero":0},
{"x":8,"trend":4.074616280728986,"cycle":-0.0010936651325425249,"orig":4.073522615596443,"zero":0},
{"x":9,"trend":4.080640017534126,"cycle":-0.0031856279247764216,"orig":4.07745438960935,"zero":0},
{"x":10,"trend":4.086363385196154,"cycle":0.004324499522403092,"orig":4.090687884718557,"zero":0},
{"x":11,"trend":4.09170961777985,"cycle":0.003844212982235495,"orig":4.095553830762086,"zero":0},
{"x":12,"trend":4.096625862823426,"cycle":0.004520514517602945,"orig":4.101146377341029,"zero":0},
{"x":13,"trend":4.1010822728748835,"cycle":-0.00013290382291267623,"orig":4.100949369051971,"zero":0},
{"x":14,"trend":4.105075803556564,"cycle":0.0008728368360497832,"orig":4.105948640392613,"zero":0},
{"x":15,"trend":4.1086103241426954,"cycle":-0.0001968613251358356,"orig":4.10841346281756,"zero":0},
{"x":16,"trend":4.111701142746904,"cycle":0.002496699083297393,"orig":4.114197841830202,"zero":0},
{"x":17,"trend":4.114370137168041,"cycle":-0.002190568421026524,"orig":4.112179568747014,"zero":0},
{"x":18,"trend":4.116657077925778,"cycle":-0.001580581784596015,"orig":4.115076496141182,"zero":0},
{"x":19,"trend":4.118598433553514,"cycle":-0.0033750259800739593,"orig":4.11522340757344,"zero":0},
{"x":20,"trend":4.120229194998676,"cycle":-4.108146998850079e-6,"orig":4.120225086851677,"zero":0},
{"x":21,"trend":4.121574080179803,"cycle":-0.004478626686999179,"orig":4.117095453492804,"zero":0},
{"x":22,"trend":4.122661282399937,"cycle":-0.0012642925165202057,"orig":4.121396989883417,"zero":0},
{"x":23,"trend":4.123501860657722,"cycle":0.0003108848134148635,"orig":4.123812745471137,"zero":0},
{"x":24,"trend":4.124102755949001,"cycle":0.004229298700213236,"orig":4.128332054649214,"zero":0},
{"x":25,"trend":4.124472608903179,"cycle":0.006804794878513369,"orig":4.131277403781692,"zero":0},
{"x":26,"trend":4.12463777652135,"cycle":0.0022046304184114556,"orig":4.126842406939762,"zero":0},
{"x":27,"trend":4.124652397437416,"cycle":0.00468761793192748,"orig":4.129340015369343,"zero":0},
{"x":28,"trend":4.124576996654818,"cycle":0.004613337992881688,"orig":4.129190334647699,"zero":0},
{"x":29,"trend":4.1244880743197445,"cycle":-0.0009990351591756936,"orig":4.123489039160569,"zero":0},
{"x":30,"trend":4.124476578239319,"cycle":-0.0010636252698712906,"orig":4.123412952969447,"zero":0},
{"x":31,"trend":4.124622329157766,"cycle":-0.010903335877574945,"orig":4.113718993280192,"zero":0},
{"x":32,"trend":4.124993041549163,"cycle":-0.001523428099818474,"orig":4.123469613449345,"zero":0},
{"x":33,"trend":4.125601029243207,"cycle":-0.0052703823834088365,"orig":4.120330646859798,"zero":0},
{"x":34,"trend":4.126444558686227,"cycle":-0.007462669954847217,"orig":4.11898188873138,"zero":0},
{"x":35,"trend":4.127492347657066,"cycle":-0.005137106484471175,"orig":4.1223552411725946,"zero":0},
{"x":36,"trend":4.1286754348882155,"cycle":-0.0008509654255121534,"orig":4.127824469462704,"zero":0},
{"x":37,"trend":4.129899328479272,"cycle":-0.007145491783493083,"orig":4.122753836695779,"zero":0},
{"x":38,"trend":4.131065122586005,"cycle":0.0007293550829331229,"orig":4.131794477668938,"zero":0},
{"x":39,"trend":4.132044546561437,"cycle":0.004719134099250711,"orig":4.136763680660687,"zero":0},
{"x":40,"trend":4.132717052111916,"cycle":0.0014233783428886152,"orig":4.134140430454805,"zero":0},
{"x":41,"trend":4.132989717317235,"cycle":0.0041876164572985,"orig":4.137177333774534,"zero":0},
{"x":42,"trend":4.132784867575364,"cycle":0.007778301226120436,"orig":4.140563168801484,"zero":0},
{"x":43,"trend":4.132053622489328,"cycle":0.006760673156622724,"orig":4.13881429564595,"zero":0},
{"x":44,"trend":4.130792314492981,"cycle":0.011508731149974338,"orig":4.142301045642955,"zero":0},
{"x":45,"trend":4.129037889114263,"cycle":0.013339407642710046,"orig":4.142377296756973,"zero":0},
{"x":46,"trend":4.1268876347392665,"cycle":0.009630008874030411,"orig":4.136517643613296,"zero":0},
{"x":47,"trend":4.124505281337515,"cycle":-0.0007847814890248989,"orig":4.12372049984849,"zero":0},
{"x":48,"trend":4.1221021260556725,"cycle":-0.005748222795316438,"orig":4.116353903260356,"zero":0},
{"x":49,"trend":4.119888337199257,"cycle":-0.006795625015464164,"orig":4.113092712183793,"zero":0},
{"x":50,"trend":4.118047956820751,"cycle":-0.012371180701986534,"orig":4.105676776118765,"zero":0},
{"x":51,"trend":4.116731215748224,"cycle":-0.016825478895751242,"orig":4.099905736852473,"zero":0},
{"x":52,"trend":4.116027501080978,"cycle":-0.013486620634392453,"orig":4.102540880446586,"zero":0},
{"x":53,"trend":4.115943916774388,"cycle":-0.004032885726603894,"orig":4.111911031047784,"zero":0},
{"x":54,"trend":4.11641874424582,"cycle":0.0035627000510189922,"orig":4.1199814442968385,"zero":0},
{"x":55,"trend":4.117362432547785,"cycle":0.00541570361462217,"orig":4.122778136162407,"zero":0},
{"x":56,"trend":4.118691089223945,"cycle":0.004075707260849275,"orig":4.122766796484794,"zero":0},
{"x":57,"trend":4.12033528898376,"cycle":0.01033316645215659,"orig":4.1306684554359165,"zero":0},
{"x":58,"trend":4.122235187262941,"cycle":0.007886666334681174,"orig":4.130121853597622,"zero":0},
{"x":59,"trend":4.124369016636295,"cycle":0.004169221255784773,"orig":4.128538237892079,"zero":0},
{"x":60,"trend":4.126743544180063,"cycle":-0.003079690597507215,"orig":4.123663853582556,"zero":0},
{"x":61,"trend":4.129378985457355,"cycle":-0.010966395901554161,"orig":4.118412589555801,"zero":0},
{"x":62,"trend":4.132278521992318,"cycle":-0.006831042844227016,"orig":4.125447479148091,"zero":0},
{"x":63,"trend":4.135395149615842,"cycle":-0.0014581484672523853,"orig":4.13393700114859,"zero":0},
{"x":64,"trend":4.13865128455337,"cycle":0.002847183262017546,"orig":4.141498467815387,"zero":0},
{"x":65,"trend":4.141963893875429,"cycle":0.0028202651047409414,"orig":4.14478415898017,"zero":0},
{"x":66,"trend":4.145264958403619,"cycle":3.0923072535015946e-5,"orig":4.145295881476153,"zero":0},
{"x":67,"trend":4.148502867467974,"cycle":0.005957952081110962,"orig":4.154460819549085,"zero":0},
{"x":68,"trend":4.151631522085387,"cycle":-0.0027782571129339457,"orig":4.148853264972454,"zero":0},
{"x":69,"trend":4.154637302112663,"cycle":-0.00249092196830806,"orig":4.152146380144355,"zero":0},
{"x":70,"trend":4.157501552884975,"cycle":0.0013737179441785188,"orig":4.158875270829154,"zero":0},
{"x":71,"trend":4.160202217289312,"cycle":0.002458098338136913,"orig":4.162660315627448,"zero":0},
{"x":72,"trend":4.162730766155092,"cycle":0.0016170458387565778,"orig":4.164347811993848,"zero":0},
{"x":73,"trend":4.165096579369539,"cycle":0.003083775111553411,"orig":4.168180354481093,"zero":0},
{"x":74,"trend":4.16732250261527,"cycle":0.0056622457451478885,"orig":4.172984748360418,"zero":0},
{"x":75,"trend":4.169450111917799,"cycle":0.0026607227102503797,"orig":4.172110834628049,"zero":0},
{"x":76,"trend":4.171549484451148,"cycle":0.0033007551805373427,"orig":4.174850239631685,"zero":0},
{"x":77,"trend":4.173704260622256,"cycle":-0.002645601332451073,"orig":4.171058659289805,"zero":0},
{"x":78,"trend":4.176012453081429,"cycle":-0.0027011464420908394,"orig":4.173311306639339,"zero":0},
{"x":79,"trend":4.178558390495468,"cycle":-0.0025539673588155965,"orig":4.176004423136652,"zero":0},
{"x":80,"trend":4.181410546060567,"cycle":-0.006612591276745797,"orig":4.174797954783822,"zero":0},
{"x":81,"trend":4.1846205040534254,"cycle":-0.004531060953868556,"orig":4.180089443099557,"zero":0},
{"x":82,"trend":4.188203889992695,"cycle":-0.0008107944708355349,"orig":4.18739309552186,"zero":0},
{"x":83,"trend":4.19214861468622,"cycle":-0.0001965136111110121,"orig":4.191952101075109,"zero":0},
{"x":84,"trend":4.196430764473549,"cycle":0.0014266074485891817,"orig":4.197857371922138,"zero":0},
{"x":85,"trend":4.2010173610695505,"cycle":-0.0002863096804839069,"orig":4.2007310513890666,"zero":0},
{"x":86,"trend":4.205873960610184,"cycle":-0.004560177390840227,"orig":4.2013137832193435,"zero":0},
{"x":87,"trend":4.210958041025885,"cycle":0.0005056328000904653,"orig":4.211463673825975,"zero":0},
{"x":88,"trend":4.216201531156872,"cycle":0.001158280711755717,"orig":4.2173598118686275,"zero":0},
{"x":89,"trend":4.221534500380798,"cycle":0.00041580744637652713,"orig":4.221950307827175,"zero":0},
{"x":90,"trend":4.226889750685491,"cycle":0.0017890068288198778,"orig":4.228678757514311,"zero":0},
{"x":91,"trend":4.232201425665751,"cycle":-0.00219316247194137,"orig":4.23000826319381,"zero":0},
{"x":92,"trend":4.237412913493167,"cycle":-0.0007227927864310226,"orig":4.2366901207067365,"zero":0},
{"x":93,"trend":4.242461277654412,"cycle":-0.0026306076861238683,"orig":4.239830669968288,"zero":0},
{"x":94,"trend":4.247285434820792,"cycle":0.0005581663853554152,"orig":4.247843601206147,"zero":0},
{"x":95,"trend":4.251819364294343,"cycle":0.0028368598684883465,"orig":4.254656224162832,"zero":0},
{"x":96,"trend":4.256007342694019,"cycle":0.008815307391045307,"orig":4.264822650085065,"zero":0},
{"x":97,"trend":4.259814824610954,"cycle":0.0067083616720485005,"orig":4.266523186283003,"zero":0},
{"x":98,"trend":4.263255047840142,"cycle":0.0021394511378496255,"orig":4.265394498977991,"zero":0},
{"x":99,"trend":4.26637974393162,"cycle":0.0006750562046582093,"orig":4.267054800136278,"zero":0},
{"x":100,"trend":4.2692585769595235,"cycle":-0.003931502613461896,"orig":4.265327074346062,"zero":0},
{"x":101,"trend":4.271971746564519,"cycle":-0.001745765233339012,"orig":4.270225981331181,"zero":0},
{"x":102,"trend":4.2745885330886635,"cycle":-0.0010537003252790596,"orig":4.273534832763384,"zero":0},
{"x":103,"trend":4.277175366590015,"cycle":-0.007830426566737133,"orig":4.269344940023278,"zero":0},
{"x":104,"trend":4.27979725975002,"cycle":0.002717003265708906,"orig":4.282514263015729,"zero":0},
{"x":105,"trend":4.282486543957879,"cycle":0.004052895245329196,"orig":4.286539439203208,"zero":0},
{"x":106,"trend":4.2852874518426844,"cycle":-0.0005071200503823213,"orig":4.2847803317923026,"zero":0},
{"x":107,"trend":4.288260463563304,"cycle":-0.000848125876369723,"orig":4.287412337686935,"zero":0},
{"x":108,"trend":4.291460955893382,"cycle":-0.0005837937833632741,"orig":4.290877162110019,"zero":0},
{"x":109,"trend":4.294936472049692,"cycle":-0.009799388731040661,"orig":4.285137083318651,"zero":0},
{"x":110,"trend":4.298726861253696,"cycle":0.0009393819914203949,"orig":4.299666243245117,"zero":0},
{"x":111,"trend":4.3028232137492335,"cycle":-0.004382013133157753,"orig":4.298441200616076,"zero":0},
{"x":112,"trend":4.307214406518334,"cycle":0.0011280123582636985,"orig":4.308342418876597,"zero":0},
{"x":113,"trend":4.3118636517544235,"cycle":0.003924350745097363,"orig":4.315788002499521,"zero":0},
{"x":114,"trend":4.316732657764373,"cycle":0.0066487229763321,"orig":4.323381380740705,"zero":0},
{"x":115,"trend":4.321794061169857,"cycle":0.0017410656065575722,"orig":4.323535126776415,"zero":0},
{"x":116,"trend":4.3270436117942195,"cycle":0.0015967502667702687,"orig":4.32864036206099,"zero":0},
{"x":117,"trend":4.33247898717203,"cycle":0.002401007007174476,"orig":4.334879994179205,"zero":0},
{"x":118,"trend":4.338099469625593,"cycle":-0.002923381396370422,"orig":4.335176088229223,"zero":0},
{"x":119,"trend":4.343909810421009,"cycle":0.000411062980281817,"orig":4.3443208734012915,"zero":0},
{"x":120,"trend":4.349897342231915,"cycle":0.0008101792618326453,"orig":4.350707521493748,"zero":0},
{"x":121,"trend":4.356047075839528,"cycle":-0.0037556839719121928,"orig":4.352291391867616,"zero":0},
{"x":122,"trend":4.362344070452719,"cycle":0.0018151382144927512,"orig":4.364159208667212,"zero":0},
{"x":123,"trend":4.36875421243454,"cycle":0.0017310763927820307,"orig":4.3704852888273225,"zero":0},
{"x":124,"trend":4.375249490953207,"cycle":-0.0035926876105160347,"orig":4.371656803342691,"zero":0},
{"x":125,"trend":4.381808668323241,"cycle":-0.004627504002982577,"orig":4.377181164320258,"zero":0},
{"x":126,"trend":4.388395160702756,"cycle":-0.006628559834734065,"orig":4.381766600868022,"zero":0},
{"x":127,"trend":4.394953829563305,"cycle":-0.004681286035573026,"orig":4.3902725435277326,"zero":0},
{"x":128,"trend":4.401403675523099,"cycle":-0.0011761859017813264,"orig":4.400227489621318,"zero":0},
{"x":129,"trend":4.407647881771244,"cycle":0.00169718330664723,"orig":4.409345065077892,"zero":0},
{"x":130,"trend":4.413590642314104,"cycle":0.0045822727457829485,"orig":4.418172915059888,"zero":0},
{"x":131,"trend":4.419151054370348,"cycle":0.00686614958456811,"orig":4.426017203954916,"zero":0},
{"x":132,"trend":4.42427674368318,"cycle":0.005989903854652842,"orig":4.430266647537833,"zero":0},
{"x":133,"trend":4.428954414655685,"cycle":0.005686017158094255,"orig":4.434640431813779,"zero":0},
{"x":134,"trend":4.43320604801703,"cycle":0.0030518734150180612,"orig":4.4362579214320474,"zero":0},
{"x":135,"trend":4.437087057343579,"cycle":-0.0004775448994058823,"orig":4.436609512444173,"zero":0},
{"x":136,"trend":4.44067374392742,"cycle":-0.0006388483026334808,"orig":4.440034895624787,"zero":0},
{"x":137,"trend":4.444046420354154,"cycle":0.002558187804043796,"orig":4.446604608158198,"zero":0},
{"x":138,"trend":4.447286978898283,"cycle":-0.006699026026230494,"orig":4.440587952872053,"zero":0},
{"x":139,"trend":4.450490987096283,"cycle":-0.013756020917743713,"orig":4.436734966178539,"zero":0},
{"x":140,"trend":4.453725254157392,"cycle":0.003501613079424489,"orig":4.457226867236817,"zero":0},
{"x":141,"trend":4.456995128541911,"cycle":-0.0003005892200550737,"orig":4.456694539321856,"zero":0},
{"x":142,"trend":4.460318370059966,"cycle":0.0031891683567416744,"orig":4.4635075384167076,"zero":0},
{"x":143,"trend":4.463707062447219,"cycle":-0.000957951195043759,"orig":4.462749111252175,"zero":0},
{"x":144,"trend":4.467181611495315,"cycle":8.764935031139922e-5,"orig":4.467269260845626,"zero":0},
{"x":145,"trend":4.470751515459796,"cycle":0.0008289904908091237,"orig":4.471580505950604,"zero":0},
{"x":146,"trend":4.474419059673721,"cycle":0.0032245259272314203,"orig":4.477643585600952,"zero":0},
{"x":147,"trend":4.47818189569326,"cycle":0.0017277425971377837,"orig":4.479909638290398,"zero":0},
{"x":148,"trend":4.482043077835833,"cycle":0.00016254654607098873,"orig":4.482205624381904,"zero":0},
{"x":149,"trend":4.486004296232825,"cycle":0.0025039754074644934,"orig":4.488508271640289,"zero":0},
{"x":150,"trend":4.490059060767223,"cycle":-0.0023354670389421454,"orig":4.487723593728281,"zero":0},
{"x":151,"trend":4.494203258504795,"cycle":-0.0007101624585030814,"orig":4.493493096046292,"zero":0},
{"x":152,"trend":4.498414602644555,"cycle":-0.0009142634346383214,"orig":4.497500339209917,"zero":0},
{"x":153,"trend":4.5026607115950625,"cycle":-0.009205633430598293,"orig":4.493455078164464,"zero":0},
{"x":154,"trend":4.506899544010322,"cycle":-0.0012955819470583298,"orig":4.5056039620632635,"zero":0},
{"x":155,"trend":4.511044811936412,"cycle":-0.0006051737717239096,"orig":4.510439638164688,"zero":0},
{"x":156,"trend":4.51500262207041,"cycle":0.003120549929424843,"orig":4.518123171999835,"zero":0},
{"x":157,"trend":4.518676784736281,"cycle":-0.0019225981217609722,"orig":4.516754186614521,"zero":0},
{"x":158,"trend":4.521987548905523,"cycle":-0.002114936580011404,"orig":4.5198726123255115,"zero":0},
{"x":159,"trend":4.524852006314693,"cycle":-0.0014299814595021107,"orig":4.523422024855191,"zero":0},
{"x":160,"trend":4.5271856630816645,"cycle":0.002170943184573845,"orig":4.529356606266238,"zero":0},
{"x":161,"trend":4.528907693486716,"cycle":0.00315294483292862,"orig":4.532060638319645,"zero":0},
{"x":162,"trend":4.529958680804726,"cycle":0.00249241424130064,"orig":4.532451095046027,"zero":0},
{"x":163,"trend":4.530306510092351,"cycle":0.00019185250008787005,"orig":4.530498362592438,"zero":0},
{"x":164,"trend":4.529944590323885,"cycle":-0.0021728611242020426,"orig":4.527771729199683,"zero":0},
{"x":165,"trend":4.5288823576090795,"cycle":0.0034934546154849803,"orig":4.532375812224564,"zero":0},
{"x":166,"trend":4.5271349255034306,"cycle":0.001347502003426684,"orig":4.528482427506857,"zero":0},
{"x":167,"trend":4.524747282882844,"cycle":0.004014749098857942,"orig":4.528762031981702,"zero":0},
{"x":168,"trend":4.521783702318443,"cycle":0.003709958942952611,"orig":4.525493661261395,"zero":0},
{"x":169,"trend":4.518337612254034,"cycle":0.0023851796564374173,"orig":4.5207227919104715,"zero":0},
{"x":170,"trend":4.514527910594159,"cycle":-0.0003398838180584717,"orig":4.514188026776101,"zero":0},
{"x":171,"trend":4.510490339684023,"cycle":0.0016452753368355842,"orig":4.512135615020859,"zero":0},
{"x":172,"trend":4.506362376168847,"cycle":0.0021768581796724655,"orig":4.50853923434852,"zero":0},
{"x":173,"trend":4.502288510959885,"cycle":0.0014633786030039697,"orig":4.503751889562889,"zero":0},
{"x":174,"trend":4.49841909409492,"cycle":3.855155063154964e-5,"orig":4.498457645645551,"zero":0},
{"x":175,"trend":4.494903811401123,"cycle":-0.0028709690270247944,"orig":4.4920328423740985,"zero":0},
{"x":176,"trend":4.491882297467594,"cycle":-0.0009978946585860338,"orig":4.490884402809008,"zero":0},
{"x":177,"trend":4.489468677312796,"cycle":-0.0036621505085519604,"orig":4.485806526804244,"zero":0},
{"x":178,"trend":4.487757623959849,"cycle":-0.004696316609947132,"orig":4.483061307349902,"zero":0},
{"x":179,"trend":4.486811291076703,"cycle":-0.009815443812119046,"orig":4.476995847264583,"zero":0},
{"x":180,"trend":4.4866542166629735,"cycle":-0.010085879205790732,"orig":4.4765683374571825,"zero":0},
{"x":181,"trend":4.487251264735314,"cycle":-0.004049862436961279,"orig":4.483201402298353,"zero":0},
{"x":182,"trend":4.488507708015385,"cycle":-0.005191081034422746,"orig":4.483316626980963,"zero":0},
{"x":183,"trend":4.490297754051848,"cycle":0.000231205624038548,"orig":4.490528959675886,"zero":0},
{"x":184,"trend":4.492462353910163,"cycle":0.002937607931400975,"orig":4.4953999618415645,"zero":0},
{"x":185,"trend":4.494836196537486,"cycle":0.004573393771439211,"orig":4.499409590308925,"zero":0},
{"x":186,"trend":4.497263029216955,"cycle":0.010361580328417929,"orig":4.507624609545373,"zero":0},
{"x":187,"trend":4.499606237783331,"cycle":0.007696401122542091,"orig":4.507302638905873,"zero":0},
{"x":188,"trend":4.501777296167885,"cycle":0.004414189214425038,"orig":4.50619148538231,"zero":0},
{"x":189,"trend":4.503726733620347,"cycle":0.003313400458562165,"orig":4.507040134078909,"zero":0},
{"x":190,"trend":4.505431792038735,"cycle":-0.0004764942967606774,"orig":4.504955297741974,"zero":0},
{"x":191,"trend":4.506892975344421,"cycle":0.0036488983148714347,"orig":4.510541873659292,"zero":0},
{"x":192,"trend":4.5081181858939186,"cycle":-0.003152939525545021,"orig":4.504965246368373,"zero":0},
{"x":193,"trend":4.50914088246847,"cycle":0.004309769623802425,"orig":4.513450652092272,"zero":0},
{"x":194,"trend":4.509989870132654,"cycle":0.004648202887545368,"orig":4.514638073020199,"zero":0},
{"x":195,"trend":4.510721021870899,"cycle":0.0012850798016717947,"orig":4.512006101672571,"zero":0},
{"x":196,"trend":4.511417424804718,"cycle":-0.005386038441233157,"orig":4.506031386363485,"zero":0},
{"x":197,"trend":4.512173037355236,"cycle":-0.006414430422559933,"orig":4.505758606932676,"zero":0},
{"x":198,"trend":4.513061735469783,"cycle":-0.0060260138255558045,"orig":4.507035721644227,"zero":0},
{"x":199,"trend":4.514131078591183,"cycle":-0.0019702213963572906,"orig":4.512160857194826,"zero":0},
{"x":200,"trend":4.515402436684951,"cycle":-0.005425737310100318,"orig":4.509976699374851,"zero":0},
{"x":201,"trend":4.516887402521939,"cycle":-0.00048395144494883075,"orig":4.51640345107699,"zero":0},
{"x":202,"trend":4.518571610364079,"cycle":-0.0009373025286711005,"orig":4.517634307835408,"zero":0},
{"x":203,"trend":4.520435571069815,"cycle":0.003881328814789237,"orig":4.524316899884605,"zero":0},
{"x":204,"trend":4.522452144217653,"cycle":0.0021607016963617392,"orig":4.524612845914015,"zero":0},
{"x":205,"trend":4.524607270978915,"cycle":0.0015262011541334144,"orig":4.526133472133049,"zero":0},
{"x":206,"trend":4.5268922370958995,"cycle":0.005255541146310341,"orig":4.5321477782422095,"zero":0},
{"x":207,"trend":4.5293007983333835,"cycle":-0.0011617759399426178,"orig":4.528139022393441,"zero":0},
{"x":208,"trend":4.531845493286718,"cycle":1.028282529899247e-6,"orig":4.531846521569248,"zero":0},
{"x":209,"trend":4.534529653379357,"cycle":0.00451461889662856,"orig":4.539044272275985,"zero":0},
{"x":210,"trend":4.537352697002901,"cycle":-0.00614126353310451,"orig":4.531211433469797,"zero":0},
{"x":211,"trend":4.540330223279201,"cycle":-0.0016749101257375032,"orig":4.5386553131534635,"zero":0},
{"x":212,"trend":4.54344789440589,"cycle":-0.004121614533058506,"orig":4.5393262798728315,"zero":0},
{"x":213,"trend":4.546681681535906,"cycle":-0.00608521730492043,"orig":4.540596464230986,"zero":0},
{"x":214,"trend":4.549988065175783,"cycle":-0.0008962882075635144,"orig":4.549091776968219,"zero":0},
{"x":215,"trend":4.553296527640961,"cycle":-0.001724395221746932,"orig":4.5515721324192135,"zero":0},
{"x":216,"trend":4.556533460364218,"cycle":0.0029749130559310736,"orig":4.559508373420149,"zero":0},
{"x":217,"trend":4.559619762819805,"cycle":0.003478689716213959,"orig":4.563098452536019,"zero":0},
{"x":218,"trend":4.562492526923065,"cycle":0.007838771675725635,"orig":4.5703312985987905,"zero":0},
{"x":219,"trend":4.565108143497864,"cycle":0.0038709753213095038,"orig":4.568979118819173,"zero":0},
{"x":220,"trend":4.567461959271229,"cycle":0.0036673549917656356,"orig":4.571129314262995,"zero":0},
{"x":221,"trend":4.569571112408141,"cycle":0.002457922381706217,"orig":4.572029034789847,"zero":0},
{"x":222,"trend":4.571473451561219,"cycle":0.005043112386092143,"orig":4.576516563947311,"zero":0},
{"x":223,"trend":4.573221707980842,"cycle":0.00012338967825169695,"orig":4.573345097659094,"zero":0},
{"x":224,"trend":4.574893994933323,"cycle":0.001704891072333065,"orig":4.576598886005656,"zero":0},
{"x":225,"trend":4.576571294917759,"cycle":-0.01953623768164897,"orig":4.55703505723611,"zero":0},
{"x":226,"trend":4.578343351484177,"cycle":-0.009243964840856739,"orig":4.5690993866433205,"zero":0},
{"x":227,"trend":4.580214816402303,"cycle":6.208686251277372e-5,"orig":4.580276903264815,"zero":0},
{"x":228,"trend":4.582149617063885,"cycle":0.0032789797651625163,"orig":4.585428596829047,"zero":0},
{"x":229,"trend":4.584111267530669,"cycle":0.0028939294992941255,"orig":4.587005197029963,"zero":0},
{"x":230,"trend":4.5860767179980915,"cycle":0.001349979212209165,"orig":4.587426697210301,"zero":0},
{"x":231,"trend":4.5880345437569305,"cycle":0.0016442681131160885,"orig":4.589678811870047,"zero":0},
{"x":232,"trend":4.589978107142005,"cycle":0.002732783171312534,"orig":4.592710890313318,"zero":0},
{"x":233,"trend":4.591906772612714,"cycle":0.0010582322570147063,"orig":4.592965004869729,"zero":0},
{"x":234,"trend":4.593830584912086,"cycle":0.002295829174067109,"orig":4.596126414086154,"zero":0},
{"x":235,"trend":4.595762836937839,"cycle":-0.00014916935721708384,"orig":4.595613667580622,"zero":0},
{"x":236,"trend":4.597725367387161,"cycle":0.0022674390717950907,"orig":4.599992806458956,"zero":0},
{"x":237,"trend":4.599737754619538,"cycle":-0.00140791051752103,"orig":4.598329844102016,"zero":0},
{"x":238,"trend":4.6018278236065315,"cycle":-0.004645455460641545,"orig":4.59718236814589,"zero":0},
{"x":239,"trend":4.6040155775178775,"cycle":-0.007253642000324063,"orig":4.596761935517553,"zero":0},
{"x":240,"trend":4.606299172248995,"cycle":0.0006045103652468322,"orig":4.606903682614242,"zero":0},
{"x":241,"trend":4.608643809603852,"cycle":-0.005128992983926032,"orig":4.603514816619926,"zero":0},
{"x":242,"trend":4.61101658424603,"cycle":0.0018767016815712562,"orig":4.6128932859276,"zero":0},
{"x":243,"trend":4.613361968576926,"cycle":0.0013099327999779244,"orig":4.614671901376903,"zero":0},
{"x":244,"trend":4.615633075394277,"cycle":0.0057391458843785055,"orig":4.621372221278656,"zero":0},
{"x":245,"trend":4.617789735185885,"cycle":0.004538407567581291,"orig":4.622328142753466,"zero":0},
{"x":246,"trend":4.619818291452083,"cycle":0.0030866990850907175,"orig":4.622904990537174,"zero":0},
{"x":247,"trend":4.621726553998169,"cycle":-2.1820170987505165e-5,"orig":4.6217047338271815,"zero":0},
{"x":248,"trend":4.623537420316895,"cycle":9.135289513561429e-5,"orig":4.6236287732120305,"zero":0},
{"x":249,"trend":4.625275030584281,"cycle":0.0005738694121675661,"orig":4.625848899996448,"zero":0},
{"x":250,"trend":4.6269648428166885,"cycle":-0.003940004034754649,"orig":4.623024838781934,"zero":0},
{"x":251,"trend":4.628635193489389,"cycle":-0.00028964291074126854,"orig":4.628345550578648,"zero":0},
{"x":252,"trend":4.630296914548161,"cycle":-0.001602603263200204,"orig":4.628694311284961,"zero":0}];
    const series = [{"name":"Original","color":"#1f77b4","key":"orig","dash":""},{"name":"Trend","color":"#ff7f0e","key":"trend","dash":"6,3"}];
    const bands = [];
    const refLines = [];

    const container = d3.select('#filt_tc_69');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Value') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Value');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":1,"trend":4.02866654924226,"cycle":-0.0017410975188192298,"orig":4.026925451723441,"zero":0},
{"x":2,"trend":4.035386861544049,"cycle":0.004633501947451998,"orig":4.040020363491501,"zero":0},
{"x":3,"trend":4.0420876901326235,"cycle":-0.0006201318446240375,"orig":4.041467558288,"zero":0},
{"x":4,"trend":4.048759963628309,"cycle":-0.0009812911091735537,"orig":4.047778672519136,"zero":0},
{"x":5,"trend":4.055384024721849,"cycle":-0.0013025854400442842,"orig":4.054081439281805,"zero":0},
{"x":6,"trend":4.061930027607179,"cycle":-0.0026825590225406748,"orig":4.059247468584639,"zero":0},
{"x":7,"trend":4.068358503632927,"cycle":-0.002313969574321956,"orig":4.066044534058605,"zero":0},
{"x":8,"trend":4.074616280728986,"cycle":-0.0010936651325425249,"orig":4.073522615596443,"zero":0},
{"x":9,"trend":4.080640017534126,"cycle":-0.0031856279247764216,"orig":4.07745438960935,"zero":0},
{"x":10,"trend":4.086363385196154,"cycle":0.004324499522403092,"orig":4.090687884718557,"zero":0},
{"x":11,"trend":4.09170961777985,"cycle":0.003844212982235495,"orig":4.095553830762086,"zero":0},
{"x":12,"trend":4.096625862823426,"cycle":0.004520514517602945,"orig":4.101146377341029,"zero":0},
{"x":13,"trend":4.1010822728748835,"cycle":-0.00013290382291267623,"orig":4.100949369051971,"zero":0},
{"x":14,"trend":4.105075803556564,"cycle":0.0008728368360497832,"orig":4.105948640392613,"zero":0},
{"x":15,"trend":4.1086103241426954,"cycle":-0.0001968613251358356,"orig":4.10841346281756,"zero":0},
{"x":16,"trend":4.111701142746904,"cycle":0.002496699083297393,"orig":4.114197841830202,"zero":0},
{"x":17,"trend":4.114370137168041,"cycle":-0.002190568421026524,"orig":4.112179568747014,"zero":0},
{"x":18,"trend":4.116657077925778,"cycle":-0.001580581784596015,"orig":4.115076496141182,"zero":0},
{"x":19,"trend":4.118598433553514,"cycle":-0.0033750259800739593,"orig":4.11522340757344,"zero":0},
{"x":20,"trend":4.120229194998676,"cycle":-4.108146998850079e-6,"orig":4.120225086851677,"zero":0},
{"x":21,"trend":4.121574080179803,"cycle":-0.004478626686999179,"orig":4.117095453492804,"zero":0},
{"x":22,"trend":4.122661282399937,"cycle":-0.0012642925165202057,"orig":4.121396989883417,"zero":0},
{"x":23,"trend":4.123501860657722,"cycle":0.0003108848134148635,"orig":4.123812745471137,"zero":0},
{"x":24,"trend":4.124102755949001,"cycle":0.004229298700213236,"orig":4.128332054649214,"zero":0},
{"x":25,"trend":4.124472608903179,"cycle":0.006804794878513369,"orig":4.131277403781692,"zero":0},
{"x":26,"trend":4.12463777652135,"cycle":0.0022046304184114556,"orig":4.126842406939762,"zero":0},
{"x":27,"trend":4.124652397437416,"cycle":0.00468761793192748,"orig":4.129340015369343,"zero":0},
{"x":28,"trend":4.124576996654818,"cycle":0.004613337992881688,"orig":4.129190334647699,"zero":0},
{"x":29,"trend":4.1244880743197445,"cycle":-0.0009990351591756936,"orig":4.123489039160569,"zero":0},
{"x":30,"trend":4.124476578239319,"cycle":-0.0010636252698712906,"orig":4.123412952969447,"zero":0},
{"x":31,"trend":4.124622329157766,"cycle":-0.010903335877574945,"orig":4.113718993280192,"zero":0},
{"x":32,"trend":4.124993041549163,"cycle":-0.001523428099818474,"orig":4.123469613449345,"zero":0},
{"x":33,"trend":4.125601029243207,"cycle":-0.0052703823834088365,"orig":4.120330646859798,"zero":0},
{"x":34,"trend":4.126444558686227,"cycle":-0.007462669954847217,"orig":4.11898188873138,"zero":0},
{"x":35,"trend":4.127492347657066,"cycle":-0.005137106484471175,"orig":4.1223552411725946,"zero":0},
{"x":36,"trend":4.1286754348882155,"cycle":-0.0008509654255121534,"orig":4.127824469462704,"zero":0},
{"x":37,"trend":4.129899328479272,"cycle":-0.007145491783493083,"orig":4.122753836695779,"zero":0},
{"x":38,"trend":4.131065122586005,"cycle":0.0007293550829331229,"orig":4.131794477668938,"zero":0},
{"x":39,"trend":4.132044546561437,"cycle":0.004719134099250711,"orig":4.136763680660687,"zero":0},
{"x":40,"trend":4.132717052111916,"cycle":0.0014233783428886152,"orig":4.134140430454805,"zero":0},
{"x":41,"trend":4.132989717317235,"cycle":0.0041876164572985,"orig":4.137177333774534,"zero":0},
{"x":42,"trend":4.132784867575364,"cycle":0.007778301226120436,"orig":4.140563168801484,"zero":0},
{"x":43,"trend":4.132053622489328,"cycle":0.006760673156622724,"orig":4.13881429564595,"zero":0},
{"x":44,"trend":4.130792314492981,"cycle":0.011508731149974338,"orig":4.142301045642955,"zero":0},
{"x":45,"trend":4.129037889114263,"cycle":0.013339407642710046,"orig":4.142377296756973,"zero":0},
{"x":46,"trend":4.1268876347392665,"cycle":0.009630008874030411,"orig":4.136517643613296,"zero":0},
{"x":47,"trend":4.124505281337515,"cycle":-0.0007847814890248989,"orig":4.12372049984849,"zero":0},
{"x":48,"trend":4.1221021260556725,"cycle":-0.005748222795316438,"orig":4.116353903260356,"zero":0},
{"x":49,"trend":4.119888337199257,"cycle":-0.006795625015464164,"orig":4.113092712183793,"zero":0},
{"x":50,"trend":4.118047956820751,"cycle":-0.012371180701986534,"orig":4.105676776118765,"zero":0},
{"x":51,"trend":4.116731215748224,"cycle":-0.016825478895751242,"orig":4.099905736852473,"zero":0},
{"x":52,"trend":4.116027501080978,"cycle":-0.013486620634392453,"orig":4.102540880446586,"zero":0},
{"x":53,"trend":4.115943916774388,"cycle":-0.004032885726603894,"orig":4.111911031047784,"zero":0},
{"x":54,"trend":4.11641874424582,"cycle":0.0035627000510189922,"orig":4.1199814442968385,"zero":0},
{"x":55,"trend":4.117362432547785,"cycle":0.00541570361462217,"orig":4.122778136162407,"zero":0},
{"x":56,"trend":4.118691089223945,"cycle":0.004075707260849275,"orig":4.122766796484794,"zero":0},
{"x":57,"trend":4.12033528898376,"cycle":0.01033316645215659,"orig":4.1306684554359165,"zero":0},
{"x":58,"trend":4.122235187262941,"cycle":0.007886666334681174,"orig":4.130121853597622,"zero":0},
{"x":59,"trend":4.124369016636295,"cycle":0.004169221255784773,"orig":4.128538237892079,"zero":0},
{"x":60,"trend":4.126743544180063,"cycle":-0.003079690597507215,"orig":4.123663853582556,"zero":0},
{"x":61,"trend":4.129378985457355,"cycle":-0.010966395901554161,"orig":4.118412589555801,"zero":0},
{"x":62,"trend":4.132278521992318,"cycle":-0.006831042844227016,"orig":4.125447479148091,"zero":0},
{"x":63,"trend":4.135395149615842,"cycle":-0.0014581484672523853,"orig":4.13393700114859,"zero":0},
{"x":64,"trend":4.13865128455337,"cycle":0.002847183262017546,"orig":4.141498467815387,"zero":0},
{"x":65,"trend":4.141963893875429,"cycle":0.0028202651047409414,"orig":4.14478415898017,"zero":0},
{"x":66,"trend":4.145264958403619,"cycle":3.0923072535015946e-5,"orig":4.145295881476153,"zero":0},
{"x":67,"trend":4.148502867467974,"cycle":0.005957952081110962,"orig":4.154460819549085,"zero":0},
{"x":68,"trend":4.151631522085387,"cycle":-0.0027782571129339457,"orig":4.148853264972454,"zero":0},
{"x":69,"trend":4.154637302112663,"cycle":-0.00249092196830806,"orig":4.152146380144355,"zero":0},
{"x":70,"trend":4.157501552884975,"cycle":0.0013737179441785188,"orig":4.158875270829154,"zero":0},
{"x":71,"trend":4.160202217289312,"cycle":0.002458098338136913,"orig":4.162660315627448,"zero":0},
{"x":72,"trend":4.162730766155092,"cycle":0.0016170458387565778,"orig":4.164347811993848,"zero":0},
{"x":73,"trend":4.165096579369539,"cycle":0.003083775111553411,"orig":4.168180354481093,"zero":0},
{"x":74,"trend":4.16732250261527,"cycle":0.0056622457451478885,"orig":4.172984748360418,"zero":0},
{"x":75,"trend":4.169450111917799,"cycle":0.0026607227102503797,"orig":4.172110834628049,"zero":0},
{"x":76,"trend":4.171549484451148,"cycle":0.0033007551805373427,"orig":4.174850239631685,"zero":0},
{"x":77,"trend":4.173704260622256,"cycle":-0.002645601332451073,"orig":4.171058659289805,"zero":0},
{"x":78,"trend":4.176012453081429,"cycle":-0.0027011464420908394,"orig":4.173311306639339,"zero":0},
{"x":79,"trend":4.178558390495468,"cycle":-0.0025539673588155965,"orig":4.176004423136652,"zero":0},
{"x":80,"trend":4.181410546060567,"cycle":-0.006612591276745797,"orig":4.174797954783822,"zero":0},
{"x":81,"trend":4.1846205040534254,"cycle":-0.004531060953868556,"orig":4.180089443099557,"zero":0},
{"x":82,"trend":4.188203889992695,"cycle":-0.0008107944708355349,"orig":4.18739309552186,"zero":0},
{"x":83,"trend":4.19214861468622,"cycle":-0.0001965136111110121,"orig":4.191952101075109,"zero":0},
{"x":84,"trend":4.196430764473549,"cycle":0.0014266074485891817,"orig":4.197857371922138,"zero":0},
{"x":85,"trend":4.2010173610695505,"cycle":-0.0002863096804839069,"orig":4.2007310513890666,"zero":0},
{"x":86,"trend":4.205873960610184,"cycle":-0.004560177390840227,"orig":4.2013137832193435,"zero":0},
{"x":87,"trend":4.210958041025885,"cycle":0.0005056328000904653,"orig":4.211463673825975,"zero":0},
{"x":88,"trend":4.216201531156872,"cycle":0.001158280711755717,"orig":4.2173598118686275,"zero":0},
{"x":89,"trend":4.221534500380798,"cycle":0.00041580744637652713,"orig":4.221950307827175,"zero":0},
{"x":90,"trend":4.226889750685491,"cycle":0.0017890068288198778,"orig":4.228678757514311,"zero":0},
{"x":91,"trend":4.232201425665751,"cycle":-0.00219316247194137,"orig":4.23000826319381,"zero":0},
{"x":92,"trend":4.237412913493167,"cycle":-0.0007227927864310226,"orig":4.2366901207067365,"zero":0},
{"x":93,"trend":4.242461277654412,"cycle":-0.0026306076861238683,"orig":4.239830669968288,"zero":0},
{"x":94,"trend":4.247285434820792,"cycle":0.0005581663853554152,"orig":4.247843601206147,"zero":0},
{"x":95,"trend":4.251819364294343,"cycle":0.0028368598684883465,"orig":4.254656224162832,"zero":0},
{"x":96,"trend":4.256007342694019,"cycle":0.008815307391045307,"orig":4.264822650085065,"zero":0},
{"x":97,"trend":4.259814824610954,"cycle":0.0067083616720485005,"orig":4.266523186283003,"zero":0},
{"x":98,"trend":4.263255047840142,"cycle":0.0021394511378496255,"orig":4.265394498977991,"zero":0},
{"x":99,"trend":4.26637974393162,"cycle":0.0006750562046582093,"orig":4.267054800136278,"zero":0},
{"x":100,"trend":4.2692585769595235,"cycle":-0.003931502613461896,"orig":4.265327074346062,"zero":0},
{"x":101,"trend":4.271971746564519,"cycle":-0.001745765233339012,"orig":4.270225981331181,"zero":0},
{"x":102,"trend":4.2745885330886635,"cycle":-0.0010537003252790596,"orig":4.273534832763384,"zero":0},
{"x":103,"trend":4.277175366590015,"cycle":-0.007830426566737133,"orig":4.269344940023278,"zero":0},
{"x":104,"trend":4.27979725975002,"cycle":0.002717003265708906,"orig":4.282514263015729,"zero":0},
{"x":105,"trend":4.282486543957879,"cycle":0.004052895245329196,"orig":4.286539439203208,"zero":0},
{"x":106,"trend":4.2852874518426844,"cycle":-0.0005071200503823213,"orig":4.2847803317923026,"zero":0},
{"x":107,"trend":4.288260463563304,"cycle":-0.000848125876369723,"orig":4.287412337686935,"zero":0},
{"x":108,"trend":4.291460955893382,"cycle":-0.0005837937833632741,"orig":4.290877162110019,"zero":0},
{"x":109,"trend":4.294936472049692,"cycle":-0.009799388731040661,"orig":4.285137083318651,"zero":0},
{"x":110,"trend":4.298726861253696,"cycle":0.0009393819914203949,"orig":4.299666243245117,"zero":0},
{"x":111,"trend":4.3028232137492335,"cycle":-0.004382013133157753,"orig":4.298441200616076,"zero":0},
{"x":112,"trend":4.307214406518334,"cycle":0.0011280123582636985,"orig":4.308342418876597,"zero":0},
{"x":113,"trend":4.3118636517544235,"cycle":0.003924350745097363,"orig":4.315788002499521,"zero":0},
{"x":114,"trend":4.316732657764373,"cycle":0.0066487229763321,"orig":4.323381380740705,"zero":0},
{"x":115,"trend":4.321794061169857,"cycle":0.0017410656065575722,"orig":4.323535126776415,"zero":0},
{"x":116,"trend":4.3270436117942195,"cycle":0.0015967502667702687,"orig":4.32864036206099,"zero":0},
{"x":117,"trend":4.33247898717203,"cycle":0.002401007007174476,"orig":4.334879994179205,"zero":0},
{"x":118,"trend":4.338099469625593,"cycle":-0.002923381396370422,"orig":4.335176088229223,"zero":0},
{"x":119,"trend":4.343909810421009,"cycle":0.000411062980281817,"orig":4.3443208734012915,"zero":0},
{"x":120,"trend":4.349897342231915,"cycle":0.0008101792618326453,"orig":4.350707521493748,"zero":0},
{"x":121,"trend":4.356047075839528,"cycle":-0.0037556839719121928,"orig":4.352291391867616,"zero":0},
{"x":122,"trend":4.362344070452719,"cycle":0.0018151382144927512,"orig":4.364159208667212,"zero":0},
{"x":123,"trend":4.36875421243454,"cycle":0.0017310763927820307,"orig":4.3704852888273225,"zero":0},
{"x":124,"trend":4.375249490953207,"cycle":-0.0035926876105160347,"orig":4.371656803342691,"zero":0},
{"x":125,"trend":4.381808668323241,"cycle":-0.004627504002982577,"orig":4.377181164320258,"zero":0},
{"x":126,"trend":4.388395160702756,"cycle":-0.006628559834734065,"orig":4.381766600868022,"zero":0},
{"x":127,"trend":4.394953829563305,"cycle":-0.004681286035573026,"orig":4.3902725435277326,"zero":0},
{"x":128,"trend":4.401403675523099,"cycle":-0.0011761859017813264,"orig":4.400227489621318,"zero":0},
{"x":129,"trend":4.407647881771244,"cycle":0.00169718330664723,"orig":4.409345065077892,"zero":0},
{"x":130,"trend":4.413590642314104,"cycle":0.0045822727457829485,"orig":4.418172915059888,"zero":0},
{"x":131,"trend":4.419151054370348,"cycle":0.00686614958456811,"orig":4.426017203954916,"zero":0},
{"x":132,"trend":4.42427674368318,"cycle":0.005989903854652842,"orig":4.430266647537833,"zero":0},
{"x":133,"trend":4.428954414655685,"cycle":0.005686017158094255,"orig":4.434640431813779,"zero":0},
{"x":134,"trend":4.43320604801703,"cycle":0.0030518734150180612,"orig":4.4362579214320474,"zero":0},
{"x":135,"trend":4.437087057343579,"cycle":-0.0004775448994058823,"orig":4.436609512444173,"zero":0},
{"x":136,"trend":4.44067374392742,"cycle":-0.0006388483026334808,"orig":4.440034895624787,"zero":0},
{"x":137,"trend":4.444046420354154,"cycle":0.002558187804043796,"orig":4.446604608158198,"zero":0},
{"x":138,"trend":4.447286978898283,"cycle":-0.006699026026230494,"orig":4.440587952872053,"zero":0},
{"x":139,"trend":4.450490987096283,"cycle":-0.013756020917743713,"orig":4.436734966178539,"zero":0},
{"x":140,"trend":4.453725254157392,"cycle":0.003501613079424489,"orig":4.457226867236817,"zero":0},
{"x":141,"trend":4.456995128541911,"cycle":-0.0003005892200550737,"orig":4.456694539321856,"zero":0},
{"x":142,"trend":4.460318370059966,"cycle":0.0031891683567416744,"orig":4.4635075384167076,"zero":0},
{"x":143,"trend":4.463707062447219,"cycle":-0.000957951195043759,"orig":4.462749111252175,"zero":0},
{"x":144,"trend":4.467181611495315,"cycle":8.764935031139922e-5,"orig":4.467269260845626,"zero":0},
{"x":145,"trend":4.470751515459796,"cycle":0.0008289904908091237,"orig":4.471580505950604,"zero":0},
{"x":146,"trend":4.474419059673721,"cycle":0.0032245259272314203,"orig":4.477643585600952,"zero":0},
{"x":147,"trend":4.47818189569326,"cycle":0.0017277425971377837,"orig":4.479909638290398,"zero":0},
{"x":148,"trend":4.482043077835833,"cycle":0.00016254654607098873,"orig":4.482205624381904,"zero":0},
{"x":149,"trend":4.486004296232825,"cycle":0.0025039754074644934,"orig":4.488508271640289,"zero":0},
{"x":150,"trend":4.490059060767223,"cycle":-0.0023354670389421454,"orig":4.487723593728281,"zero":0},
{"x":151,"trend":4.494203258504795,"cycle":-0.0007101624585030814,"orig":4.493493096046292,"zero":0},
{"x":152,"trend":4.498414602644555,"cycle":-0.0009142634346383214,"orig":4.497500339209917,"zero":0},
{"x":153,"trend":4.5026607115950625,"cycle":-0.009205633430598293,"orig":4.493455078164464,"zero":0},
{"x":154,"trend":4.506899544010322,"cycle":-0.0012955819470583298,"orig":4.5056039620632635,"zero":0},
{"x":155,"trend":4.511044811936412,"cycle":-0.0006051737717239096,"orig":4.510439638164688,"zero":0},
{"x":156,"trend":4.51500262207041,"cycle":0.003120549929424843,"orig":4.518123171999835,"zero":0},
{"x":157,"trend":4.518676784736281,"cycle":-0.0019225981217609722,"orig":4.516754186614521,"zero":0},
{"x":158,"trend":4.521987548905523,"cycle":-0.002114936580011404,"orig":4.5198726123255115,"zero":0},
{"x":159,"trend":4.524852006314693,"cycle":-0.0014299814595021107,"orig":4.523422024855191,"zero":0},
{"x":160,"trend":4.5271856630816645,"cycle":0.002170943184573845,"orig":4.529356606266238,"zero":0},
{"x":161,"trend":4.528907693486716,"cycle":0.00315294483292862,"orig":4.532060638319645,"zero":0},
{"x":162,"trend":4.529958680804726,"cycle":0.00249241424130064,"orig":4.532451095046027,"zero":0},
{"x":163,"trend":4.530306510092351,"cycle":0.00019185250008787005,"orig":4.530498362592438,"zero":0},
{"x":164,"trend":4.529944590323885,"cycle":-0.0021728611242020426,"orig":4.527771729199683,"zero":0},
{"x":165,"trend":4.5288823576090795,"cycle":0.0034934546154849803,"orig":4.532375812224564,"zero":0},
{"x":166,"trend":4.5271349255034306,"cycle":0.001347502003426684,"orig":4.528482427506857,"zero":0},
{"x":167,"trend":4.524747282882844,"cycle":0.004014749098857942,"orig":4.528762031981702,"zero":0},
{"x":168,"trend":4.521783702318443,"cycle":0.003709958942952611,"orig":4.525493661261395,"zero":0},
{"x":169,"trend":4.518337612254034,"cycle":0.0023851796564374173,"orig":4.5207227919104715,"zero":0},
{"x":170,"trend":4.514527910594159,"cycle":-0.0003398838180584717,"orig":4.514188026776101,"zero":0},
{"x":171,"trend":4.510490339684023,"cycle":0.0016452753368355842,"orig":4.512135615020859,"zero":0},
{"x":172,"trend":4.506362376168847,"cycle":0.0021768581796724655,"orig":4.50853923434852,"zero":0},
{"x":173,"trend":4.502288510959885,"cycle":0.0014633786030039697,"orig":4.503751889562889,"zero":0},
{"x":174,"trend":4.49841909409492,"cycle":3.855155063154964e-5,"orig":4.498457645645551,"zero":0},
{"x":175,"trend":4.494903811401123,"cycle":-0.0028709690270247944,"orig":4.4920328423740985,"zero":0},
{"x":176,"trend":4.491882297467594,"cycle":-0.0009978946585860338,"orig":4.490884402809008,"zero":0},
{"x":177,"trend":4.489468677312796,"cycle":-0.0036621505085519604,"orig":4.485806526804244,"zero":0},
{"x":178,"trend":4.487757623959849,"cycle":-0.004696316609947132,"orig":4.483061307349902,"zero":0},
{"x":179,"trend":4.486811291076703,"cycle":-0.009815443812119046,"orig":4.476995847264583,"zero":0},
{"x":180,"trend":4.4866542166629735,"cycle":-0.010085879205790732,"orig":4.4765683374571825,"zero":0},
{"x":181,"trend":4.487251264735314,"cycle":-0.004049862436961279,"orig":4.483201402298353,"zero":0},
{"x":182,"trend":4.488507708015385,"cycle":-0.005191081034422746,"orig":4.483316626980963,"zero":0},
{"x":183,"trend":4.490297754051848,"cycle":0.000231205624038548,"orig":4.490528959675886,"zero":0},
{"x":184,"trend":4.492462353910163,"cycle":0.002937607931400975,"orig":4.4953999618415645,"zero":0},
{"x":185,"trend":4.494836196537486,"cycle":0.004573393771439211,"orig":4.499409590308925,"zero":0},
{"x":186,"trend":4.497263029216955,"cycle":0.010361580328417929,"orig":4.507624609545373,"zero":0},
{"x":187,"trend":4.499606237783331,"cycle":0.007696401122542091,"orig":4.507302638905873,"zero":0},
{"x":188,"trend":4.501777296167885,"cycle":0.004414189214425038,"orig":4.50619148538231,"zero":0},
{"x":189,"trend":4.503726733620347,"cycle":0.003313400458562165,"orig":4.507040134078909,"zero":0},
{"x":190,"trend":4.505431792038735,"cycle":-0.0004764942967606774,"orig":4.504955297741974,"zero":0},
{"x":191,"trend":4.506892975344421,"cycle":0.0036488983148714347,"orig":4.510541873659292,"zero":0},
{"x":192,"trend":4.5081181858939186,"cycle":-0.003152939525545021,"orig":4.504965246368373,"zero":0},
{"x":193,"trend":4.50914088246847,"cycle":0.004309769623802425,"orig":4.513450652092272,"zero":0},
{"x":194,"trend":4.509989870132654,"cycle":0.004648202887545368,"orig":4.514638073020199,"zero":0},
{"x":195,"trend":4.510721021870899,"cycle":0.0012850798016717947,"orig":4.512006101672571,"zero":0},
{"x":196,"trend":4.511417424804718,"cycle":-0.005386038441233157,"orig":4.506031386363485,"zero":0},
{"x":197,"trend":4.512173037355236,"cycle":-0.006414430422559933,"orig":4.505758606932676,"zero":0},
{"x":198,"trend":4.513061735469783,"cycle":-0.0060260138255558045,"orig":4.507035721644227,"zero":0},
{"x":199,"trend":4.514131078591183,"cycle":-0.0019702213963572906,"orig":4.512160857194826,"zero":0},
{"x":200,"trend":4.515402436684951,"cycle":-0.005425737310100318,"orig":4.509976699374851,"zero":0},
{"x":201,"trend":4.516887402521939,"cycle":-0.00048395144494883075,"orig":4.51640345107699,"zero":0},
{"x":202,"trend":4.518571610364079,"cycle":-0.0009373025286711005,"orig":4.517634307835408,"zero":0},
{"x":203,"trend":4.520435571069815,"cycle":0.003881328814789237,"orig":4.524316899884605,"zero":0},
{"x":204,"trend":4.522452144217653,"cycle":0.0021607016963617392,"orig":4.524612845914015,"zero":0},
{"x":205,"trend":4.524607270978915,"cycle":0.0015262011541334144,"orig":4.526133472133049,"zero":0},
{"x":206,"trend":4.5268922370958995,"cycle":0.005255541146310341,"orig":4.5321477782422095,"zero":0},
{"x":207,"trend":4.5293007983333835,"cycle":-0.0011617759399426178,"orig":4.528139022393441,"zero":0},
{"x":208,"trend":4.531845493286718,"cycle":1.028282529899247e-6,"orig":4.531846521569248,"zero":0},
{"x":209,"trend":4.534529653379357,"cycle":0.00451461889662856,"orig":4.539044272275985,"zero":0},
{"x":210,"trend":4.537352697002901,"cycle":-0.00614126353310451,"orig":4.531211433469797,"zero":0},
{"x":211,"trend":4.540330223279201,"cycle":-0.0016749101257375032,"orig":4.5386553131534635,"zero":0},
{"x":212,"trend":4.54344789440589,"cycle":-0.004121614533058506,"orig":4.5393262798728315,"zero":0},
{"x":213,"trend":4.546681681535906,"cycle":-0.00608521730492043,"orig":4.540596464230986,"zero":0},
{"x":214,"trend":4.549988065175783,"cycle":-0.0008962882075635144,"orig":4.549091776968219,"zero":0},
{"x":215,"trend":4.553296527640961,"cycle":-0.001724395221746932,"orig":4.5515721324192135,"zero":0},
{"x":216,"trend":4.556533460364218,"cycle":0.0029749130559310736,"orig":4.559508373420149,"zero":0},
{"x":217,"trend":4.559619762819805,"cycle":0.003478689716213959,"orig":4.563098452536019,"zero":0},
{"x":218,"trend":4.562492526923065,"cycle":0.007838771675725635,"orig":4.5703312985987905,"zero":0},
{"x":219,"trend":4.565108143497864,"cycle":0.0038709753213095038,"orig":4.568979118819173,"zero":0},
{"x":220,"trend":4.567461959271229,"cycle":0.0036673549917656356,"orig":4.571129314262995,"zero":0},
{"x":221,"trend":4.569571112408141,"cycle":0.002457922381706217,"orig":4.572029034789847,"zero":0},
{"x":222,"trend":4.571473451561219,"cycle":0.005043112386092143,"orig":4.576516563947311,"zero":0},
{"x":223,"trend":4.573221707980842,"cycle":0.00012338967825169695,"orig":4.573345097659094,"zero":0},
{"x":224,"trend":4.574893994933323,"cycle":0.001704891072333065,"orig":4.576598886005656,"zero":0},
{"x":225,"trend":4.576571294917759,"cycle":-0.01953623768164897,"orig":4.55703505723611,"zero":0},
{"x":226,"trend":4.578343351484177,"cycle":-0.009243964840856739,"orig":4.5690993866433205,"zero":0},
{"x":227,"trend":4.580214816402303,"cycle":6.208686251277372e-5,"orig":4.580276903264815,"zero":0},
{"x":228,"trend":4.582149617063885,"cycle":0.0032789797651625163,"orig":4.585428596829047,"zero":0},
{"x":229,"trend":4.584111267530669,"cycle":0.0028939294992941255,"orig":4.587005197029963,"zero":0},
{"x":230,"trend":4.5860767179980915,"cycle":0.001349979212209165,"orig":4.587426697210301,"zero":0},
{"x":231,"trend":4.5880345437569305,"cycle":0.0016442681131160885,"orig":4.589678811870047,"zero":0},
{"x":232,"trend":4.589978107142005,"cycle":0.002732783171312534,"orig":4.592710890313318,"zero":0},
{"x":233,"trend":4.591906772612714,"cycle":0.0010582322570147063,"orig":4.592965004869729,"zero":0},
{"x":234,"trend":4.593830584912086,"cycle":0.002295829174067109,"orig":4.596126414086154,"zero":0},
{"x":235,"trend":4.595762836937839,"cycle":-0.00014916935721708384,"orig":4.595613667580622,"zero":0},
{"x":236,"trend":4.597725367387161,"cycle":0.0022674390717950907,"orig":4.599992806458956,"zero":0},
{"x":237,"trend":4.599737754619538,"cycle":-0.00140791051752103,"orig":4.598329844102016,"zero":0},
{"x":238,"trend":4.6018278236065315,"cycle":-0.004645455460641545,"orig":4.59718236814589,"zero":0},
{"x":239,"trend":4.6040155775178775,"cycle":-0.007253642000324063,"orig":4.596761935517553,"zero":0},
{"x":240,"trend":4.606299172248995,"cycle":0.0006045103652468322,"orig":4.606903682614242,"zero":0},
{"x":241,"trend":4.608643809603852,"cycle":-0.005128992983926032,"orig":4.603514816619926,"zero":0},
{"x":242,"trend":4.61101658424603,"cycle":0.0018767016815712562,"orig":4.6128932859276,"zero":0},
{"x":243,"trend":4.613361968576926,"cycle":0.0013099327999779244,"orig":4.614671901376903,"zero":0},
{"x":244,"trend":4.615633075394277,"cycle":0.0057391458843785055,"orig":4.621372221278656,"zero":0},
{"x":245,"trend":4.617789735185885,"cycle":0.004538407567581291,"orig":4.622328142753466,"zero":0},
{"x":246,"trend":4.619818291452083,"cycle":0.0030866990850907175,"orig":4.622904990537174,"zero":0},
{"x":247,"trend":4.621726553998169,"cycle":-2.1820170987505165e-5,"orig":4.6217047338271815,"zero":0},
{"x":248,"trend":4.623537420316895,"cycle":9.135289513561429e-5,"orig":4.6236287732120305,"zero":0},
{"x":249,"trend":4.625275030584281,"cycle":0.0005738694121675661,"orig":4.625848899996448,"zero":0},
{"x":250,"trend":4.6269648428166885,"cycle":-0.003940004034754649,"orig":4.623024838781934,"zero":0},
{"x":251,"trend":4.628635193489389,"cycle":-0.00028964291074126854,"orig":4.628345550578648,"zero":0},
{"x":252,"trend":4.630296914548161,"cycle":-0.001602603263200204,"orig":4.628694311284961,"zero":0}];
    const series = [{"name":"Cycle","color":"#2ca02c","key":"cycle","dash":""}];
    const bands = [];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#filt_cy_70');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Cycle') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Cycle');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

</script>
</body>
</html>