<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Boosted HP Filter (BIC, 7 iter)</title>
<style>* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #fff;
    color: #333;
    padding: 20px;
}
.figure-title {
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 16px;
    color: #222;
}
.figure-source {
    font-size: 11px;
    color: #888;
    text-align: center;
    margin-top: 8px;
}
.panel-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
}
.panel {
    width: calc(100% - 16px);
    min-width: 300px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 12px;
}
.panel-title {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 8px;
    color: #444;
}
.axis text { font-size: 11px; fill: #666; }
.axis line, .axis path { stroke: #ccc; }
.grid line { stroke: #f0f0f0; stroke-dasharray: 2,2; }
.grid .domain { stroke: none; }
.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    z-index: 1000;
}
.legend { font-size: 11px; }
.legend rect { rx: 2; }
svg { overflow: visible; }
</style>
</head>
<body>
<div class="figure-title">Boosted HP Filter (BIC, 7 iter)</div>
<div class="panel-grid">
<div class="panel">
<div class="panel-title">Trend-Cycle Decomposition</div>
<div id="filt_tc_69"></div>
</div>
<div class="panel">
<div class="panel-title">Cyclical Component</div>
<div id="filt_cy_70"></div>
</div>
</div>

<div class="tooltip" id="tooltip"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script>
// Shared utilities
const tooltip = d3.select('#tooltip');
function fmt(v) {
    if (v === null || v === undefined) return '';
    return Math.abs(v) >= 1000 ? v.toFixed(1) : (Math.abs(v) >= 1 ? v.toFixed(3) : v.toFixed(4));
}
function showTip(evt, html) {
    tooltip.html(html).style('opacity',1)
        .style('left',(evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px');
}
function hideTip() { tooltip.style('opacity',0); }

(function() {
    const data = [{"x":1,"trend":0.3221429568736208,"cycle":0.21427427378246103,"orig":0.5364172306560818,"zero":0},
{"x":2,"trend":-0.17551200848137416,"cycle":-1.3804523318326503,"orig":-1.5559643403140244,"zero":0},
{"x":3,"trend":-0.6693272816202571,"cycle":-0.6684942367217588,"orig":-1.337821518342016,"zero":0},
{"x":4,"trend":-1.159115729516186,"cycle":0.3961197383310031,"orig":-0.7629959911851829,"zero":0},
{"x":5,"trend":-1.6457394478198448,"cycle":0.02544792227988838,"orig":-1.6202915255399564,"zero":0},
{"x":6,"trend":-2.1269654668082847,"cycle":0.8865409332740299,"orig":-1.2404245335342547,"zero":0},
{"x":7,"trend":-2.5996125496515043,"cycle":1.7635453184667491,"orig":-0.8360672311847552,"zero":0},
{"x":8,"trend":-3.05632621882922,"cycle":3.0676856596242636,"orig":0.011359440795043696,"zero":0},
{"x":9,"trend":-3.4823059177118174,"cycle":1.2196535533572281,"orig":-2.2626523643545893,"zero":0},
{"x":10,"trend":-3.850182131549988,"cycle":-0.8032775513138296,"orig":-4.653459682863818,"zero":0},
{"x":11,"trend":-4.128685480763209,"cycle":-0.42951037046142376,"orig":-4.5581958512246326,"zero":0},
{"x":12,"trend":-4.292040116692084,"cycle":-2.562307224201756,"orig":-6.85434734089384,"zero":0},
{"x":13,"trend":-4.318779582130246,"cycle":-2.4655141773370906,"orig":-6.784293759467337,"zero":0},
{"x":14,"trend":-4.201393861430406,"cycle":-1.290700210605698,"orig":-5.492094072036103,"zero":0},
{"x":15,"trend":-3.9460492747024616,"cycle":-2.0342315734853043,"orig":-5.980280848187766,"zero":0},
{"x":16,"trend":-3.567404809128511,"cycle":-0.8995319133782843,"orig":-4.466936722506795,"zero":0},
{"x":17,"trend":-3.0916419556458035,"cycle":-0.09246586939134316,"orig":-3.1841078250371466,"zero":0},
{"x":18,"trend":-2.5511188119683093,"cycle":1.159899373986351,"orig":-1.3912194379819582,"zero":0},
{"x":19,"trend":-1.9803386181495624,"cycle":1.1728383470374575,"orig":-0.8075002711121049,"zero":0},
{"x":20,"trend":-1.4098997427841056,"cycle":1.414965103529921,"orig":0.005065360745815539,"zero":0},
{"x":21,"trend":-0.8658484370889767,"cycle":2.111767125352105,"orig":1.2459186882631283,"zero":0},
{"x":22,"trend":-0.36805110582316025,"cycle":0.6911955988990628,"orig":0.32314449307590254,"zero":0},
{"x":23,"trend":0.07336777453634946,"cycle":-0.36036651426704525,"orig":-0.2869987397306958,"zero":0},
{"x":24,"trend":0.45224847154643827,"cycle":0.3977655807526718,"orig":0.8500140522991101,"zero":0},
{"x":25,"trend":0.7621544025167724,"cycle":0.3131035443346873,"orig":1.0752579468514596,"zero":0},
{"x":26,"trend":0.9999725477048071,"cycle":0.22760624091079523,"orig":1.2275787886156024,"zero":0},
{"x":27,"trend":1.1657527524121243,"cycle":-0.06119806483788375,"orig":1.1045546875742405,"zero":0},
{"x":28,"trend":1.262475484596775,"cycle":-1.0930263512911453,"orig":0.1694491333056296,"zero":0},
{"x":29,"trend":1.294872115803679,"cycle":-0.8201654881421917,"orig":0.4747066276614872,"zero":0},
{"x":30,"trend":1.264949577496763,"cycle":-1.0806032948553927,"orig":0.1843462826413702,"zero":0},
{"x":31,"trend":1.1731921241832932,"cycle":-0.8384561732794993,"orig":0.33473595090379393,"zero":0},
{"x":32,"trend":1.0174053878077722,"cycle":-0.8490336399002607,"orig":0.16837174790751153,"zero":0},
{"x":33,"trend":0.793735707803363,"cycle":0.2676341119262612,"orig":1.0613698197296242,"zero":0},
{"x":34,"trend":0.4965537072133117,"cycle":0.5971481191345884,"orig":1.0937018263479001,"zero":0},
{"x":35,"trend":0.12322735591677536,"cycle":1.3378191397453454,"orig":1.4610464956621207,"zero":0},
{"x":36,"trend":-0.32460878935912874,"cycle":2.2591595205303356,"orig":1.934550731171207,"zero":0},
{"x":37,"trend":-0.838059946420265,"cycle":0.5712424696973619,"orig":-0.2668174767229031,"zero":0},
{"x":38,"trend":-1.3972697975996284,"cycle":0.3102657741767369,"orig":-1.0870040234228915,"zero":0},
{"x":39,"trend":-1.9792138071363252,"cycle":-0.24931363230322284,"orig":-2.228527439439548,"zero":0},
{"x":40,"trend":-2.559305853532387,"cycle":0.11988515360845722,"orig":-2.43942069992393,"zero":0},
{"x":41,"trend":-3.114339298747817,"cycle":-0.007428266419211391,"orig":-3.1217675651670285,"zero":0},
{"x":42,"trend":-3.621361872776633,"cycle":-0.8233328594509168,"orig":-4.44469473222755,"zero":0},
{"x":43,"trend":-4.058691446317718,"cycle":-2.212856522085585,"orig":-6.271547968403303,"zero":0},
{"x":44,"trend":-4.409884061198157,"cycle":-1.8702038408271797,"orig":-6.280087902025336,"zero":0},
{"x":45,"trend":-4.670123224837174,"cycle":-0.3427650286381186,"orig":-5.0128882534752925,"zero":0},
{"x":46,"trend":-4.84492259452439,"cycle":0.36716400884574835,"orig":-4.477758585678642,"zero":0},
{"x":47,"trend":-4.943536452253385,"cycle":1.0340468187166993,"orig":-3.9094896335366855,"zero":0},
{"x":48,"trend":-4.975854485231623,"cycle":1.2081467801404262,"orig":-3.7677077050911967,"zero":0},
{"x":49,"trend":-4.9494134708683575,"cycle":0.6543390373023985,"orig":-4.295074433565959,"zero":0},
{"x":50,"trend":-4.868512885567564,"cycle":0.48535642212050334,"orig":-4.383156463447061,"zero":0},
{"x":51,"trend":-4.736475517305242,"cycle":-0.8316741138765292,"orig":-5.568149631181771,"zero":0},
{"x":52,"trend":-4.556188727412266,"cycle":-0.2917477710266889,"orig":-4.847936498438955,"zero":0},
{"x":53,"trend":-4.335632385540589,"cycle":0.32275612437521456,"orig":-4.012876261165375,"zero":0},
{"x":54,"trend":-4.085243377956647,"cycle":0.27478273615206505,"orig":-3.8104606418045814,"zero":0},
{"x":55,"trend":-3.814919126284871,"cycle":-1.2479167004040848,"orig":-5.062835826688956,"zero":0},
{"x":56,"trend":-3.5338923744507724,"cycle":0.4222611319308306,"orig":-3.111631242519942,"zero":0},
{"x":57,"trend":-3.2570363407407648,"cycle":-1.0503244179871674,"orig":-4.307360758727932,"zero":0},
{"x":58,"trend":-2.997183012190679,"cycle":-0.25439462269539787,"orig":-3.2515776348860768,"zero":0},
{"x":59,"trend":-2.771186833059428,"cycle":-0.2363160867559588,"orig":-3.0075029198153866,"zero":0},
{"x":60,"trend":-2.5960695901879314,"cycle":1.444529160401221,"orig":-1.1515404297867105,"zero":0},
{"x":61,"trend":-2.488592635108853,"cycle":-0.4126270143620436,"orig":-2.901219649470897,"zero":0},
{"x":62,"trend":-2.457598370656304,"cycle":0.5714719894007415,"orig":-1.8861263812555622,"zero":0},
{"x":63,"trend":-2.511894942159038,"cycle":0.5094934279817025,"orig":-2.0024015141773357,"zero":0},
{"x":64,"trend":-2.6557824082047587,"cycle":-0.2059192278891661,"orig":-2.8617016360939247,"zero":0},
{"x":65,"trend":-2.8892370056226957,"cycle":0.27993841938364683,"orig":-2.6092985862390488,"zero":0},
{"x":66,"trend":-3.21103905558761,"cycle":1.2061929304259684,"orig":-2.0048461251616416,"zero":0},
{"x":67,"trend":-3.616727831547636,"cycle":0.5591041353736043,"orig":-3.0576236961740317,"zero":0},
{"x":68,"trend":-4.094710042137064,"cycle":-0.5922557551039996,"orig":-4.686965797241063,"zero":0},
{"x":69,"trend":-4.629326152628075,"cycle":-1.7302286161929799,"orig":-6.359554768821055,"zero":0},
{"x":70,"trend":-5.206180291685973,"cycle":-1.2011618136778837,"orig":-6.407342105363856,"zero":0},
{"x":71,"trend":-5.817446267274255,"cycle":1.5552514056093059,"orig":-4.262194861664948,"zero":0},
{"x":72,"trend":-6.459896271869338,"cycle":0.7855200625010887,"orig":-5.6743762093682495,"zero":0},
{"x":73,"trend":-7.123195880869912,"cycle":0.830731364590695,"orig":-6.292464516279217,"zero":0},
{"x":74,"trend":-7.793641381804126,"cycle":0.8850548779167077,"orig":-6.908586503887419,"zero":0},
{"x":75,"trend":-8.45433892605294,"cycle":-0.16676780005797304,"orig":-8.621106726110913,"zero":0},
{"x":76,"trend":-9.085336595104026,"cycle":-0.5080390575459581,"orig":-9.593375652649984,"zero":0},
{"x":77,"trend":-9.668567979802123,"cycle":-0.9731161818767329,"orig":-10.641684161678857,"zero":0},
{"x":78,"trend":-10.18963216654932,"cycle":-0.6818054791741716,"orig":-10.871437645723491,"zero":0},
{"x":79,"trend":-10.640035887561583,"cycle":-0.8467755842140294,"orig":-11.486811471775612,"zero":0},
{"x":80,"trend":-11.016027947805103,"cycle":-1.2865121811344762,"orig":-12.30254012893958,"zero":0},
{"x":81,"trend":-11.319321792470307,"cycle":-1.2590423324509623,"orig":-12.578364124921269,"zero":0},
{"x":82,"trend":-11.55890967551935,"cycle":-0.6712395835615319,"orig":-12.230149259080882,"zero":0},
{"x":83,"trend":-11.750728343885207,"cycle":-0.42954232653418095,"orig":-12.180270670419388,"zero":0},
{"x":84,"trend":-11.914786782955593,"cycle":1.802453459952486,"orig":-10.112333323003106,"zero":0},
{"x":85,"trend":-12.07375113324484,"cycle":1.5749580396664578,"orig":-10.498793093578383,"zero":0},
{"x":86,"trend":-12.242800787980508,"cycle":0.9648894316738023,"orig":-11.277911356306706,"zero":0},
{"x":87,"trend":-12.43026327333813,"cycle":-0.07516249081099033,"orig":-12.505425764149122,"zero":0},
{"x":88,"trend":-12.639966480890525,"cycle":-0.020443447162961037,"orig":-12.660409928053486,"zero":0},
{"x":89,"trend":-12.875527593960117,"cycle":0.31033054736023297,"orig":-12.565197046599884,"zero":0},
{"x":90,"trend":-13.139911377717242,"cycle":-0.5012197911146388,"orig":-13.641131168831881,"zero":0},
{"x":91,"trend":-13.433843031448697,"cycle":0.45246519336930785,"orig":-12.98137783807939,"zero":0},
{"x":92,"trend":-13.759283554134747,"cycle":0.5767245075374627,"orig":-13.182559046597284,"zero":0},
{"x":93,"trend":-14.115245996219596,"cycle":0.6688006625537786,"orig":-13.446445333665817,"zero":0},
{"x":94,"trend":-14.497306204147238,"cycle":0.30860226904488536,"orig":-14.188703935102353,"zero":0},
{"x":95,"trend":-14.89731730022591,"cycle":-0.10840209544374181,"orig":-15.00571939566965,"zero":0},
{"x":96,"trend":-15.305157252944554,"cycle":-1.0999766169378262,"orig":-16.40513386988238,"zero":0},
{"x":97,"trend":-15.710764482096728,"cycle":-0.09009613889467574,"orig":-15.800860620991404,"zero":0},
{"x":98,"trend":-16.108708649646694,"cycle":0.36622437326868035,"orig":-15.742484276378013,"zero":0},
{"x":99,"trend":-16.49400892412448,"cycle":1.9269104880949348,"orig":-14.567098436029545,"zero":0},
{"x":100,"trend":-16.86036915628519,"cycle":-0.3850905855640514,"orig":-17.245459741849242,"zero":0},
{"x":101,"trend":-17.19356860605021,"cycle":-0.860445474813623,"orig":-18.054014080863833,"zero":0},
{"x":102,"trend":-17.481772210592922,"cycle":-0.9076168461663883,"orig":-18.38938905675931,"zero":0},
{"x":103,"trend":-17.71775619333569,"cycle":-1.5619287842271252,"orig":-19.279684977562813,"zero":0},
{"x":104,"trend":-17.89918909535654,"cycle":-1.2160223457195676,"orig":-19.11521144107611,"zero":0},
{"x":105,"trend":-18.031483812517905,"cycle":-0.546277441297538,"orig":-18.577761253815442,"zero":0},
{"x":106,"trend":-18.126182941379042,"cycle":0.9060725300749018,"orig":-17.22011041130414,"zero":0},
{"x":107,"trend":-18.197844921670786,"cycle":-0.9746657475491183,"orig":-19.172510669219903,"zero":0},
{"x":108,"trend":-18.25744309658469,"cycle":-0.4970283379129917,"orig":-18.75447143449768,"zero":0},
{"x":109,"trend":-18.320308305393883,"cycle":0.6161517697247332,"orig":-17.70415653566915,"zero":0},
{"x":110,"trend":-18.403732387843398,"cycle":1.51175489264984,"orig":-16.891977495193558,"zero":0},
{"x":111,"trend":-18.521795754265014,"cycle":1.2262860784186698,"orig":-17.295509675846343,"zero":0},
{"x":112,"trend":-18.681181182448093,"cycle":0.15790530629474167,"orig":-18.523275876153352,"zero":0},
{"x":113,"trend":-18.882213461840717,"cycle":-0.16686523417396798,"orig":-19.049078696014686,"zero":0},
{"x":114,"trend":-19.123394213366844,"cycle":-0.4657815547334002,"orig":-19.589175768100244,"zero":0},
{"x":115,"trend":-19.40275369986467,"cycle":0.13697146129397683,"orig":-19.265782238570694,"zero":0},
{"x":116,"trend":-19.719157841667485,"cycle":0.6643753378777567,"orig":-19.054782503789728,"zero":0},
{"x":117,"trend":-20.06973703670822,"cycle":0.3633787891244449,"orig":-19.706358247583772,"zero":0},
{"x":118,"trend":-20.44771221704608,"cycle":-0.29093020777338796,"orig":-20.73864242481947,"zero":0},
{"x":119,"trend":-20.843911494837684,"cycle":0.755192205515661,"orig":-20.08871928932202,"zero":0},
{"x":120,"trend":-21.249891192665,"cycle":-0.09863177803592775,"orig":-21.348522970700927,"zero":0},
{"x":121,"trend":-21.653664617424816,"cycle":1.2100024562479943,"orig":-20.44366216117682,"zero":0},
{"x":122,"trend":-22.043780491276465,"cycle":0.45134272954091115,"orig":-21.592437761735553,"zero":0},
{"x":123,"trend":-22.403961738995687,"cycle":0.5379382566647021,"orig":-21.866023482330984,"zero":0},
{"x":124,"trend":-22.716794288284696,"cycle":-0.5521680934319568,"orig":-23.26896238171665,"zero":0},
{"x":125,"trend":-22.963698341041727,"cycle":-0.5706294539751758,"orig":-23.534327795016903,"zero":0},
{"x":126,"trend":-23.12999997783251,"cycle":-1.3709280994985538,"orig":-24.500928077331064,"zero":0},
{"x":127,"trend":-23.205234940000796,"cycle":-0.9774272671768867,"orig":-24.182662207177682,"zero":0},
{"x":128,"trend":-23.18676773505812,"cycle":-1.0907819970874326,"orig":-24.277549732145552,"zero":0},
{"x":129,"trend":-23.078062988889926,"cycle":-1.464043373101445,"orig":-24.542106361991372,"zero":0},
{"x":130,"trend":-22.889042610450957,"cycle":-1.5958541742178445,"orig":-24.484896784668802,"zero":0},
{"x":131,"trend":-22.63745121483098,"cycle":-0.9227987044031825,"orig":-23.56024991923416,"zero":0},
{"x":132,"trend":-22.349049677076348,"cycle":0.2905193827892457,"orig":-22.058530294287102,"zero":0},
{"x":133,"trend":-22.0541984707367,"cycle":1.1634762605949782,"orig":-20.89072221014172,"zero":0},
{"x":134,"trend":-21.782029050205118,"cycle":1.3365091595662397,"orig":-20.445519890638877,"zero":0},
{"x":135,"trend":-21.556104689496774,"cycle":1.3929384529869104,"orig":-20.163166236509863,"zero":0},
{"x":136,"trend":-21.39319017992544,"cycle":0.3685426053990165,"orig":-21.024647574526423,"zero":0},
{"x":137,"trend":-21.30261466706084,"cycle":1.0707929881241287,"orig":-20.23182167893671,"zero":0},
{"x":138,"trend":-21.290470542274118,"cycle":0.1369833473568316,"orig":-21.153487194917286,"zero":0},
{"x":139,"trend":-21.356377471598414,"cycle":0.9235926646120864,"orig":-20.432784806986326,"zero":0},
{"x":140,"trend":-21.497530650328727,"cycle":1.0304190173768237,"orig":-20.467111632951905,"zero":0},
{"x":141,"trend":-21.705345519717742,"cycle":1.0733154400264775,"orig":-20.632030079691265,"zero":0},
{"x":142,"trend":-21.965193890090124,"cycle":0.5145689363489787,"orig":-21.450624953741144,"zero":0},
{"x":143,"trend":-22.25652205232037,"cycle":-0.4593687578341447,"orig":-22.715890810154516,"zero":0},
{"x":144,"trend":-22.555678524580898,"cycle":-0.9073937714071285,"orig":-23.463072295988027,"zero":0},
{"x":145,"trend":-22.840601029364898,"cycle":-1.151426016653319,"orig":-23.992027046018215,"zero":0},
{"x":146,"trend":-23.093205822937566,"cycle":-0.15012793720997794,"orig":-23.243333760147543,"zero":0},
{"x":147,"trend":-23.30085176266982,"cycle":-0.7862296792666085,"orig":-24.087081441936427,"zero":0},
{"x":148,"trend":-23.452294868204877,"cycle":-0.37645940676804446,"orig":-23.828754274972923,"zero":0},
{"x":149,"trend":-23.540726927534138,"cycle":-0.6829292565402769,"orig":-24.223656184074414,"zero":0},
{"x":150,"trend":-23.562142536244373,"cycle":-1.4497207073485234,"orig":-25.011863243592895,"zero":0},
{"x":151,"trend":-23.516735056211665,"cycle":-1.993506279030519,"orig":-25.510241335242185,"zero":0},
{"x":152,"trend":-23.412197410278132,"cycle":-1.2740870903887587,"orig":-24.68628450066689,"zero":0},
{"x":153,"trend":-23.265940571964116,"cycle":0.37935582898668935,"orig":-22.886584742977426,"zero":0},
{"x":154,"trend":-23.101694363883578,"cycle":0.7206412311127418,"orig":-22.381053132770838,"zero":0},
{"x":155,"trend":-22.941963558285813,"cycle":1.198925951610489,"orig":-21.743037606675323,"zero":0},
{"x":156,"trend":-22.80621031581273,"cycle":1.8440231359428387,"orig":-20.962187179869893,"zero":0},
{"x":157,"trend":-22.70846416750232,"cycle":2.2850236502279047,"orig":-20.423440517274415,"zero":0},
{"x":158,"trend":-22.65426450596456,"cycle":1.9621771369534744,"orig":-20.692087369011084,"zero":0},
{"x":159,"trend":-22.63858361014085,"cycle":0.08015171913890973,"orig":-22.558431891001938,"zero":0},
{"x":160,"trend":-22.64718877137244,"cycle":-0.337306604202744,"orig":-22.984495375575186,"zero":0},
{"x":161,"trend":-22.66491335111073,"cycle":-1.0913386961711125,"orig":-23.756252047281844,"zero":0},
{"x":162,"trend":-22.677581325762123,"cycle":-0.794501376051995,"orig":-23.472082701814116,"zero":0},
{"x":163,"trend":-22.675437422779407,"cycle":-0.180722264587755,"orig":-22.85615968736716,"zero":0},
{"x":164,"trend":-22.651987091386204,"cycle":-1.4346202249396658,"orig":-24.086607316325868,"zero":0},
{"x":165,"trend":-22.601440062907802,"cycle":-1.460642220777584,"orig":-24.062082283685385,"zero":0},
{"x":166,"trend":-22.524304250077783,"cycle":-1.006240871789156,"orig":-23.53054512186694,"zero":0},
{"x":167,"trend":-22.42757729767545,"cycle":1.821021298365587,"orig":-20.606555999309865,"zero":0},
{"x":168,"trend":-22.322807955170855,"cycle":1.8931615968985287,"orig":-20.429646358272326,"zero":0},
{"x":169,"trend":-22.213761920953143,"cycle":0.8897009173707652,"orig":-21.32406100358238,"zero":0},
{"x":170,"trend":-22.09614946361621,"cycle":-0.12051312230186256,"orig":-22.216662585918073,"zero":0},
{"x":171,"trend":-21.96207445620339,"cycle":-0.5037469151116072,"orig":-22.465821371314995,"zero":0},
{"x":172,"trend":-21.80452076512642,"cycle":0.16994709580919437,"orig":-21.634573669317223,"zero":0},
{"x":173,"trend":-21.61908846274531,"cycle":-1.3493968484198178,"orig":-22.96848531116513,"zero":0},
{"x":174,"trend":-21.40108515920481,"cycle":-0.39529641180676683,"orig":-21.79638157101158,"zero":0},
{"x":175,"trend":-21.152181843714352,"cycle":-0.029258993267479765,"orig":-21.18144083698183,"zero":0},
{"x":176,"trend":-20.87620716107426,"cycle":-0.30956879235192375,"orig":-21.185775953426184,"zero":0},
{"x":177,"trend":-20.577475483835805,"cycle":-0.748861716001155,"orig":-21.32633719983696,"zero":0},
{"x":178,"trend":-20.261908672641233,"cycle":-0.4010694756906501,"orig":-20.662978148331884,"zero":0},
{"x":179,"trend":-19.938824779396764,"cycle":-0.25089433144603585,"orig":-20.189719110842802,"zero":0},
{"x":180,"trend":-19.619262898434076,"cycle":0.6960689628289355,"orig":-18.92319393560514,"zero":0},
{"x":181,"trend":-19.3151667566348,"cycle":0.7755226533805524,"orig":-18.539644103254247,"zero":0},
{"x":182,"trend":-19.03509430856226,"cycle":0.8284398077443902,"orig":-18.20665450081787,"zero":0},
{"x":183,"trend":-18.78375431876332,"cycle":0.12562901381021474,"orig":-18.658125304953106,"zero":0},
{"x":184,"trend":-18.561704338956552,"cycle":1.2615729756442535,"orig":-17.3001313633123,"zero":0},
{"x":185,"trend":-18.368407184731296,"cycle":0.28830129684793054,"orig":-18.080105887883366,"zero":0},
{"x":186,"trend":-18.197294673378742,"cycle":1.1177169945837981,"orig":-17.079577678794944,"zero":0},
{"x":187,"trend":-18.040109102430826,"cycle":-0.7402029590132467,"orig":-18.78031206144407,"zero":0},
{"x":188,"trend":-17.883395209303913,"cycle":-1.2528080160106811,"orig":-19.136203225314595,"zero":0},
{"x":189,"trend":-17.716771057986954,"cycle":0.08703687630223422,"orig":-17.629734181684718,"zero":0},
{"x":190,"trend":-17.535310200914605,"cycle":-0.9621971102024122,"orig":-18.497507311117015,"zero":0},
{"x":191,"trend":-17.333797578028552,"cycle":-0.12790788598761124,"orig":-17.461705464016163,"zero":0},
{"x":192,"trend":-17.111407346366555,"cycle":-1.457636503963588,"orig":-18.569043850330143,"zero":0},
{"x":193,"trend":-16.86810096057455,"cycle":-1.0437613959574927,"orig":-17.911862356532044,"zero":0},
{"x":194,"trend":-16.610452588942064,"cycle":0.3355985833603702,"orig":-16.274854005581695,"zero":0},
{"x":195,"trend":-16.349806446748328,"cycle":1.726688189486126,"orig":-14.623118257262202,"zero":0},
{"x":196,"trend":-16.09618298191398,"cycle":1.3088905462935305,"orig":-14.787292435620449,"zero":0},
{"x":197,"trend":-15.852128056750658,"cycle":0.6164486024870026,"orig":-15.235679454263655,"zero":0},
{"x":198,"trend":-15.614489201469814,"cycle":-0.8743909503723668,"orig":-16.48888015184218,"zero":0},
{"x":199,"trend":-15.377411426357812,"cycle":-0.822799683475574,"orig":-16.200211109833386,"zero":0},
{"x":200,"trend":-15.138838099399031,"cycle":0.32565361289538713,"orig":-14.813184486503644,"zero":0}];
    const series = [{"name":"Original","color":"#1f77b4","key":"orig","dash":""},{"name":"Trend","color":"#ff7f0e","key":"trend","dash":"6,3"}];
    const bands = [];
    const refLines = [];

    const container = d3.select('#filt_tc_69');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Value') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Value');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":1,"trend":0.3221429568736208,"cycle":0.21427427378246103,"orig":0.5364172306560818,"zero":0},
{"x":2,"trend":-0.17551200848137416,"cycle":-1.3804523318326503,"orig":-1.5559643403140244,"zero":0},
{"x":3,"trend":-0.6693272816202571,"cycle":-0.6684942367217588,"orig":-1.337821518342016,"zero":0},
{"x":4,"trend":-1.159115729516186,"cycle":0.3961197383310031,"orig":-0.7629959911851829,"zero":0},
{"x":5,"trend":-1.6457394478198448,"cycle":0.02544792227988838,"orig":-1.6202915255399564,"zero":0},
{"x":6,"trend":-2.1269654668082847,"cycle":0.8865409332740299,"orig":-1.2404245335342547,"zero":0},
{"x":7,"trend":-2.5996125496515043,"cycle":1.7635453184667491,"orig":-0.8360672311847552,"zero":0},
{"x":8,"trend":-3.05632621882922,"cycle":3.0676856596242636,"orig":0.011359440795043696,"zero":0},
{"x":9,"trend":-3.4823059177118174,"cycle":1.2196535533572281,"orig":-2.2626523643545893,"zero":0},
{"x":10,"trend":-3.850182131549988,"cycle":-0.8032775513138296,"orig":-4.653459682863818,"zero":0},
{"x":11,"trend":-4.128685480763209,"cycle":-0.42951037046142376,"orig":-4.5581958512246326,"zero":0},
{"x":12,"trend":-4.292040116692084,"cycle":-2.562307224201756,"orig":-6.85434734089384,"zero":0},
{"x":13,"trend":-4.318779582130246,"cycle":-2.4655141773370906,"orig":-6.784293759467337,"zero":0},
{"x":14,"trend":-4.201393861430406,"cycle":-1.290700210605698,"orig":-5.492094072036103,"zero":0},
{"x":15,"trend":-3.9460492747024616,"cycle":-2.0342315734853043,"orig":-5.980280848187766,"zero":0},
{"x":16,"trend":-3.567404809128511,"cycle":-0.8995319133782843,"orig":-4.466936722506795,"zero":0},
{"x":17,"trend":-3.0916419556458035,"cycle":-0.09246586939134316,"orig":-3.1841078250371466,"zero":0},
{"x":18,"trend":-2.5511188119683093,"cycle":1.159899373986351,"orig":-1.3912194379819582,"zero":0},
{"x":19,"trend":-1.9803386181495624,"cycle":1.1728383470374575,"orig":-0.8075002711121049,"zero":0},
{"x":20,"trend":-1.4098997427841056,"cycle":1.414965103529921,"orig":0.005065360745815539,"zero":0},
{"x":21,"trend":-0.8658484370889767,"cycle":2.111767125352105,"orig":1.2459186882631283,"zero":0},
{"x":22,"trend":-0.36805110582316025,"cycle":0.6911955988990628,"orig":0.32314449307590254,"zero":0},
{"x":23,"trend":0.07336777453634946,"cycle":-0.36036651426704525,"orig":-0.2869987397306958,"zero":0},
{"x":24,"trend":0.45224847154643827,"cycle":0.3977655807526718,"orig":0.8500140522991101,"zero":0},
{"x":25,"trend":0.7621544025167724,"cycle":0.3131035443346873,"orig":1.0752579468514596,"zero":0},
{"x":26,"trend":0.9999725477048071,"cycle":0.22760624091079523,"orig":1.2275787886156024,"zero":0},
{"x":27,"trend":1.1657527524121243,"cycle":-0.06119806483788375,"orig":1.1045546875742405,"zero":0},
{"x":28,"trend":1.262475484596775,"cycle":-1.0930263512911453,"orig":0.1694491333056296,"zero":0},
{"x":29,"trend":1.294872115803679,"cycle":-0.8201654881421917,"orig":0.4747066276614872,"zero":0},
{"x":30,"trend":1.264949577496763,"cycle":-1.0806032948553927,"orig":0.1843462826413702,"zero":0},
{"x":31,"trend":1.1731921241832932,"cycle":-0.8384561732794993,"orig":0.33473595090379393,"zero":0},
{"x":32,"trend":1.0174053878077722,"cycle":-0.8490336399002607,"orig":0.16837174790751153,"zero":0},
{"x":33,"trend":0.793735707803363,"cycle":0.2676341119262612,"orig":1.0613698197296242,"zero":0},
{"x":34,"trend":0.4965537072133117,"cycle":0.5971481191345884,"orig":1.0937018263479001,"zero":0},
{"x":35,"trend":0.12322735591677536,"cycle":1.3378191397453454,"orig":1.4610464956621207,"zero":0},
{"x":36,"trend":-0.32460878935912874,"cycle":2.2591595205303356,"orig":1.934550731171207,"zero":0},
{"x":37,"trend":-0.838059946420265,"cycle":0.5712424696973619,"orig":-0.2668174767229031,"zero":0},
{"x":38,"trend":-1.3972697975996284,"cycle":0.3102657741767369,"orig":-1.0870040234228915,"zero":0},
{"x":39,"trend":-1.9792138071363252,"cycle":-0.24931363230322284,"orig":-2.228527439439548,"zero":0},
{"x":40,"trend":-2.559305853532387,"cycle":0.11988515360845722,"orig":-2.43942069992393,"zero":0},
{"x":41,"trend":-3.114339298747817,"cycle":-0.007428266419211391,"orig":-3.1217675651670285,"zero":0},
{"x":42,"trend":-3.621361872776633,"cycle":-0.8233328594509168,"orig":-4.44469473222755,"zero":0},
{"x":43,"trend":-4.058691446317718,"cycle":-2.212856522085585,"orig":-6.271547968403303,"zero":0},
{"x":44,"trend":-4.409884061198157,"cycle":-1.8702038408271797,"orig":-6.280087902025336,"zero":0},
{"x":45,"trend":-4.670123224837174,"cycle":-0.3427650286381186,"orig":-5.0128882534752925,"zero":0},
{"x":46,"trend":-4.84492259452439,"cycle":0.36716400884574835,"orig":-4.477758585678642,"zero":0},
{"x":47,"trend":-4.943536452253385,"cycle":1.0340468187166993,"orig":-3.9094896335366855,"zero":0},
{"x":48,"trend":-4.975854485231623,"cycle":1.2081467801404262,"orig":-3.7677077050911967,"zero":0},
{"x":49,"trend":-4.9494134708683575,"cycle":0.6543390373023985,"orig":-4.295074433565959,"zero":0},
{"x":50,"trend":-4.868512885567564,"cycle":0.48535642212050334,"orig":-4.383156463447061,"zero":0},
{"x":51,"trend":-4.736475517305242,"cycle":-0.8316741138765292,"orig":-5.568149631181771,"zero":0},
{"x":52,"trend":-4.556188727412266,"cycle":-0.2917477710266889,"orig":-4.847936498438955,"zero":0},
{"x":53,"trend":-4.335632385540589,"cycle":0.32275612437521456,"orig":-4.012876261165375,"zero":0},
{"x":54,"trend":-4.085243377956647,"cycle":0.27478273615206505,"orig":-3.8104606418045814,"zero":0},
{"x":55,"trend":-3.814919126284871,"cycle":-1.2479167004040848,"orig":-5.062835826688956,"zero":0},
{"x":56,"trend":-3.5338923744507724,"cycle":0.4222611319308306,"orig":-3.111631242519942,"zero":0},
{"x":57,"trend":-3.2570363407407648,"cycle":-1.0503244179871674,"orig":-4.307360758727932,"zero":0},
{"x":58,"trend":-2.997183012190679,"cycle":-0.25439462269539787,"orig":-3.2515776348860768,"zero":0},
{"x":59,"trend":-2.771186833059428,"cycle":-0.2363160867559588,"orig":-3.0075029198153866,"zero":0},
{"x":60,"trend":-2.5960695901879314,"cycle":1.444529160401221,"orig":-1.1515404297867105,"zero":0},
{"x":61,"trend":-2.488592635108853,"cycle":-0.4126270143620436,"orig":-2.901219649470897,"zero":0},
{"x":62,"trend":-2.457598370656304,"cycle":0.5714719894007415,"orig":-1.8861263812555622,"zero":0},
{"x":63,"trend":-2.511894942159038,"cycle":0.5094934279817025,"orig":-2.0024015141773357,"zero":0},
{"x":64,"trend":-2.6557824082047587,"cycle":-0.2059192278891661,"orig":-2.8617016360939247,"zero":0},
{"x":65,"trend":-2.8892370056226957,"cycle":0.27993841938364683,"orig":-2.6092985862390488,"zero":0},
{"x":66,"trend":-3.21103905558761,"cycle":1.2061929304259684,"orig":-2.0048461251616416,"zero":0},
{"x":67,"trend":-3.616727831547636,"cycle":0.5591041353736043,"orig":-3.0576236961740317,"zero":0},
{"x":68,"trend":-4.094710042137064,"cycle":-0.5922557551039996,"orig":-4.686965797241063,"zero":0},
{"x":69,"trend":-4.629326152628075,"cycle":-1.7302286161929799,"orig":-6.359554768821055,"zero":0},
{"x":70,"trend":-5.206180291685973,"cycle":-1.2011618136778837,"orig":-6.407342105363856,"zero":0},
{"x":71,"trend":-5.817446267274255,"cycle":1.5552514056093059,"orig":-4.262194861664948,"zero":0},
{"x":72,"trend":-6.459896271869338,"cycle":0.7855200625010887,"orig":-5.6743762093682495,"zero":0},
{"x":73,"trend":-7.123195880869912,"cycle":0.830731364590695,"orig":-6.292464516279217,"zero":0},
{"x":74,"trend":-7.793641381804126,"cycle":0.8850548779167077,"orig":-6.908586503887419,"zero":0},
{"x":75,"trend":-8.45433892605294,"cycle":-0.16676780005797304,"orig":-8.621106726110913,"zero":0},
{"x":76,"trend":-9.085336595104026,"cycle":-0.5080390575459581,"orig":-9.593375652649984,"zero":0},
{"x":77,"trend":-9.668567979802123,"cycle":-0.9731161818767329,"orig":-10.641684161678857,"zero":0},
{"x":78,"trend":-10.18963216654932,"cycle":-0.6818054791741716,"orig":-10.871437645723491,"zero":0},
{"x":79,"trend":-10.640035887561583,"cycle":-0.8467755842140294,"orig":-11.486811471775612,"zero":0},
{"x":80,"trend":-11.016027947805103,"cycle":-1.2865121811344762,"orig":-12.30254012893958,"zero":0},
{"x":81,"trend":-11.319321792470307,"cycle":-1.2590423324509623,"orig":-12.578364124921269,"zero":0},
{"x":82,"trend":-11.55890967551935,"cycle":-0.6712395835615319,"orig":-12.230149259080882,"zero":0},
{"x":83,"trend":-11.750728343885207,"cycle":-0.42954232653418095,"orig":-12.180270670419388,"zero":0},
{"x":84,"trend":-11.914786782955593,"cycle":1.802453459952486,"orig":-10.112333323003106,"zero":0},
{"x":85,"trend":-12.07375113324484,"cycle":1.5749580396664578,"orig":-10.498793093578383,"zero":0},
{"x":86,"trend":-12.242800787980508,"cycle":0.9648894316738023,"orig":-11.277911356306706,"zero":0},
{"x":87,"trend":-12.43026327333813,"cycle":-0.07516249081099033,"orig":-12.505425764149122,"zero":0},
{"x":88,"trend":-12.639966480890525,"cycle":-0.020443447162961037,"orig":-12.660409928053486,"zero":0},
{"x":89,"trend":-12.875527593960117,"cycle":0.31033054736023297,"orig":-12.565197046599884,"zero":0},
{"x":90,"trend":-13.139911377717242,"cycle":-0.5012197911146388,"orig":-13.641131168831881,"zero":0},
{"x":91,"trend":-13.433843031448697,"cycle":0.45246519336930785,"orig":-12.98137783807939,"zero":0},
{"x":92,"trend":-13.759283554134747,"cycle":0.5767245075374627,"orig":-13.182559046597284,"zero":0},
{"x":93,"trend":-14.115245996219596,"cycle":0.6688006625537786,"orig":-13.446445333665817,"zero":0},
{"x":94,"trend":-14.497306204147238,"cycle":0.30860226904488536,"orig":-14.188703935102353,"zero":0},
{"x":95,"trend":-14.89731730022591,"cycle":-0.10840209544374181,"orig":-15.00571939566965,"zero":0},
{"x":96,"trend":-15.305157252944554,"cycle":-1.0999766169378262,"orig":-16.40513386988238,"zero":0},
{"x":97,"trend":-15.710764482096728,"cycle":-0.09009613889467574,"orig":-15.800860620991404,"zero":0},
{"x":98,"trend":-16.108708649646694,"cycle":0.36622437326868035,"orig":-15.742484276378013,"zero":0},
{"x":99,"trend":-16.49400892412448,"cycle":1.9269104880949348,"orig":-14.567098436029545,"zero":0},
{"x":100,"trend":-16.86036915628519,"cycle":-0.3850905855640514,"orig":-17.245459741849242,"zero":0},
{"x":101,"trend":-17.19356860605021,"cycle":-0.860445474813623,"orig":-18.054014080863833,"zero":0},
{"x":102,"trend":-17.481772210592922,"cycle":-0.9076168461663883,"orig":-18.38938905675931,"zero":0},
{"x":103,"trend":-17.71775619333569,"cycle":-1.5619287842271252,"orig":-19.279684977562813,"zero":0},
{"x":104,"trend":-17.89918909535654,"cycle":-1.2160223457195676,"orig":-19.11521144107611,"zero":0},
{"x":105,"trend":-18.031483812517905,"cycle":-0.546277441297538,"orig":-18.577761253815442,"zero":0},
{"x":106,"trend":-18.126182941379042,"cycle":0.9060725300749018,"orig":-17.22011041130414,"zero":0},
{"x":107,"trend":-18.197844921670786,"cycle":-0.9746657475491183,"orig":-19.172510669219903,"zero":0},
{"x":108,"trend":-18.25744309658469,"cycle":-0.4970283379129917,"orig":-18.75447143449768,"zero":0},
{"x":109,"trend":-18.320308305393883,"cycle":0.6161517697247332,"orig":-17.70415653566915,"zero":0},
{"x":110,"trend":-18.403732387843398,"cycle":1.51175489264984,"orig":-16.891977495193558,"zero":0},
{"x":111,"trend":-18.521795754265014,"cycle":1.2262860784186698,"orig":-17.295509675846343,"zero":0},
{"x":112,"trend":-18.681181182448093,"cycle":0.15790530629474167,"orig":-18.523275876153352,"zero":0},
{"x":113,"trend":-18.882213461840717,"cycle":-0.16686523417396798,"orig":-19.049078696014686,"zero":0},
{"x":114,"trend":-19.123394213366844,"cycle":-0.4657815547334002,"orig":-19.589175768100244,"zero":0},
{"x":115,"trend":-19.40275369986467,"cycle":0.13697146129397683,"orig":-19.265782238570694,"zero":0},
{"x":116,"trend":-19.719157841667485,"cycle":0.6643753378777567,"orig":-19.054782503789728,"zero":0},
{"x":117,"trend":-20.06973703670822,"cycle":0.3633787891244449,"orig":-19.706358247583772,"zero":0},
{"x":118,"trend":-20.44771221704608,"cycle":-0.29093020777338796,"orig":-20.73864242481947,"zero":0},
{"x":119,"trend":-20.843911494837684,"cycle":0.755192205515661,"orig":-20.08871928932202,"zero":0},
{"x":120,"trend":-21.249891192665,"cycle":-0.09863177803592775,"orig":-21.348522970700927,"zero":0},
{"x":121,"trend":-21.653664617424816,"cycle":1.2100024562479943,"orig":-20.44366216117682,"zero":0},
{"x":122,"trend":-22.043780491276465,"cycle":0.45134272954091115,"orig":-21.592437761735553,"zero":0},
{"x":123,"trend":-22.403961738995687,"cycle":0.5379382566647021,"orig":-21.866023482330984,"zero":0},
{"x":124,"trend":-22.716794288284696,"cycle":-0.5521680934319568,"orig":-23.26896238171665,"zero":0},
{"x":125,"trend":-22.963698341041727,"cycle":-0.5706294539751758,"orig":-23.534327795016903,"zero":0},
{"x":126,"trend":-23.12999997783251,"cycle":-1.3709280994985538,"orig":-24.500928077331064,"zero":0},
{"x":127,"trend":-23.205234940000796,"cycle":-0.9774272671768867,"orig":-24.182662207177682,"zero":0},
{"x":128,"trend":-23.18676773505812,"cycle":-1.0907819970874326,"orig":-24.277549732145552,"zero":0},
{"x":129,"trend":-23.078062988889926,"cycle":-1.464043373101445,"orig":-24.542106361991372,"zero":0},
{"x":130,"trend":-22.889042610450957,"cycle":-1.5958541742178445,"orig":-24.484896784668802,"zero":0},
{"x":131,"trend":-22.63745121483098,"cycle":-0.9227987044031825,"orig":-23.56024991923416,"zero":0},
{"x":132,"trend":-22.349049677076348,"cycle":0.2905193827892457,"orig":-22.058530294287102,"zero":0},
{"x":133,"trend":-22.0541984707367,"cycle":1.1634762605949782,"orig":-20.89072221014172,"zero":0},
{"x":134,"trend":-21.782029050205118,"cycle":1.3365091595662397,"orig":-20.445519890638877,"zero":0},
{"x":135,"trend":-21.556104689496774,"cycle":1.3929384529869104,"orig":-20.163166236509863,"zero":0},
{"x":136,"trend":-21.39319017992544,"cycle":0.3685426053990165,"orig":-21.024647574526423,"zero":0},
{"x":137,"trend":-21.30261466706084,"cycle":1.0707929881241287,"orig":-20.23182167893671,"zero":0},
{"x":138,"trend":-21.290470542274118,"cycle":0.1369833473568316,"orig":-21.153487194917286,"zero":0},
{"x":139,"trend":-21.356377471598414,"cycle":0.9235926646120864,"orig":-20.432784806986326,"zero":0},
{"x":140,"trend":-21.497530650328727,"cycle":1.0304190173768237,"orig":-20.467111632951905,"zero":0},
{"x":141,"trend":-21.705345519717742,"cycle":1.0733154400264775,"orig":-20.632030079691265,"zero":0},
{"x":142,"trend":-21.965193890090124,"cycle":0.5145689363489787,"orig":-21.450624953741144,"zero":0},
{"x":143,"trend":-22.25652205232037,"cycle":-0.4593687578341447,"orig":-22.715890810154516,"zero":0},
{"x":144,"trend":-22.555678524580898,"cycle":-0.9073937714071285,"orig":-23.463072295988027,"zero":0},
{"x":145,"trend":-22.840601029364898,"cycle":-1.151426016653319,"orig":-23.992027046018215,"zero":0},
{"x":146,"trend":-23.093205822937566,"cycle":-0.15012793720997794,"orig":-23.243333760147543,"zero":0},
{"x":147,"trend":-23.30085176266982,"cycle":-0.7862296792666085,"orig":-24.087081441936427,"zero":0},
{"x":148,"trend":-23.452294868204877,"cycle":-0.37645940676804446,"orig":-23.828754274972923,"zero":0},
{"x":149,"trend":-23.540726927534138,"cycle":-0.6829292565402769,"orig":-24.223656184074414,"zero":0},
{"x":150,"trend":-23.562142536244373,"cycle":-1.4497207073485234,"orig":-25.011863243592895,"zero":0},
{"x":151,"trend":-23.516735056211665,"cycle":-1.993506279030519,"orig":-25.510241335242185,"zero":0},
{"x":152,"trend":-23.412197410278132,"cycle":-1.2740870903887587,"orig":-24.68628450066689,"zero":0},
{"x":153,"trend":-23.265940571964116,"cycle":0.37935582898668935,"orig":-22.886584742977426,"zero":0},
{"x":154,"trend":-23.101694363883578,"cycle":0.7206412311127418,"orig":-22.381053132770838,"zero":0},
{"x":155,"trend":-22.941963558285813,"cycle":1.198925951610489,"orig":-21.743037606675323,"zero":0},
{"x":156,"trend":-22.80621031581273,"cycle":1.8440231359428387,"orig":-20.962187179869893,"zero":0},
{"x":157,"trend":-22.70846416750232,"cycle":2.2850236502279047,"orig":-20.423440517274415,"zero":0},
{"x":158,"trend":-22.65426450596456,"cycle":1.9621771369534744,"orig":-20.692087369011084,"zero":0},
{"x":159,"trend":-22.63858361014085,"cycle":0.08015171913890973,"orig":-22.558431891001938,"zero":0},
{"x":160,"trend":-22.64718877137244,"cycle":-0.337306604202744,"orig":-22.984495375575186,"zero":0},
{"x":161,"trend":-22.66491335111073,"cycle":-1.0913386961711125,"orig":-23.756252047281844,"zero":0},
{"x":162,"trend":-22.677581325762123,"cycle":-0.794501376051995,"orig":-23.472082701814116,"zero":0},
{"x":163,"trend":-22.675437422779407,"cycle":-0.180722264587755,"orig":-22.85615968736716,"zero":0},
{"x":164,"trend":-22.651987091386204,"cycle":-1.4346202249396658,"orig":-24.086607316325868,"zero":0},
{"x":165,"trend":-22.601440062907802,"cycle":-1.460642220777584,"orig":-24.062082283685385,"zero":0},
{"x":166,"trend":-22.524304250077783,"cycle":-1.006240871789156,"orig":-23.53054512186694,"zero":0},
{"x":167,"trend":-22.42757729767545,"cycle":1.821021298365587,"orig":-20.606555999309865,"zero":0},
{"x":168,"trend":-22.322807955170855,"cycle":1.8931615968985287,"orig":-20.429646358272326,"zero":0},
{"x":169,"trend":-22.213761920953143,"cycle":0.8897009173707652,"orig":-21.32406100358238,"zero":0},
{"x":170,"trend":-22.09614946361621,"cycle":-0.12051312230186256,"orig":-22.216662585918073,"zero":0},
{"x":171,"trend":-21.96207445620339,"cycle":-0.5037469151116072,"orig":-22.465821371314995,"zero":0},
{"x":172,"trend":-21.80452076512642,"cycle":0.16994709580919437,"orig":-21.634573669317223,"zero":0},
{"x":173,"trend":-21.61908846274531,"cycle":-1.3493968484198178,"orig":-22.96848531116513,"zero":0},
{"x":174,"trend":-21.40108515920481,"cycle":-0.39529641180676683,"orig":-21.79638157101158,"zero":0},
{"x":175,"trend":-21.152181843714352,"cycle":-0.029258993267479765,"orig":-21.18144083698183,"zero":0},
{"x":176,"trend":-20.87620716107426,"cycle":-0.30956879235192375,"orig":-21.185775953426184,"zero":0},
{"x":177,"trend":-20.577475483835805,"cycle":-0.748861716001155,"orig":-21.32633719983696,"zero":0},
{"x":178,"trend":-20.261908672641233,"cycle":-0.4010694756906501,"orig":-20.662978148331884,"zero":0},
{"x":179,"trend":-19.938824779396764,"cycle":-0.25089433144603585,"orig":-20.189719110842802,"zero":0},
{"x":180,"trend":-19.619262898434076,"cycle":0.6960689628289355,"orig":-18.92319393560514,"zero":0},
{"x":181,"trend":-19.3151667566348,"cycle":0.7755226533805524,"orig":-18.539644103254247,"zero":0},
{"x":182,"trend":-19.03509430856226,"cycle":0.8284398077443902,"orig":-18.20665450081787,"zero":0},
{"x":183,"trend":-18.78375431876332,"cycle":0.12562901381021474,"orig":-18.658125304953106,"zero":0},
{"x":184,"trend":-18.561704338956552,"cycle":1.2615729756442535,"orig":-17.3001313633123,"zero":0},
{"x":185,"trend":-18.368407184731296,"cycle":0.28830129684793054,"orig":-18.080105887883366,"zero":0},
{"x":186,"trend":-18.197294673378742,"cycle":1.1177169945837981,"orig":-17.079577678794944,"zero":0},
{"x":187,"trend":-18.040109102430826,"cycle":-0.7402029590132467,"orig":-18.78031206144407,"zero":0},
{"x":188,"trend":-17.883395209303913,"cycle":-1.2528080160106811,"orig":-19.136203225314595,"zero":0},
{"x":189,"trend":-17.716771057986954,"cycle":0.08703687630223422,"orig":-17.629734181684718,"zero":0},
{"x":190,"trend":-17.535310200914605,"cycle":-0.9621971102024122,"orig":-18.497507311117015,"zero":0},
{"x":191,"trend":-17.333797578028552,"cycle":-0.12790788598761124,"orig":-17.461705464016163,"zero":0},
{"x":192,"trend":-17.111407346366555,"cycle":-1.457636503963588,"orig":-18.569043850330143,"zero":0},
{"x":193,"trend":-16.86810096057455,"cycle":-1.0437613959574927,"orig":-17.911862356532044,"zero":0},
{"x":194,"trend":-16.610452588942064,"cycle":0.3355985833603702,"orig":-16.274854005581695,"zero":0},
{"x":195,"trend":-16.349806446748328,"cycle":1.726688189486126,"orig":-14.623118257262202,"zero":0},
{"x":196,"trend":-16.09618298191398,"cycle":1.3088905462935305,"orig":-14.787292435620449,"zero":0},
{"x":197,"trend":-15.852128056750658,"cycle":0.6164486024870026,"orig":-15.235679454263655,"zero":0},
{"x":198,"trend":-15.614489201469814,"cycle":-0.8743909503723668,"orig":-16.48888015184218,"zero":0},
{"x":199,"trend":-15.377411426357812,"cycle":-0.822799683475574,"orig":-16.200211109833386,"zero":0},
{"x":200,"trend":-15.138838099399031,"cycle":0.32565361289538713,"orig":-14.813184486503644,"zero":0}];
    const series = [{"name":"Cycle","color":"#2ca02c","key":"cycle","dash":""}];
    const bands = [];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#filt_cy_70');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Cycle') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Cycle');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

</script>
</body>
</html>