<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bayesian IRF (16%–84% posterior band)</title>
<style>* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #fff;
    color: #333;
    padding: 20px;
}
.figure-title {
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 16px;
    color: #222;
}
.figure-source {
    font-size: 11px;
    color: #888;
    text-align: center;
    margin-top: 8px;
}
.panel-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
}
.panel {
    width: calc(33% - 16px);
    min-width: 300px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 12px;
}
.panel-title {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 8px;
    color: #444;
}
.axis text { font-size: 11px; fill: #666; }
.axis line, .axis path { stroke: #ccc; }
.grid line { stroke: #f0f0f0; stroke-dasharray: 2,2; }
.grid .domain { stroke: none; }
.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    z-index: 1000;
}
.legend { font-size: 11px; }
.legend rect { rx: 2; }
svg { overflow: visible; }
</style>
</head>
<body>
<div class="figure-title">Bayesian IRF (16%–84% posterior band)</div>
<div class="panel-grid">
<div class="panel">
<div class="panel-title">INDPRO ← INDPRO</div>
<div id="birf_19"></div>
</div>
<div class="panel">
<div class="panel-title">UNRATE ← INDPRO</div>
<div id="birf_20"></div>
</div>
<div class="panel">
<div class="panel-title">CPI ← INDPRO</div>
<div id="birf_21"></div>
</div>
<div class="panel">
<div class="panel-title">INDPRO ← UNRATE</div>
<div id="birf_22"></div>
</div>
<div class="panel">
<div class="panel-title">UNRATE ← UNRATE</div>
<div id="birf_23"></div>
</div>
<div class="panel">
<div class="panel-title">CPI ← UNRATE</div>
<div id="birf_24"></div>
</div>
<div class="panel">
<div class="panel-title">INDPRO ← CPI</div>
<div id="birf_25"></div>
</div>
<div class="panel">
<div class="panel-title">UNRATE ← CPI</div>
<div id="birf_26"></div>
</div>
<div class="panel">
<div class="panel-title">CPI ← CPI</div>
<div id="birf_27"></div>
</div>
</div>

<div class="tooltip" id="tooltip"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script>
// Shared utilities
const tooltip = d3.select('#tooltip');
function fmt(v) {
    if (v === null || v === undefined) return '';
    return Math.abs(v) >= 1000 ? v.toFixed(1) : (Math.abs(v) >= 1 ? v.toFixed(3) : v.toFixed(4));
}
function showTip(evt, html) {
    tooltip.html(html).style('opacity',1)
        .style('left',(evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px');
}
function hideTip() { tooltip.style('opacity',0); }

(function() {
    const data = [{"x":0,"irf":0.036616245644539226,"ci_lo":0.0356560411479811,"ci_hi":0.03757977669762487,"zero":0},
{"x":1,"irf":0.01022680222857894,"ci_lo":0.004585663913521175,"ci_hi":0.01603123397995668,"zero":0},
{"x":2,"irf":0.00479827179899732,"ci_lo":-0.0014309295385508166,"ci_hi":0.010961901040863033,"zero":0},
{"x":3,"irf":0.004329438686458044,"ci_lo":-0.002305032236069513,"ci_hi":0.010770925796915007,"zero":0},
{"x":4,"irf":0.004191177162032632,"ci_lo":-0.002675306951641464,"ci_hi":0.011604788613453728,"zero":0},
{"x":5,"irf":0.0007339042494930872,"ci_lo":-0.00468609165963091,"ci_hi":0.006126592273029433,"zero":0},
{"x":6,"irf":0.0014280344718127635,"ci_lo":-0.0030037120316111577,"ci_hi":0.005932982954595049,"zero":0},
{"x":7,"irf":0.0006465569467129827,"ci_lo":-0.0033142899189981066,"ci_hi":0.004645655552192168,"zero":0},
{"x":8,"irf":0.0019001491858367733,"ci_lo":-0.0016655277069892065,"ci_hi":0.005792245208212634,"zero":0},
{"x":9,"irf":0.0009194389687801631,"ci_lo":-0.0019271799145831085,"ci_hi":0.003663796948922935,"zero":0},
{"x":10,"irf":0.0013409889522234925,"ci_lo":-0.0012275277674121021,"ci_hi":0.003599132645154018,"zero":0},
{"x":11,"irf":0.0005890084130179561,"ci_lo":-0.0016357925386367832,"ci_hi":0.002841849907190113,"zero":0},
{"x":12,"irf":0.0014704861511607463,"ci_lo":-0.0008049738014099223,"ci_hi":0.0036638708643412753,"zero":0},
{"x":13,"irf":0.00037847909765113114,"ci_lo":-0.0012941396000939976,"ci_hi":0.0022602108876632,"zero":0},
{"x":14,"irf":0.001347859018445837,"ci_lo":-0.000764705335433027,"ci_hi":0.0026624165787176015,"zero":0},
{"x":15,"irf":0.0005341301929025886,"ci_lo":-0.0009972949589021893,"ci_hi":0.0019349835567709518,"zero":0},
{"x":16,"irf":0.0013199548868881475,"ci_lo":-0.000720863195718333,"ci_hi":0.002376068715911315,"zero":0},
{"x":17,"irf":0.0005049148401632008,"ci_lo":-0.0008127899560981511,"ci_hi":0.0015607933154174302,"zero":0},
{"x":18,"irf":0.0014873576418555615,"ci_lo":-0.00040510392357546077,"ci_hi":0.002074869638224514,"zero":0},
{"x":19,"irf":0.00035556302852205064,"ci_lo":-0.0006971382421145829,"ci_hi":0.0013272464013189167,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_19');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":-0.06367795676031694,"ci_lo":-0.07738545454787653,"ci_hi":-0.050236475677175416,"zero":0},
{"x":1,"irf":-0.43292663577906737,"ci_lo":-0.49681977091751883,"ci_hi":-0.37113397520671476,"zero":0},
{"x":2,"irf":-0.08693638634808587,"ci_lo":-0.1837947506091092,"ci_hi":0.008820019828262584,"zero":0},
{"x":3,"irf":-0.12785116555115023,"ci_lo":-0.2299579014261564,"ci_hi":-0.03123081250765869,"zero":0},
{"x":4,"irf":-0.13412507104234267,"ci_lo":-0.2463477017547966,"ci_hi":-0.024024175487684533,"zero":0},
{"x":5,"irf":-0.007506096179658849,"ci_lo":-0.10923275159048941,"ci_hi":0.08721138406292522,"zero":0},
{"x":6,"irf":-0.004415399232827717,"ci_lo":-0.08253319052149487,"ci_hi":0.0741091830061247,"zero":0},
{"x":7,"irf":-0.02015692866732588,"ci_lo":-0.09401557904698456,"ci_hi":0.053395336110765024,"zero":0},
{"x":8,"irf":-0.005308663894682789,"ci_lo":-0.06759179898161663,"ci_hi":0.06410555881228155,"zero":0},
{"x":9,"irf":-0.02622677074565728,"ci_lo":-0.07935035890519715,"ci_hi":0.02529772364404018,"zero":0},
{"x":10,"irf":-0.01249699635407384,"ci_lo":-0.04998653556002269,"ci_hi":0.03365913337909699,"zero":0},
{"x":11,"irf":-0.017126949954650677,"ci_lo":-0.055225693309413286,"ci_hi":0.021618709992801726,"zero":0},
{"x":12,"irf":-0.01056245317622204,"ci_lo":-0.045983978022548666,"ci_hi":0.022839631478854087,"zero":0},
{"x":13,"irf":-0.018070493654881573,"ci_lo":-0.04670704487988629,"ci_hi":0.015194391756820327,"zero":0},
{"x":14,"irf":-0.006066593512861749,"ci_lo":-0.0316358792412699,"ci_hi":0.022864917271252578,"zero":0},
{"x":15,"irf":-0.018094993074921552,"ci_lo":-0.041544332741514325,"ci_hi":0.01209649863513241,"zero":0},
{"x":16,"irf":-0.009408719379384568,"ci_lo":-0.0289864251871859,"ci_hi":0.015686957403097557,"zero":0},
{"x":17,"irf":-0.016512592816886947,"ci_lo":-0.03151288284177477,"ci_hi":0.011062214188808664,"zero":0},
{"x":18,"irf":-0.010175689646868899,"ci_lo":-0.022397451318497203,"ci_hi":0.012555450827912968,"zero":0},
{"x":19,"irf":-0.020399662136487442,"ci_lo":-0.02960738366071451,"ci_hi":0.0076106587942500175,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_20');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":0.00012008845572994919,"ci_lo":-0.0010351524372662923,"ci_hi":0.0013193639717888448,"zero":0},
{"x":1,"irf":6.937203087503445e-5,"ci_lo":-0.005625269028750415,"ci_hi":0.005865193337918283,"zero":0},
{"x":2,"irf":0.0002108163631419433,"ci_lo":-0.005513184870843944,"ci_hi":0.006148963029760938,"zero":0},
{"x":3,"irf":0.00012393743521945183,"ci_lo":-0.006010159035593629,"ci_hi":0.006484211146302323,"zero":0},
{"x":4,"irf":-0.0006320311271964893,"ci_lo":-0.006633328769994739,"ci_hi":0.005120720774580076,"zero":0},
{"x":5,"irf":-0.00012619436770457273,"ci_lo":-0.0035177870812546654,"ci_hi":0.003532968472161031,"zero":0},
{"x":6,"irf":0.00013224702100677596,"ci_lo":-0.0032120921353141155,"ci_hi":0.0033016016757028786,"zero":0},
{"x":7,"irf":0.00017197502937210253,"ci_lo":-0.002786777078947129,"ci_hi":0.0032869982767689864,"zero":0},
{"x":8,"irf":-0.00013059406677606877,"ci_lo":-0.002902757672326137,"ci_hi":0.002471661023022405,"zero":0},
{"x":9,"irf":2.2161066113269468e-5,"ci_lo":-0.0024030045432355557,"ci_hi":0.0023138036545672057,"zero":0},
{"x":10,"irf":-0.00023262343260059461,"ci_lo":-0.0025180630898578777,"ci_hi":0.0020914054405073846,"zero":0},
{"x":11,"irf":5.091513359538242e-6,"ci_lo":-0.0018463369409377308,"ci_hi":0.0020731528141595106,"zero":0},
{"x":12,"irf":-0.00012656697815276942,"ci_lo":-0.0018113643101671628,"ci_hi":0.0017296825843549522,"zero":0},
{"x":13,"irf":-5.703211000652771e-6,"ci_lo":-0.001675924582291191,"ci_hi":0.0016501899104493073,"zero":0},
{"x":14,"irf":-3.961905974238893e-5,"ci_lo":-0.0016800879133275317,"ci_hi":0.0013116235006650973,"zero":0},
{"x":15,"irf":-7.104504416275087e-5,"ci_lo":-0.0012875529436830796,"ci_hi":0.0014835809665017967,"zero":0},
{"x":16,"irf":-5.196468363207599e-5,"ci_lo":-0.001289913208206542,"ci_hi":0.0010846188561671561,"zero":0},
{"x":17,"irf":-0.0004913185399396229,"ci_lo":-0.0010912440158653337,"ci_hi":0.0011028845550222995,"zero":0},
{"x":18,"irf":-0.00020087175737026888,"ci_lo":-0.0011295930016834593,"ci_hi":0.0009695877327705632,"zero":0},
{"x":19,"irf":-0.0004970429928402,"ci_lo":-0.0010401067606300232,"ci_hi":0.0008563778689646349,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_21');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":0.0,"ci_lo":0.0,"ci_hi":0.0,"zero":0},
{"x":1,"irf":0.0006837251093281634,"ci_lo":-0.0010254637417595907,"ci_hi":0.0023520623910441327,"zero":0},
{"x":2,"irf":0.0022007600731563785,"ci_lo":0.000449818586683293,"ci_hi":0.00399703191411367,"zero":0},
{"x":3,"irf":0.0015088385029434432,"ci_lo":-0.00028340128000493316,"ci_hi":0.003387115192870782,"zero":0},
{"x":4,"irf":0.0007907780266266043,"ci_lo":-0.001107771245180569,"ci_hi":0.002568782497536824,"zero":0},
{"x":5,"irf":0.00011770274560300333,"ci_lo":-0.0011202514504790359,"ci_hi":0.0013376666030679519,"zero":0},
{"x":6,"irf":0.0001689543285458424,"ci_lo":-0.0009385679055035205,"ci_hi":0.0012491696506167847,"zero":0},
{"x":7,"irf":8.981980654872156e-5,"ci_lo":-0.0009141282881835781,"ci_hi":0.0011077497635325906,"zero":0},
{"x":8,"irf":0.0002647132378170724,"ci_lo":-0.0005926192383210159,"ci_hi":0.001133582467580103,"zero":0},
{"x":9,"irf":9.966704920885615e-5,"ci_lo":-0.0005593720575178369,"ci_hi":0.0007430214583304793,"zero":0},
{"x":10,"irf":0.00019316735615073982,"ci_lo":-0.0004398925890102209,"ci_hi":0.0007985684986497668,"zero":0},
{"x":11,"irf":6.046206862406436e-5,"ci_lo":-0.000469117444921268,"ci_hi":0.000620203462985264,"zero":0},
{"x":12,"irf":0.00020196889476504568,"ci_lo":-0.0003246066708360607,"ci_hi":0.0006596134564803508,"zero":0},
{"x":13,"irf":2.3176431917476065e-5,"ci_lo":-0.0003580429403560345,"ci_hi":0.00043267862281822487,"zero":0},
{"x":14,"irf":0.00016357111764476247,"ci_lo":-0.0002511236182081072,"ci_hi":0.0005276659807576542,"zero":0},
{"x":15,"irf":4.99484988647576e-5,"ci_lo":-0.0002529469945205431,"ci_hi":0.00045302099594626914,"zero":0},
{"x":16,"irf":0.0002175139311526217,"ci_lo":-0.0001974244552615784,"ci_hi":0.00047064116628217346,"zero":0},
{"x":17,"irf":-1.7934914710756827e-5,"ci_lo":-0.00023282627413474404,"ci_hi":0.0003395452486664159,"zero":0},
{"x":18,"irf":0.00017884785653360472,"ci_lo":-0.00016369822418304603,"ci_hi":0.0003547522713696267,"zero":0},
{"x":19,"irf":-2.3700693780499565e-5,"ci_lo":-0.00021196271308882174,"ci_hi":0.0002770771904503848,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_22');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":0.40599677463462164,"ci_lo":0.39564915926480093,"ci_hi":0.41640782065780796,"zero":0},
{"x":1,"irf":-0.06707790307905959,"ci_lo":-0.08561347985994947,"ci_hi":-0.04899350272425869,"zero":0},
{"x":2,"irf":-0.05928825641590776,"ci_lo":-0.08782189558844525,"ci_hi":-0.03151793917898784,"zero":0},
{"x":3,"irf":-0.026114119890561397,"ci_lo":-0.053698573150114275,"ci_hi":0.0034658503241387978,"zero":0},
{"x":4,"irf":-0.04979861277565699,"ci_lo":-0.0803966793452737,"ci_hi":-0.019310680611763636,"zero":0},
{"x":5,"irf":0.00017424321554262268,"ci_lo":-0.026534259175731774,"ci_hi":0.028292334793847643,"zero":0},
{"x":6,"irf":0.002856189915457848,"ci_lo":-0.018113332714942216,"ci_hi":0.023808514837556943,"zero":0},
{"x":7,"irf":-0.003813789664869825,"ci_lo":-0.022737643061812817,"ci_hi":0.015190680506698797,"zero":0},
{"x":8,"irf":0.0018821489153490064,"ci_lo":-0.014945642752305532,"ci_hi":0.018620378835119432,"zero":0},
{"x":9,"irf":-0.004330703161529494,"ci_lo":-0.018598736508031077,"ci_hi":0.010148768434623995,"zero":0},
{"x":10,"irf":-0.0013458200703813058,"ci_lo":-0.013129875608399143,"ci_hi":0.010099181460868887,"zero":0},
{"x":11,"irf":-0.0027095661611226435,"ci_lo":-0.01277905320225311,"ci_hi":0.0074395206450758,"zero":0},
{"x":12,"irf":-0.0007037881335414683,"ci_lo":-0.010339637372275192,"ci_hi":0.008406901515715609,"zero":0},
{"x":13,"irf":-0.0029133718904555783,"ci_lo":-0.009778219942872923,"ci_hi":0.006081578059933622,"zero":0},
{"x":14,"irf":0.0007183873515720996,"ci_lo":-0.006718386138831072,"ci_hi":0.0063995420120300135,"zero":0},
{"x":15,"irf":-0.002581931222576212,"ci_lo":-0.008355820246604806,"ci_hi":0.004357817940872144,"zero":0},
{"x":16,"irf":-0.00012959810182161253,"ci_lo":-0.006725942930338415,"ci_hi":0.004880729620338139,"zero":0},
{"x":17,"irf":-0.003128128576351075,"ci_lo":-0.006549464103550169,"ci_hi":0.003661757515155658,"zero":0},
{"x":18,"irf":0.0014544091225283408,"ci_lo":-0.005106998334824526,"ci_hi":0.0040950585038450615,"zero":0},
{"x":19,"irf":-0.0036044410838546098,"ci_lo":-0.005909056640328807,"ci_hi":0.002691430545020436,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_23');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":-0.00016224052469649214,"ci_lo":-0.0014765277234357133,"ci_hi":0.0011335519418108023,"zero":0},
{"x":1,"irf":0.00023032062958327693,"ci_lo":-0.0013282245139747892,"ci_hi":0.0018433973474124093,"zero":0},
{"x":2,"irf":0.00014970191524955848,"ci_lo":-0.0014074296719340327,"ci_hi":0.0017673931233162243,"zero":0},
{"x":3,"irf":-6.901084893354128e-5,"ci_lo":-0.0018670635403321555,"ci_hi":0.0017315550714102567,"zero":0},
{"x":4,"irf":-9.739119794076957e-5,"ci_lo":-0.0018772317467538738,"ci_hi":0.0016927738550783391,"zero":0},
{"x":5,"irf":-6.451653958771695e-5,"ci_lo":-0.001154586795392003,"ci_hi":0.0010325697077543806,"zero":0},
{"x":6,"irf":4.376484453630226e-5,"ci_lo":-0.000944876211294472,"ci_hi":0.0009747505970623477,"zero":0},
{"x":7,"irf":1.0184769788087865e-5,"ci_lo":-0.0008520344649308419,"ci_hi":0.0009465218585203005,"zero":0},
{"x":8,"irf":-5.713778416369821e-7,"ci_lo":-0.0007707242941317175,"ci_hi":0.0008039460862468645,"zero":0},
{"x":9,"irf":-4.045118839116561e-5,"ci_lo":-0.0006929190724645273,"ci_hi":0.0006632643441127783,"zero":0},
{"x":10,"irf":-4.1361296860930605e-5,"ci_lo":-0.0006510829701514031,"ci_hi":0.0005778817343940744,"zero":0},
{"x":11,"irf":-5.785957299018941e-5,"ci_lo":-0.0005898912019219923,"ci_hi":0.0005225912140751781,"zero":0},
{"x":12,"irf":7.576205375713618e-5,"ci_lo":-0.0004791186831276735,"ci_hi":0.0005723502785142709,"zero":0},
{"x":13,"irf":-0.0001453315601368676,"ci_lo":-0.00048584090106345825,"ci_hi":0.00036489587799418263,"zero":0},
{"x":14,"irf":6.885203143493007e-5,"ci_lo":-0.0004108121816750948,"ci_hi":0.0003968815428758822,"zero":0},
{"x":15,"irf":-9.789580077166612e-5,"ci_lo":-0.00035380621563802753,"ci_hi":0.00045679907671744075,"zero":0},
{"x":16,"irf":1.3464230929283012e-5,"ci_lo":-0.00041864431216903837,"ci_hi":0.000319595888984049,"zero":0},
{"x":17,"irf":-0.000305098011570751,"ci_lo":-0.00034064670590120306,"ci_hi":0.0003028868638108352,"zero":0},
{"x":18,"irf":0.0001739680796697331,"ci_lo":-0.0002843230101594421,"ci_hi":0.00034605537010332283,"zero":0},
{"x":19,"irf":-0.0003423997161633185,"ci_lo":-0.0003315772260012042,"ci_hi":0.00022852716261174556,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_24');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":0.0,"ci_lo":0.0,"ci_hi":0.0,"zero":0},
{"x":1,"irf":0.005354332086456198,"ci_lo":-0.005158154216888436,"ci_hi":0.016054618366981147,"zero":0},
{"x":2,"irf":0.0007055381413725602,"ci_lo":-0.010734962412248307,"ci_hi":0.012147006547926118,"zero":0},
{"x":3,"irf":0.0006868300022200718,"ci_lo":-0.011274937183249099,"ci_hi":0.012575274609835471,"zero":0},
{"x":4,"irf":0.00023873260093582467,"ci_lo":-0.012267310987662898,"ci_hi":0.012846798494306142,"zero":0},
{"x":5,"irf":0.0007724643526401743,"ci_lo":-0.006688001544723019,"ci_hi":0.00835078394907046,"zero":0},
{"x":6,"irf":0.00017549638153995837,"ci_lo":-0.006965949609703658,"ci_hi":0.006549637538700181,"zero":0},
{"x":7,"irf":0.0010015282680231673,"ci_lo":-0.005123434715560077,"ci_hi":0.007338882230214945,"zero":0},
{"x":8,"irf":0.0003171339951150592,"ci_lo":-0.006014057433983565,"ci_hi":0.005737755011493949,"zero":0},
{"x":9,"irf":0.001019883759551522,"ci_lo":-0.0040598369188182114,"ci_hi":0.005842771600629777,"zero":0},
{"x":10,"irf":0.00033401917681218546,"ci_lo":-0.00508161354451248,"ci_hi":0.004262728482296183,"zero":0},
{"x":11,"irf":0.0009465219301407449,"ci_lo":-0.0038250591576859086,"ci_hi":0.0045375881273655525,"zero":0},
{"x":12,"irf":0.0006795394597498418,"ci_lo":-0.0035132388838185883,"ci_hi":0.00389618394729684,"zero":0},
{"x":13,"irf":0.0014944925382211695,"ci_lo":-0.00271040571041026,"ci_hi":0.004510384437349145,"zero":0},
{"x":14,"irf":0.0008659104060034658,"ci_lo":-0.002935939624758111,"ci_hi":0.0029275510825523114,"zero":0},
{"x":15,"irf":0.0016440926042587969,"ci_lo":-0.002215138983230037,"ci_hi":0.0035139488420758667,"zero":0},
{"x":16,"irf":0.001910862358675427,"ci_lo":-0.002463204600033438,"ci_hi":0.003097491602212096,"zero":0},
{"x":17,"irf":0.002316176016520548,"ci_lo":-0.0018949916379168734,"ci_hi":0.0029309408647672174,"zero":0},
{"x":18,"irf":0.002209987460698266,"ci_lo":-0.00203692174392475,"ci_hi":0.0021613021753036235,"zero":0},
{"x":19,"irf":0.0030597939973249747,"ci_lo":-0.0015795869038480515,"ci_hi":0.0022989001485038047,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_25');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":0.0,"ci_lo":0.0,"ci_hi":0.0,"zero":0},
{"x":1,"irf":-0.14998479524777522,"ci_lo":-0.26707052277130544,"ci_hi":-0.03497904784605472,"zero":0},
{"x":2,"irf":-0.07939708510572208,"ci_lo":-0.25956778960681376,"ci_hi":0.08867198471132366,"zero":0},
{"x":3,"irf":-0.0509702337198422,"ci_lo":-0.25614997104107984,"ci_hi":0.14254761785343634,"zero":0},
{"x":4,"irf":0.028581132785346443,"ci_lo":-0.16638368840868956,"ci_hi":0.23042990721261725,"zero":0},
{"x":5,"irf":-0.019108323375821346,"ci_lo":-0.20905666675641676,"ci_hi":0.15376901949692157,"zero":0},
{"x":6,"irf":-0.007129305036365574,"ci_lo":-0.13113127830134827,"ci_hi":0.12542190068161982,"zero":0},
{"x":7,"irf":-0.02760802087338512,"ci_lo":-0.1404799612316501,"ci_hi":0.09386438412884565,"zero":0},
{"x":8,"irf":-0.014511058967653636,"ci_lo":-0.11222297596314466,"ci_hi":0.10009910462995683,"zero":0},
{"x":9,"irf":-0.03024235800392364,"ci_lo":-0.11362718872229154,"ci_hi":0.07017873521914358,"zero":0},
{"x":10,"irf":-0.00298358921256172,"ci_lo":-0.08322176704347954,"ci_hi":0.08550353814629727,"zero":0},
{"x":11,"irf":-0.030767655959519365,"ci_lo":-0.0893080789031699,"ci_hi":0.06317752668389465,"zero":0},
{"x":12,"irf":-0.008736440051296543,"ci_lo":-0.07216960854198542,"ci_hi":0.06888781251589021,"zero":0},
{"x":13,"irf":-0.04131290138946241,"ci_lo":-0.08314163763357052,"ci_hi":0.04295415803554479,"zero":0},
{"x":14,"irf":-0.014582905076131004,"ci_lo":-0.05904860380141169,"ci_hi":0.04623350551000743,"zero":0},
{"x":15,"irf":-0.05042437186629717,"ci_lo":-0.07042825367951157,"ci_hi":0.03372811823390585,"zero":0},
{"x":16,"irf":-0.020116211957943123,"ci_lo":-0.05508299594351273,"ci_hi":0.044304674298622455,"zero":0},
{"x":17,"irf":-0.07267748672336864,"ci_lo":-0.05784310200987637,"ci_hi":0.024449120320460233,"zero":0},
{"x":18,"irf":-0.018741842854299758,"ci_lo":-0.04186361399079597,"ci_hi":0.0367756832603973,"zero":0},
{"x":19,"irf":-0.0953908619333342,"ci_lo":-0.05227952556943956,"ci_hi":0.02226059113461172,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_26');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":0,"irf":0.03552990560616002,"ci_lo":0.03462248233962365,"ci_hi":0.036423491098190666,"zero":0},
{"x":1,"irf":-0.0037645426465429217,"ci_lo":-0.01410557220414587,"ci_hi":0.006169231710382327,"zero":0},
{"x":2,"irf":0.0012629069223070199,"ci_lo":-0.00949128376891928,"ci_hi":0.011691076411359327,"zero":0},
{"x":3,"irf":-0.0011638042381992963,"ci_lo":-0.012547366595831605,"ci_hi":0.010200447180240144,"zero":0},
{"x":4,"irf":0.003943799146920393,"ci_lo":-0.007834731631812652,"ci_hi":0.01630686520918296,"zero":0},
{"x":5,"irf":-0.00019156484118295594,"ci_lo":-0.00821185300199776,"ci_hi":0.007895947628617086,"zero":0},
{"x":6,"irf":0.004330213044160792,"ci_lo":-0.003960529519316429,"ci_hi":0.012556332009385048,"zero":0},
{"x":7,"irf":-0.00021664681870085022,"ci_lo":-0.008136014023056125,"ci_hi":0.006707194775310158,"zero":0},
{"x":8,"irf":0.005113833799470125,"ci_lo":-0.0026631089131899386,"ci_hi":0.012321542074236637,"zero":0},
{"x":9,"irf":-0.0015393260854564173,"ci_lo":-0.008603327901122332,"ci_hi":0.004215639254251332,"zero":0},
{"x":10,"irf":0.004826425918839727,"ci_lo":-0.0030692748360740237,"ci_hi":0.009562315324942625,"zero":0},
{"x":11,"irf":-9.232779541839734e-5,"ci_lo":-0.005743852689580515,"ci_hi":0.004459127826153592,"zero":0},
{"x":12,"irf":0.0062997237075306115,"ci_lo":-0.001437218379613357,"ci_hi":0.009915621807791174,"zero":0},
{"x":13,"irf":2.6371594074723034e-5,"ci_lo":-0.005091370029140571,"ci_hi":0.003543860039036951,"zero":0},
{"x":14,"irf":0.008161072798918124,"ci_lo":-0.0009859949414001725,"ci_hi":0.007966566892390167,"zero":0},
{"x":15,"irf":0.0002572478615952891,"ci_lo":-0.005634526960539652,"ci_hi":0.0021097158561959976,"zero":0},
{"x":16,"irf":0.010291524635858586,"ci_lo":-0.0014776779431796036,"ci_hi":0.00701872874605961,"zero":0},
{"x":17,"irf":0.001039954865107171,"ci_lo":-0.003600567579858499,"ci_hi":0.0026602930712503036,"zero":0},
{"x":18,"irf":0.014606813707260217,"ci_lo":-0.0005783910879940399,"ci_hi":0.006878086886265479,"zero":0},
{"x":19,"irf":0.003127013830258987,"ci_lo":-0.0028898979858077174,"ci_hi":0.0022520465821455056,"zero":0}];
    const series = [{"name":"Posterior mean","color":"#1f77b4","key":"irf","dash":""}];
    const bands = [{"lo_key":"ci_lo","hi_key":"ci_hi","color":"#1f77b4","alpha":0.15}];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#birf_27');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Horizon') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Horizon');
    if('Response') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Response');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

</script>
</body>
</html>