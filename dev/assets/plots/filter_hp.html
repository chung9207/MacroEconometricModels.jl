<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hodrick-Prescott Filter (λ=1600.0)</title>
<style>* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #fff;
    color: #333;
    padding: 20px;
}
.figure-title {
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 16px;
    color: #222;
}
.figure-source {
    font-size: 11px;
    color: #888;
    text-align: center;
    margin-top: 8px;
}
.panel-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
}
.panel {
    width: calc(100% - 16px);
    min-width: 300px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 12px;
}
.panel-title {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 8px;
    color: #444;
}
.axis text { font-size: 11px; fill: #666; }
.axis line, .axis path { stroke: #ccc; }
.grid line { stroke: #f0f0f0; stroke-dasharray: 2,2; }
.grid .domain { stroke: none; }
.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    z-index: 1000;
}
.legend { font-size: 11px; }
.legend rect { rx: 2; }
svg { overflow: visible; }
</style>
</head>
<body>
<div class="figure-title">Hodrick-Prescott Filter (λ=1600.0)</div>
<div class="panel-grid">
<div class="panel">
<div class="panel-title">Trend-Cycle Decomposition</div>
<div id="filt_tc_61"></div>
</div>
<div class="panel">
<div class="panel-title">Cyclical Component</div>
<div id="filt_cy_62"></div>
</div>
</div>

<div class="tooltip" id="tooltip"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script>
// Shared utilities
const tooltip = d3.select('#tooltip');
function fmt(v) {
    if (v === null || v === undefined) return '';
    return Math.abs(v) >= 1000 ? v.toFixed(1) : (Math.abs(v) >= 1 ? v.toFixed(3) : v.toFixed(4));
}
function showTip(evt, html) {
    tooltip.html(html).style('opacity',1)
        .style('left',(evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px');
}
function hideTip() { tooltip.style('opacity',0); }

(function() {
    const data = [{"x":1,"trend":-1.5883855399178746,"cycle":2.1248027705739565,"orig":0.5364172306560819,"zero":0},
{"x":2,"trend":-1.7209318702014473,"cycle":0.16496752988742291,"orig":-1.5559643403140244,"zero":0},
{"x":3,"trend":-1.8521501987534115,"cycle":0.5143286804113956,"orig":-1.337821518342016,"zero":0},
{"x":4,"trend":-1.9806094191359795,"cycle":1.2176134279507966,"orig":-0.7629959911851829,"zero":0},
{"x":5,"trend":-2.1045569694861044,"cycle":0.484265443946148,"orig":-1.6202915255399564,"zero":0},
{"x":6,"trend":-2.2214792795482716,"cycle":0.9810547460140167,"orig":-1.240424533534255,"zero":0},
{"x":7,"trend":-2.3285601131645,"cycle":1.4924928819797447,"orig":-0.8360672311847552,"zero":0},
{"x":8,"trend":-2.4223700749605483,"cycle":2.433729515755592,"orig":0.011359440795043696,"zero":0},
{"x":9,"trend":-2.4985469615109386,"cycle":0.2358945971563493,"orig":-2.2626523643545893,"zero":0},
{"x":10,"trend":-2.5512074884428477,"cycle":-2.10225219442097,"orig":-4.653459682863818,"zero":0},
{"x":11,"trend":-2.5743209372602283,"cycle":-1.9838749139644043,"orig":-4.5581958512246326,"zero":0},
{"x":12,"trend":-2.563170497088544,"cycle":-4.291176843805295,"orig":-6.854347340893839,"zero":0},
{"x":13,"trend":-2.5142792788744894,"cycle":-4.270014480592847,"orig":-6.784293759467337,"zero":0},
{"x":14,"trend":-2.4268523790921366,"cycle":-3.0652416929439674,"orig":-5.492094072036104,"zero":0},
{"x":15,"trend":-2.3027636532659286,"cycle":-3.6775171949218373,"orig":-5.980280848187766,"zero":0},
{"x":16,"trend":-2.145802732978397,"cycle":-2.3211339895283984,"orig":-4.466936722506795,"zero":0},
{"x":17,"trend":-1.9620576980589008,"cycle":-1.2220501269782458,"orig":-3.1841078250371466,"zero":0},
{"x":18,"trend":-1.7590673370802548,"cycle":0.3678478990982965,"orig":-1.3912194379819582,"zero":0},
{"x":19,"trend":-1.5451342199446345,"cycle":0.7376339488325295,"orig":-0.807500271112105,"zero":0},
{"x":20,"trend":-1.3283310116172782,"cycle":1.3333963723630937,"orig":0.005065360745815539,"zero":0},
{"x":21,"trend":-1.116269355845405,"cycle":2.3621880441085334,"orig":1.2459186882631283,"zero":0},
{"x":22,"trend":-0.9157275236435076,"cycle":1.23887201671941,"orig":0.32314449307590243,"zero":0},
{"x":23,"trend":-0.7320074184985098,"cycle":0.445008678767814,"orig":-0.2869987397306958,"zero":0},
{"x":24,"trend":-0.5696366488868856,"cycle":1.4196507011859958,"orig":0.8500140522991102,"zero":0},
{"x":25,"trend":-0.43286469286087975,"cycle":1.5081226397123393,"orig":1.0752579468514596,"zero":0},
{"x":26,"trend":-0.3250537467844962,"cycle":1.5526325354000987,"orig":1.2275787886156024,"zero":0},
{"x":27,"trend":-0.24862343037191809,"cycle":1.3531781179461586,"orig":1.1045546875742405,"zero":0},
{"x":28,"trend":-0.20502296800270348,"cycle":0.37447210130833297,"orig":0.1694491333056295,"zero":0},
{"x":29,"trend":-0.19485584773269424,"cycle":0.6695624753941815,"orig":0.4747066276614872,"zero":0},
{"x":30,"trend":-0.21849151255441465,"cycle":0.402837795195785,"orig":0.18434628264137035,"zero":0},
{"x":31,"trend":-0.27588092891326743,"cycle":0.6106168798170614,"orig":0.33473595090379393,"zero":0},
{"x":32,"trend":-0.3667232896326579,"cycle":0.5350950375401693,"orig":0.16837174790751142,"zero":0},
{"x":33,"trend":-0.49033615198610575,"cycle":1.55170597171573,"orig":1.0613698197296242,"zero":0},
{"x":34,"trend":-0.6457026388486684,"cycle":1.7394044651965685,"orig":1.0937018263479001,"zero":0},
{"x":35,"trend":-0.8308360568630808,"cycle":2.291882552525202,"orig":1.461046495662121,"zero":0},
{"x":36,"trend":-1.0426625848813296,"cycle":2.9772133160525365,"orig":1.934550731171207,"zero":0},
{"x":37,"trend":-1.2766759751600745,"cycle":1.0098584984371715,"orig":-0.266817476722903,"zero":0},
{"x":38,"trend":-1.526509221633441,"cycle":0.43950519821054956,"orig":-1.0870040234228915,"zero":0},
{"x":39,"trend":-1.7851641566740317,"cycle":-0.4433632827655163,"orig":-2.228527439439548,"zero":0},
{"x":40,"trend":-2.0453679219055667,"cycle":-0.39405277801836336,"orig":-2.43942069992393,"zero":0},
{"x":41,"trend":-2.300124761003495,"cycle":-0.8216428041635333,"orig":-3.1217675651670285,"zero":0},
{"x":42,"trend":-2.542685200629529,"cycle":-1.9020095315980208,"orig":-4.44469473222755,"zero":0},
{"x":43,"trend":-2.76681329419798,"cycle":-3.504734674205323,"orig":-6.271547968403303,"zero":0},
{"x":44,"trend":-2.9674618510804103,"cycle":-3.312626050944926,"orig":-6.280087902025336,"zero":0},
{"x":45,"trend":-3.141774139819761,"cycle":-1.8711141136555316,"orig":-5.0128882534752925,"zero":0},
{"x":46,"trend":-3.2889638202408142,"cycle":-1.188794765437828,"orig":-4.477758585678642,"zero":0},
{"x":47,"trend":-3.4094139984893888,"cycle":-0.5000756350472964,"orig":-3.909489633536685,"zero":0},
{"x":48,"trend":-3.504250777439701,"cycle":-0.26345692765149575,"orig":-3.7677077050911967,"zero":0},
{"x":49,"trend":-3.5749128072378724,"cycle":-0.7201616263280863,"orig":-4.295074433565959,"zero":0},
{"x":50,"trend":-3.6230033986098062,"cycle":-0.7601530648372545,"orig":-4.383156463447061,"zero":0},
{"x":51,"trend":-3.650575963297862,"cycle":-1.917573667883909,"orig":-5.568149631181771,"zero":0},
{"x":52,"trend":-3.6601590087099236,"cycle":-1.1877774897290312,"orig":-4.847936498438955,"zero":0},
{"x":53,"trend":-3.6554795257963035,"cycle":-0.35739673536907146,"orig":-4.012876261165375,"zero":0},
{"x":54,"trend":-3.641006866438396,"cycle":-0.16945377536618578,"orig":-3.810460641804582,"zero":0},
{"x":55,"trend":-3.621433755477202,"cycle":-1.4414020712117543,"orig":-5.062835826688956,"zero":0},
{"x":56,"trend":-3.6015588263633256,"cycle":0.48992758384338364,"orig":-3.111631242519942,"zero":0},
{"x":57,"trend":-3.5870815888418788,"cycle":-0.7202791698860533,"orig":-4.307360758727932,"zero":0},
{"x":58,"trend":-3.5833953479180645,"cycle":0.3318177130319877,"orig":-3.2515776348860768,"zero":0},
{"x":59,"trend":-3.5963435830782635,"cycle":0.5888406632628769,"orig":-3.0075029198153866,"zero":0},
{"x":60,"trend":-3.631562387738216,"cycle":2.4800219579515055,"orig":-1.1515404297867105,"zero":0},
{"x":61,"trend":-3.6943198298991193,"cycle":0.7931001804282225,"orig":-2.901219649470897,"zero":0},
{"x":62,"trend":-3.788333963838454,"cycle":1.902207582582892,"orig":-1.8861263812555622,"zero":0},
{"x":63,"trend":-3.916827156220934,"cycle":1.9144256420435983,"orig":-2.0024015141773357,"zero":0},
{"x":64,"trend":-4.081832893972159,"cycle":1.2201312578782342,"orig":-2.8617016360939247,"zero":0},
{"x":65,"trend":-4.284188147991448,"cycle":1.6748895617523991,"orig":-2.6092985862390488,"zero":0},
{"x":66,"trend":-4.523967307141946,"cycle":2.5191211819803048,"orig":-2.0048461251616416,"zero":0},
{"x":67,"trend":-4.800197954310704,"cycle":1.7425742581366723,"orig":-3.0576236961740317,"zero":0},
{"x":68,"trend":-5.110333221646028,"cycle":0.4233674244049652,"orig":-4.686965797241063,"zero":0},
{"x":69,"trend":-5.450737132384893,"cycle":-0.9088176364361615,"orig":-6.359554768821055,"zero":0},
{"x":70,"trend":-5.817509105124018,"cycle":-0.589833000239838,"orig":-6.407342105363856,"zero":0},
{"x":71,"trend":-6.207316569482898,"cycle":1.9451217078179486,"orig":-4.262194861664949,"zero":0},
{"x":72,"trend":-6.617195600706177,"cycle":0.9428193913379275,"orig":-5.6743762093682495,"zero":0},
{"x":73,"trend":-7.042966572971119,"cycle":0.7505020566919018,"orig":-6.292464516279217,"zero":0},
{"x":74,"trend":-7.479860598335404,"cycle":0.5712740944479853,"orig":-6.908586503887419,"zero":0},
{"x":75,"trend":-7.922639725071268,"cycle":-0.6984670010396448,"orig":-8.621106726110913,"zero":0},
{"x":76,"trend":-8.365708955141923,"cycle":-1.2276666975080612,"orig":-9.593375652649984,"zero":0},
{"x":77,"trend":-8.803909832386227,"cycle":-1.83777432929263,"orig":-10.641684161678857,"zero":0},
{"x":78,"trend":-9.232851192328978,"cycle":-1.6385864533945131,"orig":-10.871437645723491,"zero":0},
{"x":79,"trend":-9.64929047945078,"cycle":-1.8375209923248317,"orig":-11.486811471775612,"zero":0},
{"x":80,"trend":-10.051009254765598,"cycle":-2.251530874173982,"orig":-12.30254012893958,"zero":0},
{"x":81,"trend":-10.43693752990759,"cycle":-2.1414265950136784,"orig":-12.578364124921269,"zero":0},
{"x":82,"trend":-10.807412523307278,"cycle":-1.4227367357736043,"orig":-12.230149259080882,"zero":0},
{"x":83,"trend":-11.164109845017068,"cycle":-1.01616082540232,"orig":-12.180270670419388,"zero":0},
{"x":84,"trend":-11.509594315549228,"cycle":1.397260992546121,"orig":-10.112333323003106,"zero":0},
{"x":85,"trend":-11.84706585593189,"cycle":1.3482727623535062,"orig":-10.498793093578383,"zero":0},
{"x":86,"trend":-12.178851099072839,"cycle":0.9009397427661323,"orig":-11.277911356306706,"zero":0},
{"x":87,"trend":-12.506434007403389,"cycle":0.0010082432542670716,"orig":-12.505425764149122,"zero":0},
{"x":88,"trend":-12.830735456015626,"cycle":0.17032552796213984,"orig":-12.660409928053486,"zero":0},
{"x":89,"trend":-13.152675689849582,"cycle":0.5874786432496979,"orig":-12.565197046599884,"zero":0},
{"x":90,"trend":-13.473068500390317,"cycle":-0.16806266844156426,"orig":-13.641131168831881,"zero":0},
{"x":91,"trend":-13.792360504970864,"cycle":0.8109826668914746,"orig":-12.98137783807939,"zero":0},
{"x":92,"trend":-14.111103360092029,"cycle":0.9285443134947453,"orig":-13.182559046597284,"zero":0},
{"x":93,"trend":-14.429341858087813,"cycle":0.9828965244219958,"orig":-13.446445333665817,"zero":0},
{"x":94,"trend":-14.74654045109626,"cycle":0.5578365159939072,"orig":-14.188703935102353,"zero":0},
{"x":95,"trend":-15.061549280927663,"cycle":0.05582988525801191,"orig":-15.00571939566965,"zero":0},
{"x":96,"trend":-15.372869841569825,"cycle":-1.0322640283125555,"orig":-16.40513386988238,"zero":0},
{"x":97,"trend":-15.678968733332262,"cycle":-0.12189188765914238,"orig":-15.800860620991404,"zero":0},
{"x":98,"trend":-15.978957721542182,"cycle":0.23647344516416702,"orig":-15.742484276378015,"zero":0},
{"x":99,"trend":-16.272024753956583,"cycle":1.7049263179270397,"orig":-14.567098436029543,"zero":0},
{"x":100,"trend":-16.557209982429214,"cycle":-0.6882497594200281,"orig":-17.245459741849242,"zero":0},
{"x":101,"trend":-16.832487979865128,"cycle":-1.2215261009987053,"orig":-18.054014080863833,"zero":0},
{"x":102,"trend":-17.096263475269,"cycle":-1.2931255814903082,"orig":-18.38938905675931,"zero":0},
{"x":103,"trend":-17.347704651458617,"cycle":-1.9319803261041955,"orig":-19.279684977562813,"zero":0},
{"x":104,"trend":-17.586787894740205,"cycle":-1.5284235463359046,"orig":-19.11521144107611,"zero":0},
{"x":105,"trend":-17.814697079123796,"cycle":-0.763064174691646,"orig":-18.577761253815442,"zero":0},
{"x":106,"trend":-18.03357134333587,"cycle":0.8134609320317274,"orig":-17.22011041130414,"zero":0},
{"x":107,"trend":-18.24602674121209,"cycle":-0.9264839280078121,"orig":-19.172510669219903,"zero":0},
{"x":108,"trend":-18.454170913505603,"cycle":-0.30030052099207794,"orig":-18.75447143449768,"zero":0},
{"x":109,"trend":-18.66069055342453,"cycle":0.9565340177553807,"orig":-17.70415653566915,"zero":0},
{"x":110,"trend":-18.86846004200263,"cycle":1.9764825468090734,"orig":-16.891977495193558,"zero":0},
{"x":111,"trend":-19.079755926512565,"cycle":1.7842462506662216,"orig":-17.295509675846343,"zero":0},
{"x":112,"trend":-19.29561945263523,"cycle":0.7723435764818767,"orig":-18.523275876153352,"zero":0},
{"x":113,"trend":-19.51597671214486,"cycle":0.46689801613017323,"orig":-19.049078696014686,"zero":0},
{"x":114,"trend":-19.740271082080373,"cycle":0.15109531398012876,"orig":-19.589175768100244,"zero":0},
{"x":115,"trend":-19.967654128220598,"cycle":0.7018718896499045,"orig":-19.265782238570694,"zero":0},
{"x":116,"trend":-20.19718298177315,"cycle":1.142400477983422,"orig":-19.054782503789728,"zero":0},
{"x":117,"trend":-20.42747610401462,"cycle":0.7211178564308476,"orig":-19.706358247583772,"zero":0},
{"x":118,"trend":-20.656437955922843,"cycle":-0.08220446889662725,"orig":-20.73864242481947,"zero":0},
{"x":119,"trend":-20.881522299815394,"cycle":0.7928030104933725,"orig":-20.08871928932202,"zero":0},
{"x":120,"trend":-21.100234275802897,"cycle":-0.2482886948980294,"orig":-21.348522970700927,"zero":0},
{"x":121,"trend":-21.30958352211443,"cycle":0.8659213609376089,"orig":-20.44366216117682,"zero":0},
{"x":122,"trend":-21.50673485741338,"cycle":-0.0857029043221722,"orig":-21.592437761735553,"zero":0},
{"x":123,"trend":-21.688311899512577,"cycle":-0.17771158281840727,"orig":-21.866023482330984,"zero":0},
{"x":124,"trend":-21.85099183054004,"cycle":-1.4179705511766123,"orig":-23.26896238171665,"zero":0},
{"x":125,"trend":-21.991562902363064,"cycle":-1.5427648926538389,"orig":-23.534327795016903,"zero":0},
{"x":126,"trend":-22.10769959844342,"cycle":-2.393228478887643,"orig":-24.500928077331064,"zero":0},
{"x":127,"trend":-22.198040630300774,"cycle":-1.9846215768769078,"orig":-24.182662207177682,"zero":0},
{"x":128,"trend":-22.262720477254085,"cycle":-2.014829254891467,"orig":-24.277549732145552,"zero":0},
{"x":129,"trend":-22.30311400710786,"cycle":-2.2389923548835107,"orig":-24.542106361991372,"zero":0},
{"x":130,"trend":-22.32185535595092,"cycle":-2.1630414287178823,"orig":-24.484896784668802,"zero":0},
{"x":131,"trend":-22.3229780300939,"cycle":-1.2372718891402599,"orig":-23.56024991923416,"zero":0},
{"x":132,"trend":-22.311867436740393,"cycle":0.2533371424532902,"orig":-22.058530294287102,"zero":0},
{"x":133,"trend":-22.294682278024723,"cycle":1.403960067883002,"orig":-20.89072221014172,"zero":0},
{"x":134,"trend":-22.27742292036717,"cycle":1.8319030297282914,"orig":-20.445519890638877,"zero":0},
{"x":135,"trend":-22.265212255145606,"cycle":2.1020460186357433,"orig":-20.163166236509863,"zero":0},
{"x":136,"trend":-22.26202823434431,"cycle":1.2373806598178874,"orig":-21.024647574526423,"zero":0},
{"x":137,"trend":-22.270535031185894,"cycle":2.0387133522491823,"orig":-20.23182167893671,"zero":0},
{"x":138,"trend":-22.292623455980593,"cycle":1.1391362610633067,"orig":-21.153487194917286,"zero":0},
{"x":139,"trend":-22.328910123193484,"cycle":1.8961253162071579,"orig":-20.432784806986326,"zero":0},
{"x":140,"trend":-22.37929968712648,"cycle":1.9121880541745782,"orig":-20.4671116329519,"zero":0},
{"x":141,"trend":-22.44251172375887,"cycle":1.810481644067604,"orig":-20.632030079691265,"zero":0},
{"x":142,"trend":-22.516070691536065,"cycle":1.0654457377949207,"orig":-21.450624953741144,"zero":0},
{"x":143,"trend":-22.596369497875962,"cycle":-0.11952131227855389,"orig":-22.715890810154516,"zero":0},
{"x":144,"trend":-22.67913514661034,"cycle":-0.7839371493776888,"orig":-23.463072295988027,"zero":0},
{"x":145,"trend":-22.760169342391148,"cycle":-1.2318577036270675,"orig":-23.992027046018215,"zero":0},
{"x":146,"trend":-22.83576375058871,"cycle":-0.4075700095588317,"orig":-23.243333760147543,"zero":0},
{"x":147,"trend":-22.902979947638123,"cycle":-1.1841014942983037,"orig":-24.087081441936427,"zero":0},
{"x":148,"trend":-22.959134241230466,"cycle":-0.8696200337424571,"orig":-23.828754274972923,"zero":0},
{"x":149,"trend":-23.00228300249075,"cycle":-1.2213731815836653,"orig":-24.223656184074414,"zero":0},
{"x":150,"trend":-23.03102611506509,"cycle":-1.9808371285278064,"orig":-25.011863243592895,"zero":0},
{"x":151,"trend":-23.044726820838076,"cycle":-2.4655145144041093,"orig":-25.510241335242185,"zero":0},
{"x":152,"trend":-23.043986384899654,"cycle":-1.642298115767236,"orig":-24.68628450066689,"zero":0},
{"x":153,"trend":-23.03094701891125,"cycle":0.14436227593382256,"orig":-22.886584742977426,"zero":0},
{"x":154,"trend":-23.008777370856652,"cycle":0.6277242380858148,"orig":-22.381053132770838,"zero":0},
{"x":155,"trend":-22.980555862297194,"cycle":1.2375182556218682,"orig":-21.743037606675326,"zero":0},
{"x":156,"trend":-22.948968587145398,"cycle":1.9867814072755046,"orig":-20.962187179869893,"zero":0},
{"x":157,"trend":-22.915928190404028,"cycle":2.492487673129613,"orig":-20.423440517274415,"zero":0},
{"x":158,"trend":-22.882105578696294,"cycle":2.19001820968521,"orig":-20.692087369011084,"zero":0},
{"x":159,"trend":-22.846613853849718,"cycle":0.28818196284777997,"orig":-22.558431891001938,"zero":0},
{"x":160,"trend":-22.807197356310752,"cycle":-0.177298019264434,"orig":-22.984495375575186,"zero":0},
{"x":161,"trend":-22.761420312799064,"cycle":-0.99483173448278,"orig":-23.756252047281844,"zero":0},
{"x":162,"trend":-22.70695776129635,"cycle":-0.7651249405177651,"orig":-23.472082701814116,"zero":0},
{"x":163,"trend":-22.642106509618376,"cycle":-0.2140531777487844,"orig":-22.85615968736716,"zero":0},
{"x":164,"trend":-22.565641568668724,"cycle":-1.5209657476571472,"orig":-24.08660731632587,"zero":0},
{"x":165,"trend":-22.47647173258706,"cycle":-1.5856105510983234,"orig":-24.062082283685385,"zero":0},
{"x":166,"trend":-22.374456399105334,"cycle":-1.1560887227616057,"orig":-23.53054512186694,"zero":0},
{"x":167,"trend":-22.260445972549935,"cycle":1.6538899732400694,"orig":-20.606555999309865,"zero":0},
{"x":168,"trend":-22.136013412698972,"cycle":1.7063670544266465,"orig":-20.429646358272326,"zero":0},
{"x":169,"trend":-22.00169799809727,"cycle":0.6776369945148915,"orig":-21.32406100358238,"zero":0},
{"x":170,"trend":-21.85697252788063,"cycle":-0.3596900580374438,"orig":-22.216662585918073,"zero":0},
{"x":171,"trend":-21.700886278063294,"cycle":-0.764935093251701,"orig":-22.465821371314995,"zero":0},
{"x":172,"trend":-21.532713330945782,"cycle":-0.10186033837144137,"orig":-21.634573669317223,"zero":0},
{"x":173,"trend":-21.352205853261893,"cycle":-1.6162794579032358,"orig":-22.96848531116513,"zero":0},
{"x":174,"trend":-21.15917967445691,"cycle":-0.637201896554668,"orig":-21.79638157101158,"zero":0},
{"x":175,"trend":-20.95446079863732,"cycle":-0.22698003834451086,"orig":-21.18144083698183,"zero":0},
{"x":176,"trend":-20.739273481094948,"cycle":-0.4465024723312361,"orig":-21.185775953426184,"zero":0},
{"x":177,"trend":-20.51498383964558,"cycle":-0.8113533601913794,"orig":-21.32633719983696,"zero":0},
{"x":178,"trend":-20.28323705615022,"cycle":-0.3797410921816642,"orig":-20.662978148331884,"zero":0},
{"x":179,"trend":-20.046185408319975,"cycle":-0.14353370252282716,"orig":-20.189719110842802,"zero":0},
{"x":180,"trend":-19.806218512048567,"cycle":0.8830245764434252,"orig":-18.92319393560514,"zero":0},
{"x":181,"trend":-19.565815691793787,"cycle":1.0261715885395404,"orig":-18.539644103254247,"zero":0},
{"x":182,"trend":-19.326904381653147,"cycle":1.1202498808352779,"orig":-18.20665450081787,"zero":0},
{"x":183,"trend":-19.090770658481315,"cycle":0.43264535352820843,"orig":-18.658125304953106,"zero":0},
{"x":184,"trend":-18.858000442957447,"cycle":1.5578690796451475,"orig":-17.3001313633123,"zero":0},
{"x":185,"trend":-18.628909252414736,"cycle":0.5488033645313699,"orig":-18.080105887883366,"zero":0},
{"x":186,"trend":-18.402838936011605,"cycle":1.3232612572166609,"orig":-17.079577678794944,"zero":0},
{"x":187,"trend":-18.17878834080364,"cycle":-0.6015237206404329,"orig":-18.78031206144407,"zero":0},
{"x":188,"trend":-17.954929275560684,"cycle":-1.181273949753912,"orig":-19.136203225314595,"zero":0},
{"x":189,"trend":-17.729809501377964,"cycle":0.10007531969324646,"orig":-17.629734181684718,"zero":0},
{"x":190,"trend":-17.50271507556932,"cycle":-0.9947922355476955,"orig":-18.497507311117015,"zero":0},
{"x":191,"trend":-17.272869508373763,"cycle":-0.18883595564239997,"orig":-17.461705464016163,"zero":0},
{"x":192,"trend":-17.040118055177516,"cycle":-1.5289257951526274,"orig":-18.569043850330143,"zero":0},
{"x":193,"trend":-16.80442399383908,"cycle":-1.1074383626929638,"orig":-17.911862356532044,"zero":0},
{"x":194,"trend":-16.566706180838942,"cycle":0.2918521752572474,"orig":-16.274854005581695,"zero":0},
{"x":195,"trend":-16.328575621634258,"cycle":1.7054573643720552,"orig":-14.623118257262202,"zero":0},
{"x":196,"trend":-16.09146091407264,"cycle":1.3041684784521905,"orig":-14.78729243562045,"zero":0},
{"x":197,"trend":-15.855724745148965,"cycle":0.6200452908853098,"orig":-15.235679454263655,"zero":0},
{"x":198,"trend":-15.620914696559064,"cycle":-0.8679654552831177,"orig":-16.48888015184218,"zero":0},
{"x":199,"trend":-15.386190821691951,"cycle":-0.8140202881414353,"orig":-16.200211109833386,"zero":0},
{"x":200,"trend":-15.151255652346192,"cycle":0.3380711658425479,"orig":-14.813184486503644,"zero":0}];
    const series = [{"name":"Original","color":"#1f77b4","key":"orig","dash":""},{"name":"Trend","color":"#ff7f0e","key":"trend","dash":"6,3"}];
    const bands = [];
    const refLines = [];

    const container = d3.select('#filt_tc_61');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Value') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Value');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":1,"trend":-1.5883855399178746,"cycle":2.1248027705739565,"orig":0.5364172306560819,"zero":0},
{"x":2,"trend":-1.7209318702014473,"cycle":0.16496752988742291,"orig":-1.5559643403140244,"zero":0},
{"x":3,"trend":-1.8521501987534115,"cycle":0.5143286804113956,"orig":-1.337821518342016,"zero":0},
{"x":4,"trend":-1.9806094191359795,"cycle":1.2176134279507966,"orig":-0.7629959911851829,"zero":0},
{"x":5,"trend":-2.1045569694861044,"cycle":0.484265443946148,"orig":-1.6202915255399564,"zero":0},
{"x":6,"trend":-2.2214792795482716,"cycle":0.9810547460140167,"orig":-1.240424533534255,"zero":0},
{"x":7,"trend":-2.3285601131645,"cycle":1.4924928819797447,"orig":-0.8360672311847552,"zero":0},
{"x":8,"trend":-2.4223700749605483,"cycle":2.433729515755592,"orig":0.011359440795043696,"zero":0},
{"x":9,"trend":-2.4985469615109386,"cycle":0.2358945971563493,"orig":-2.2626523643545893,"zero":0},
{"x":10,"trend":-2.5512074884428477,"cycle":-2.10225219442097,"orig":-4.653459682863818,"zero":0},
{"x":11,"trend":-2.5743209372602283,"cycle":-1.9838749139644043,"orig":-4.5581958512246326,"zero":0},
{"x":12,"trend":-2.563170497088544,"cycle":-4.291176843805295,"orig":-6.854347340893839,"zero":0},
{"x":13,"trend":-2.5142792788744894,"cycle":-4.270014480592847,"orig":-6.784293759467337,"zero":0},
{"x":14,"trend":-2.4268523790921366,"cycle":-3.0652416929439674,"orig":-5.492094072036104,"zero":0},
{"x":15,"trend":-2.3027636532659286,"cycle":-3.6775171949218373,"orig":-5.980280848187766,"zero":0},
{"x":16,"trend":-2.145802732978397,"cycle":-2.3211339895283984,"orig":-4.466936722506795,"zero":0},
{"x":17,"trend":-1.9620576980589008,"cycle":-1.2220501269782458,"orig":-3.1841078250371466,"zero":0},
{"x":18,"trend":-1.7590673370802548,"cycle":0.3678478990982965,"orig":-1.3912194379819582,"zero":0},
{"x":19,"trend":-1.5451342199446345,"cycle":0.7376339488325295,"orig":-0.807500271112105,"zero":0},
{"x":20,"trend":-1.3283310116172782,"cycle":1.3333963723630937,"orig":0.005065360745815539,"zero":0},
{"x":21,"trend":-1.116269355845405,"cycle":2.3621880441085334,"orig":1.2459186882631283,"zero":0},
{"x":22,"trend":-0.9157275236435076,"cycle":1.23887201671941,"orig":0.32314449307590243,"zero":0},
{"x":23,"trend":-0.7320074184985098,"cycle":0.445008678767814,"orig":-0.2869987397306958,"zero":0},
{"x":24,"trend":-0.5696366488868856,"cycle":1.4196507011859958,"orig":0.8500140522991102,"zero":0},
{"x":25,"trend":-0.43286469286087975,"cycle":1.5081226397123393,"orig":1.0752579468514596,"zero":0},
{"x":26,"trend":-0.3250537467844962,"cycle":1.5526325354000987,"orig":1.2275787886156024,"zero":0},
{"x":27,"trend":-0.24862343037191809,"cycle":1.3531781179461586,"orig":1.1045546875742405,"zero":0},
{"x":28,"trend":-0.20502296800270348,"cycle":0.37447210130833297,"orig":0.1694491333056295,"zero":0},
{"x":29,"trend":-0.19485584773269424,"cycle":0.6695624753941815,"orig":0.4747066276614872,"zero":0},
{"x":30,"trend":-0.21849151255441465,"cycle":0.402837795195785,"orig":0.18434628264137035,"zero":0},
{"x":31,"trend":-0.27588092891326743,"cycle":0.6106168798170614,"orig":0.33473595090379393,"zero":0},
{"x":32,"trend":-0.3667232896326579,"cycle":0.5350950375401693,"orig":0.16837174790751142,"zero":0},
{"x":33,"trend":-0.49033615198610575,"cycle":1.55170597171573,"orig":1.0613698197296242,"zero":0},
{"x":34,"trend":-0.6457026388486684,"cycle":1.7394044651965685,"orig":1.0937018263479001,"zero":0},
{"x":35,"trend":-0.8308360568630808,"cycle":2.291882552525202,"orig":1.461046495662121,"zero":0},
{"x":36,"trend":-1.0426625848813296,"cycle":2.9772133160525365,"orig":1.934550731171207,"zero":0},
{"x":37,"trend":-1.2766759751600745,"cycle":1.0098584984371715,"orig":-0.266817476722903,"zero":0},
{"x":38,"trend":-1.526509221633441,"cycle":0.43950519821054956,"orig":-1.0870040234228915,"zero":0},
{"x":39,"trend":-1.7851641566740317,"cycle":-0.4433632827655163,"orig":-2.228527439439548,"zero":0},
{"x":40,"trend":-2.0453679219055667,"cycle":-0.39405277801836336,"orig":-2.43942069992393,"zero":0},
{"x":41,"trend":-2.300124761003495,"cycle":-0.8216428041635333,"orig":-3.1217675651670285,"zero":0},
{"x":42,"trend":-2.542685200629529,"cycle":-1.9020095315980208,"orig":-4.44469473222755,"zero":0},
{"x":43,"trend":-2.76681329419798,"cycle":-3.504734674205323,"orig":-6.271547968403303,"zero":0},
{"x":44,"trend":-2.9674618510804103,"cycle":-3.312626050944926,"orig":-6.280087902025336,"zero":0},
{"x":45,"trend":-3.141774139819761,"cycle":-1.8711141136555316,"orig":-5.0128882534752925,"zero":0},
{"x":46,"trend":-3.2889638202408142,"cycle":-1.188794765437828,"orig":-4.477758585678642,"zero":0},
{"x":47,"trend":-3.4094139984893888,"cycle":-0.5000756350472964,"orig":-3.909489633536685,"zero":0},
{"x":48,"trend":-3.504250777439701,"cycle":-0.26345692765149575,"orig":-3.7677077050911967,"zero":0},
{"x":49,"trend":-3.5749128072378724,"cycle":-0.7201616263280863,"orig":-4.295074433565959,"zero":0},
{"x":50,"trend":-3.6230033986098062,"cycle":-0.7601530648372545,"orig":-4.383156463447061,"zero":0},
{"x":51,"trend":-3.650575963297862,"cycle":-1.917573667883909,"orig":-5.568149631181771,"zero":0},
{"x":52,"trend":-3.6601590087099236,"cycle":-1.1877774897290312,"orig":-4.847936498438955,"zero":0},
{"x":53,"trend":-3.6554795257963035,"cycle":-0.35739673536907146,"orig":-4.012876261165375,"zero":0},
{"x":54,"trend":-3.641006866438396,"cycle":-0.16945377536618578,"orig":-3.810460641804582,"zero":0},
{"x":55,"trend":-3.621433755477202,"cycle":-1.4414020712117543,"orig":-5.062835826688956,"zero":0},
{"x":56,"trend":-3.6015588263633256,"cycle":0.48992758384338364,"orig":-3.111631242519942,"zero":0},
{"x":57,"trend":-3.5870815888418788,"cycle":-0.7202791698860533,"orig":-4.307360758727932,"zero":0},
{"x":58,"trend":-3.5833953479180645,"cycle":0.3318177130319877,"orig":-3.2515776348860768,"zero":0},
{"x":59,"trend":-3.5963435830782635,"cycle":0.5888406632628769,"orig":-3.0075029198153866,"zero":0},
{"x":60,"trend":-3.631562387738216,"cycle":2.4800219579515055,"orig":-1.1515404297867105,"zero":0},
{"x":61,"trend":-3.6943198298991193,"cycle":0.7931001804282225,"orig":-2.901219649470897,"zero":0},
{"x":62,"trend":-3.788333963838454,"cycle":1.902207582582892,"orig":-1.8861263812555622,"zero":0},
{"x":63,"trend":-3.916827156220934,"cycle":1.9144256420435983,"orig":-2.0024015141773357,"zero":0},
{"x":64,"trend":-4.081832893972159,"cycle":1.2201312578782342,"orig":-2.8617016360939247,"zero":0},
{"x":65,"trend":-4.284188147991448,"cycle":1.6748895617523991,"orig":-2.6092985862390488,"zero":0},
{"x":66,"trend":-4.523967307141946,"cycle":2.5191211819803048,"orig":-2.0048461251616416,"zero":0},
{"x":67,"trend":-4.800197954310704,"cycle":1.7425742581366723,"orig":-3.0576236961740317,"zero":0},
{"x":68,"trend":-5.110333221646028,"cycle":0.4233674244049652,"orig":-4.686965797241063,"zero":0},
{"x":69,"trend":-5.450737132384893,"cycle":-0.9088176364361615,"orig":-6.359554768821055,"zero":0},
{"x":70,"trend":-5.817509105124018,"cycle":-0.589833000239838,"orig":-6.407342105363856,"zero":0},
{"x":71,"trend":-6.207316569482898,"cycle":1.9451217078179486,"orig":-4.262194861664949,"zero":0},
{"x":72,"trend":-6.617195600706177,"cycle":0.9428193913379275,"orig":-5.6743762093682495,"zero":0},
{"x":73,"trend":-7.042966572971119,"cycle":0.7505020566919018,"orig":-6.292464516279217,"zero":0},
{"x":74,"trend":-7.479860598335404,"cycle":0.5712740944479853,"orig":-6.908586503887419,"zero":0},
{"x":75,"trend":-7.922639725071268,"cycle":-0.6984670010396448,"orig":-8.621106726110913,"zero":0},
{"x":76,"trend":-8.365708955141923,"cycle":-1.2276666975080612,"orig":-9.593375652649984,"zero":0},
{"x":77,"trend":-8.803909832386227,"cycle":-1.83777432929263,"orig":-10.641684161678857,"zero":0},
{"x":78,"trend":-9.232851192328978,"cycle":-1.6385864533945131,"orig":-10.871437645723491,"zero":0},
{"x":79,"trend":-9.64929047945078,"cycle":-1.8375209923248317,"orig":-11.486811471775612,"zero":0},
{"x":80,"trend":-10.051009254765598,"cycle":-2.251530874173982,"orig":-12.30254012893958,"zero":0},
{"x":81,"trend":-10.43693752990759,"cycle":-2.1414265950136784,"orig":-12.578364124921269,"zero":0},
{"x":82,"trend":-10.807412523307278,"cycle":-1.4227367357736043,"orig":-12.230149259080882,"zero":0},
{"x":83,"trend":-11.164109845017068,"cycle":-1.01616082540232,"orig":-12.180270670419388,"zero":0},
{"x":84,"trend":-11.509594315549228,"cycle":1.397260992546121,"orig":-10.112333323003106,"zero":0},
{"x":85,"trend":-11.84706585593189,"cycle":1.3482727623535062,"orig":-10.498793093578383,"zero":0},
{"x":86,"trend":-12.178851099072839,"cycle":0.9009397427661323,"orig":-11.277911356306706,"zero":0},
{"x":87,"trend":-12.506434007403389,"cycle":0.0010082432542670716,"orig":-12.505425764149122,"zero":0},
{"x":88,"trend":-12.830735456015626,"cycle":0.17032552796213984,"orig":-12.660409928053486,"zero":0},
{"x":89,"trend":-13.152675689849582,"cycle":0.5874786432496979,"orig":-12.565197046599884,"zero":0},
{"x":90,"trend":-13.473068500390317,"cycle":-0.16806266844156426,"orig":-13.641131168831881,"zero":0},
{"x":91,"trend":-13.792360504970864,"cycle":0.8109826668914746,"orig":-12.98137783807939,"zero":0},
{"x":92,"trend":-14.111103360092029,"cycle":0.9285443134947453,"orig":-13.182559046597284,"zero":0},
{"x":93,"trend":-14.429341858087813,"cycle":0.9828965244219958,"orig":-13.446445333665817,"zero":0},
{"x":94,"trend":-14.74654045109626,"cycle":0.5578365159939072,"orig":-14.188703935102353,"zero":0},
{"x":95,"trend":-15.061549280927663,"cycle":0.05582988525801191,"orig":-15.00571939566965,"zero":0},
{"x":96,"trend":-15.372869841569825,"cycle":-1.0322640283125555,"orig":-16.40513386988238,"zero":0},
{"x":97,"trend":-15.678968733332262,"cycle":-0.12189188765914238,"orig":-15.800860620991404,"zero":0},
{"x":98,"trend":-15.978957721542182,"cycle":0.23647344516416702,"orig":-15.742484276378015,"zero":0},
{"x":99,"trend":-16.272024753956583,"cycle":1.7049263179270397,"orig":-14.567098436029543,"zero":0},
{"x":100,"trend":-16.557209982429214,"cycle":-0.6882497594200281,"orig":-17.245459741849242,"zero":0},
{"x":101,"trend":-16.832487979865128,"cycle":-1.2215261009987053,"orig":-18.054014080863833,"zero":0},
{"x":102,"trend":-17.096263475269,"cycle":-1.2931255814903082,"orig":-18.38938905675931,"zero":0},
{"x":103,"trend":-17.347704651458617,"cycle":-1.9319803261041955,"orig":-19.279684977562813,"zero":0},
{"x":104,"trend":-17.586787894740205,"cycle":-1.5284235463359046,"orig":-19.11521144107611,"zero":0},
{"x":105,"trend":-17.814697079123796,"cycle":-0.763064174691646,"orig":-18.577761253815442,"zero":0},
{"x":106,"trend":-18.03357134333587,"cycle":0.8134609320317274,"orig":-17.22011041130414,"zero":0},
{"x":107,"trend":-18.24602674121209,"cycle":-0.9264839280078121,"orig":-19.172510669219903,"zero":0},
{"x":108,"trend":-18.454170913505603,"cycle":-0.30030052099207794,"orig":-18.75447143449768,"zero":0},
{"x":109,"trend":-18.66069055342453,"cycle":0.9565340177553807,"orig":-17.70415653566915,"zero":0},
{"x":110,"trend":-18.86846004200263,"cycle":1.9764825468090734,"orig":-16.891977495193558,"zero":0},
{"x":111,"trend":-19.079755926512565,"cycle":1.7842462506662216,"orig":-17.295509675846343,"zero":0},
{"x":112,"trend":-19.29561945263523,"cycle":0.7723435764818767,"orig":-18.523275876153352,"zero":0},
{"x":113,"trend":-19.51597671214486,"cycle":0.46689801613017323,"orig":-19.049078696014686,"zero":0},
{"x":114,"trend":-19.740271082080373,"cycle":0.15109531398012876,"orig":-19.589175768100244,"zero":0},
{"x":115,"trend":-19.967654128220598,"cycle":0.7018718896499045,"orig":-19.265782238570694,"zero":0},
{"x":116,"trend":-20.19718298177315,"cycle":1.142400477983422,"orig":-19.054782503789728,"zero":0},
{"x":117,"trend":-20.42747610401462,"cycle":0.7211178564308476,"orig":-19.706358247583772,"zero":0},
{"x":118,"trend":-20.656437955922843,"cycle":-0.08220446889662725,"orig":-20.73864242481947,"zero":0},
{"x":119,"trend":-20.881522299815394,"cycle":0.7928030104933725,"orig":-20.08871928932202,"zero":0},
{"x":120,"trend":-21.100234275802897,"cycle":-0.2482886948980294,"orig":-21.348522970700927,"zero":0},
{"x":121,"trend":-21.30958352211443,"cycle":0.8659213609376089,"orig":-20.44366216117682,"zero":0},
{"x":122,"trend":-21.50673485741338,"cycle":-0.0857029043221722,"orig":-21.592437761735553,"zero":0},
{"x":123,"trend":-21.688311899512577,"cycle":-0.17771158281840727,"orig":-21.866023482330984,"zero":0},
{"x":124,"trend":-21.85099183054004,"cycle":-1.4179705511766123,"orig":-23.26896238171665,"zero":0},
{"x":125,"trend":-21.991562902363064,"cycle":-1.5427648926538389,"orig":-23.534327795016903,"zero":0},
{"x":126,"trend":-22.10769959844342,"cycle":-2.393228478887643,"orig":-24.500928077331064,"zero":0},
{"x":127,"trend":-22.198040630300774,"cycle":-1.9846215768769078,"orig":-24.182662207177682,"zero":0},
{"x":128,"trend":-22.262720477254085,"cycle":-2.014829254891467,"orig":-24.277549732145552,"zero":0},
{"x":129,"trend":-22.30311400710786,"cycle":-2.2389923548835107,"orig":-24.542106361991372,"zero":0},
{"x":130,"trend":-22.32185535595092,"cycle":-2.1630414287178823,"orig":-24.484896784668802,"zero":0},
{"x":131,"trend":-22.3229780300939,"cycle":-1.2372718891402599,"orig":-23.56024991923416,"zero":0},
{"x":132,"trend":-22.311867436740393,"cycle":0.2533371424532902,"orig":-22.058530294287102,"zero":0},
{"x":133,"trend":-22.294682278024723,"cycle":1.403960067883002,"orig":-20.89072221014172,"zero":0},
{"x":134,"trend":-22.27742292036717,"cycle":1.8319030297282914,"orig":-20.445519890638877,"zero":0},
{"x":135,"trend":-22.265212255145606,"cycle":2.1020460186357433,"orig":-20.163166236509863,"zero":0},
{"x":136,"trend":-22.26202823434431,"cycle":1.2373806598178874,"orig":-21.024647574526423,"zero":0},
{"x":137,"trend":-22.270535031185894,"cycle":2.0387133522491823,"orig":-20.23182167893671,"zero":0},
{"x":138,"trend":-22.292623455980593,"cycle":1.1391362610633067,"orig":-21.153487194917286,"zero":0},
{"x":139,"trend":-22.328910123193484,"cycle":1.8961253162071579,"orig":-20.432784806986326,"zero":0},
{"x":140,"trend":-22.37929968712648,"cycle":1.9121880541745782,"orig":-20.4671116329519,"zero":0},
{"x":141,"trend":-22.44251172375887,"cycle":1.810481644067604,"orig":-20.632030079691265,"zero":0},
{"x":142,"trend":-22.516070691536065,"cycle":1.0654457377949207,"orig":-21.450624953741144,"zero":0},
{"x":143,"trend":-22.596369497875962,"cycle":-0.11952131227855389,"orig":-22.715890810154516,"zero":0},
{"x":144,"trend":-22.67913514661034,"cycle":-0.7839371493776888,"orig":-23.463072295988027,"zero":0},
{"x":145,"trend":-22.760169342391148,"cycle":-1.2318577036270675,"orig":-23.992027046018215,"zero":0},
{"x":146,"trend":-22.83576375058871,"cycle":-0.4075700095588317,"orig":-23.243333760147543,"zero":0},
{"x":147,"trend":-22.902979947638123,"cycle":-1.1841014942983037,"orig":-24.087081441936427,"zero":0},
{"x":148,"trend":-22.959134241230466,"cycle":-0.8696200337424571,"orig":-23.828754274972923,"zero":0},
{"x":149,"trend":-23.00228300249075,"cycle":-1.2213731815836653,"orig":-24.223656184074414,"zero":0},
{"x":150,"trend":-23.03102611506509,"cycle":-1.9808371285278064,"orig":-25.011863243592895,"zero":0},
{"x":151,"trend":-23.044726820838076,"cycle":-2.4655145144041093,"orig":-25.510241335242185,"zero":0},
{"x":152,"trend":-23.043986384899654,"cycle":-1.642298115767236,"orig":-24.68628450066689,"zero":0},
{"x":153,"trend":-23.03094701891125,"cycle":0.14436227593382256,"orig":-22.886584742977426,"zero":0},
{"x":154,"trend":-23.008777370856652,"cycle":0.6277242380858148,"orig":-22.381053132770838,"zero":0},
{"x":155,"trend":-22.980555862297194,"cycle":1.2375182556218682,"orig":-21.743037606675326,"zero":0},
{"x":156,"trend":-22.948968587145398,"cycle":1.9867814072755046,"orig":-20.962187179869893,"zero":0},
{"x":157,"trend":-22.915928190404028,"cycle":2.492487673129613,"orig":-20.423440517274415,"zero":0},
{"x":158,"trend":-22.882105578696294,"cycle":2.19001820968521,"orig":-20.692087369011084,"zero":0},
{"x":159,"trend":-22.846613853849718,"cycle":0.28818196284777997,"orig":-22.558431891001938,"zero":0},
{"x":160,"trend":-22.807197356310752,"cycle":-0.177298019264434,"orig":-22.984495375575186,"zero":0},
{"x":161,"trend":-22.761420312799064,"cycle":-0.99483173448278,"orig":-23.756252047281844,"zero":0},
{"x":162,"trend":-22.70695776129635,"cycle":-0.7651249405177651,"orig":-23.472082701814116,"zero":0},
{"x":163,"trend":-22.642106509618376,"cycle":-0.2140531777487844,"orig":-22.85615968736716,"zero":0},
{"x":164,"trend":-22.565641568668724,"cycle":-1.5209657476571472,"orig":-24.08660731632587,"zero":0},
{"x":165,"trend":-22.47647173258706,"cycle":-1.5856105510983234,"orig":-24.062082283685385,"zero":0},
{"x":166,"trend":-22.374456399105334,"cycle":-1.1560887227616057,"orig":-23.53054512186694,"zero":0},
{"x":167,"trend":-22.260445972549935,"cycle":1.6538899732400694,"orig":-20.606555999309865,"zero":0},
{"x":168,"trend":-22.136013412698972,"cycle":1.7063670544266465,"orig":-20.429646358272326,"zero":0},
{"x":169,"trend":-22.00169799809727,"cycle":0.6776369945148915,"orig":-21.32406100358238,"zero":0},
{"x":170,"trend":-21.85697252788063,"cycle":-0.3596900580374438,"orig":-22.216662585918073,"zero":0},
{"x":171,"trend":-21.700886278063294,"cycle":-0.764935093251701,"orig":-22.465821371314995,"zero":0},
{"x":172,"trend":-21.532713330945782,"cycle":-0.10186033837144137,"orig":-21.634573669317223,"zero":0},
{"x":173,"trend":-21.352205853261893,"cycle":-1.6162794579032358,"orig":-22.96848531116513,"zero":0},
{"x":174,"trend":-21.15917967445691,"cycle":-0.637201896554668,"orig":-21.79638157101158,"zero":0},
{"x":175,"trend":-20.95446079863732,"cycle":-0.22698003834451086,"orig":-21.18144083698183,"zero":0},
{"x":176,"trend":-20.739273481094948,"cycle":-0.4465024723312361,"orig":-21.185775953426184,"zero":0},
{"x":177,"trend":-20.51498383964558,"cycle":-0.8113533601913794,"orig":-21.32633719983696,"zero":0},
{"x":178,"trend":-20.28323705615022,"cycle":-0.3797410921816642,"orig":-20.662978148331884,"zero":0},
{"x":179,"trend":-20.046185408319975,"cycle":-0.14353370252282716,"orig":-20.189719110842802,"zero":0},
{"x":180,"trend":-19.806218512048567,"cycle":0.8830245764434252,"orig":-18.92319393560514,"zero":0},
{"x":181,"trend":-19.565815691793787,"cycle":1.0261715885395404,"orig":-18.539644103254247,"zero":0},
{"x":182,"trend":-19.326904381653147,"cycle":1.1202498808352779,"orig":-18.20665450081787,"zero":0},
{"x":183,"trend":-19.090770658481315,"cycle":0.43264535352820843,"orig":-18.658125304953106,"zero":0},
{"x":184,"trend":-18.858000442957447,"cycle":1.5578690796451475,"orig":-17.3001313633123,"zero":0},
{"x":185,"trend":-18.628909252414736,"cycle":0.5488033645313699,"orig":-18.080105887883366,"zero":0},
{"x":186,"trend":-18.402838936011605,"cycle":1.3232612572166609,"orig":-17.079577678794944,"zero":0},
{"x":187,"trend":-18.17878834080364,"cycle":-0.6015237206404329,"orig":-18.78031206144407,"zero":0},
{"x":188,"trend":-17.954929275560684,"cycle":-1.181273949753912,"orig":-19.136203225314595,"zero":0},
{"x":189,"trend":-17.729809501377964,"cycle":0.10007531969324646,"orig":-17.629734181684718,"zero":0},
{"x":190,"trend":-17.50271507556932,"cycle":-0.9947922355476955,"orig":-18.497507311117015,"zero":0},
{"x":191,"trend":-17.272869508373763,"cycle":-0.18883595564239997,"orig":-17.461705464016163,"zero":0},
{"x":192,"trend":-17.040118055177516,"cycle":-1.5289257951526274,"orig":-18.569043850330143,"zero":0},
{"x":193,"trend":-16.80442399383908,"cycle":-1.1074383626929638,"orig":-17.911862356532044,"zero":0},
{"x":194,"trend":-16.566706180838942,"cycle":0.2918521752572474,"orig":-16.274854005581695,"zero":0},
{"x":195,"trend":-16.328575621634258,"cycle":1.7054573643720552,"orig":-14.623118257262202,"zero":0},
{"x":196,"trend":-16.09146091407264,"cycle":1.3041684784521905,"orig":-14.78729243562045,"zero":0},
{"x":197,"trend":-15.855724745148965,"cycle":0.6200452908853098,"orig":-15.235679454263655,"zero":0},
{"x":198,"trend":-15.620914696559064,"cycle":-0.8679654552831177,"orig":-16.48888015184218,"zero":0},
{"x":199,"trend":-15.386190821691951,"cycle":-0.8140202881414353,"orig":-16.200211109833386,"zero":0},
{"x":200,"trend":-15.151255652346192,"cycle":0.3380711658425479,"orig":-14.813184486503644,"zero":0}];
    const series = [{"name":"Cycle","color":"#2ca02c","key":"cycle","dash":""}];
    const bands = [];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#filt_cy_62');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('Cycle') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Cycle');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

</script>
</body>
</html>