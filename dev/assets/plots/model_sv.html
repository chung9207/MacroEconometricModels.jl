<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Stochastic Volatility Model — Diagnostic Plots</title>
<style>* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #fff;
    color: #333;
    padding: 20px;
}
.figure-title {
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 16px;
    color: #222;
}
.figure-source {
    font-size: 11px;
    color: #888;
    text-align: center;
    margin-top: 8px;
}
.panel-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
}
.panel {
    width: calc(100% - 16px);
    min-width: 300px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 12px;
}
.panel-title {
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 8px;
    color: #444;
}
.axis text { font-size: 11px; fill: #666; }
.axis line, .axis path { stroke: #ccc; }
.grid line { stroke: #f0f0f0; stroke-dasharray: 2,2; }
.grid .domain { stroke: none; }
.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    z-index: 1000;
}
.legend { font-size: 11px; }
.legend rect { rx: 2; }
svg { overflow: visible; }
</style>
</head>
<body>
<div class="figure-title">Stochastic Volatility Model — Diagnostic Plots</div>
<div class="panel-grid">
<div class="panel">
<div class="panel-title">Returns</div>
<div id="sv_ret_84"></div>
</div>
<div class="panel">
<div class="panel-title">Stochastic Volatility</div>
<div id="sv_vol_85"></div>
</div>
<div class="panel">
<div class="panel-title">Standardized Residuals</div>
<div id="sv_zr_86"></div>
</div>
</div>

<div class="tooltip" id="tooltip"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script>
// Shared utilities
const tooltip = d3.select('#tooltip');
function fmt(v) {
    if (v === null || v === undefined) return '';
    return Math.abs(v) >= 1000 ? v.toFixed(1) : (Math.abs(v) >= 1 ? v.toFixed(3) : v.toFixed(4));
}
function showTip(evt, html) {
    tooltip.html(html).style('opacity',1)
        .style('left',(evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px');
}
function hideTip() { tooltip.style('opacity',0); }

(function() {
    const data = [{"x":1,"ret":0.2088332105422406,"vol_mean":0.9429135212758868,"std_resid":0.22147652550327376,"q1":0.7248570071258801,"q2":0.9303695862633153,"q3":1.1867570981617124},
{"x":2,"ret":0.4384722422321556,"vol_mean":0.9417216688642108,"std_resid":0.4656070437043113,"q1":0.7300512848110202,"q2":0.9293365453310337,"q3":1.1752386758105615},
{"x":3,"ret":0.4725842035933498,"vol_mean":0.9425243819120511,"std_resid":0.5014026296430044,"q1":0.7435262946402053,"q2":0.9286237832473603,"q3":1.1780413057190355},
{"x":4,"ret":1.6201447720624402,"vol_mean":0.9462825976839138,"std_resid":1.7121151504083945,"q1":0.7482729814049173,"q2":0.9329704094575311,"q3":1.1751682724404184},
{"x":5,"ret":0.28045405795416234,"vol_mean":0.9418779693553612,"std_resid":0.2977605030364075,"q1":0.742233284390177,"q2":0.9280765846367496,"q3":1.1686756276432566},
{"x":6,"ret":1.2983159215175022,"vol_mean":0.9418335159766515,"std_resid":1.3784983221489944,"q1":0.7482482124144146,"q2":0.927864141106228,"q3":1.1663041753714363},
{"x":7,"ret":-0.01987996243675271,"vol_mean":0.9373606550313351,"std_resid":-0.0212084455753993,"q1":0.738743668637602,"q2":0.9242463618343842,"q3":1.1601984470907243},
{"x":8,"ret":0.21824565572954072,"vol_mean":0.9351699451037727,"std_resid":0.23337539542646735,"q1":0.7433352294150543,"q2":0.923257891359834,"q3":1.1559219826078464},
{"x":9,"ret":0.25509660863237965,"vol_mean":0.9348644793823507,"std_resid":0.27287014776828156,"q1":0.7415127287286629,"q2":0.9236580703898575,"q3":1.1556344171896473},
{"x":10,"ret":-0.11999203046929163,"vol_mean":0.9375265218175804,"std_resid":-0.12798787839800346,"q1":0.7474386609362612,"q2":0.9255278034200293,"q3":1.1548496298422268},
{"x":11,"ret":-0.7174524918352548,"vol_mean":0.9401171355135414,"std_resid":-0.7631522336238926,"q1":0.7568315250789027,"q2":0.9279251656879792,"q3":1.154840794187391},
{"x":12,"ret":-0.21424087596888453,"vol_mean":0.9460128809138965,"std_resid":-0.22646718696041113,"q1":0.7601483772721638,"q2":0.9336680193506524,"q3":1.1625281767877975},
{"x":13,"ret":-0.4694096628322326,"vol_mean":0.9550362672346415,"std_resid":-0.49150977710138,"q1":0.7643222332356912,"q2":0.9394390228927934,"q3":1.1810979598814313},
{"x":14,"ret":1.5834667570079413,"vol_mean":0.9661672980394491,"std_resid":1.6389157035444264,"q1":0.7833389513156154,"q2":0.9500365777561,"q3":1.2087376222575814},
{"x":15,"ret":0.6132359583166904,"vol_mean":0.9724025264155485,"std_resid":0.6306400298826753,"q1":0.795681869048061,"q2":0.9564641392329147,"q3":1.2054407938316092},
{"x":16,"ret":-1.59366826383876,"vol_mean":0.9824557829855111,"std_resid":-1.6221272157367543,"q1":0.8073509680289646,"q2":0.9645833350667077,"q3":1.214798252448206},
{"x":17,"ret":-1.518919919412247,"vol_mean":0.9856876830769661,"std_resid":-1.540974839688287,"q1":0.8147822528189089,"q2":0.9705266372504486,"q3":1.2076219154985848},
{"x":18,"ret":1.3585377890997221,"vol_mean":0.986102349128575,"std_resid":1.377684365421369,"q1":0.8098996147793921,"q2":0.9688453030200872,"q3":1.1966832202546958},
{"x":19,"ret":-0.4835243227290544,"vol_mean":0.9869086547713657,"std_resid":-0.48993827381225175,"q1":0.810414670416662,"q2":0.971234824166134,"q3":1.2013066144620914},
{"x":20,"ret":-2.250502757283063,"vol_mean":0.9879283526029327,"std_resid":-2.278001994125968,"q1":0.8068687857256499,"q2":0.9717365615502475,"q3":1.2082537088032126},
{"x":21,"ret":0.3193832464242711,"vol_mean":0.9757977523950714,"std_resid":0.3273047572003039,"q1":0.8012297106627061,"q2":0.9622860022963725,"q3":1.1812790256188939},
{"x":22,"ret":-0.70656180301821,"vol_mean":0.9677345023059661,"std_resid":-0.730119471130335,"q1":0.7919912384358448,"q2":0.9567312696200635,"q3":1.1771021038117284},
{"x":23,"ret":-0.5381929256618667,"vol_mean":0.9616683819610192,"std_resid":-0.5596450249974863,"q1":0.7922781385158937,"q2":0.9472727100541936,"q3":1.1779511332217796},
{"x":24,"ret":-0.1561158927236592,"vol_mean":0.9582525988696764,"std_resid":-0.16291726514262359,"q1":0.7813135152654467,"q2":0.943994215532977,"q3":1.17983966823213},
{"x":25,"ret":0.6037225274273443,"vol_mean":0.9577202240012332,"std_resid":0.6303746253838813,"q1":0.7814285635636663,"q2":0.942834674832653,"q3":1.1854069883497504},
{"x":26,"ret":1.2657433557326152,"vol_mean":0.9566922693208041,"std_resid":1.3230412707643382,"q1":0.7807724620050549,"q2":0.9418493566532607,"q3":1.1909543577597972},
{"x":27,"ret":-1.1505071143854853,"vol_mean":0.9540870517437259,"std_resid":-1.205872265306163,"q1":0.7785296951917018,"q2":0.9402552146709101,"q3":1.159611495424805},
{"x":28,"ret":-0.9158592464479492,"vol_mean":0.9522929890730326,"std_resid":-0.9617410365894343,"q1":0.7686560176656045,"q2":0.9398897146305825,"q3":1.159466507701581},
{"x":29,"ret":0.5879337179676579,"vol_mean":0.9486931770110262,"std_resid":0.6197301005368405,"q1":0.7726566304300222,"q2":0.9362825842868723,"q3":1.1600971251933447},
{"x":30,"ret":-0.41282154828080614,"vol_mean":0.9420921417811711,"std_resid":-0.4381965733206341,"q1":0.7651498064493177,"q2":0.9286099934789303,"q3":1.1468477414378673},
{"x":31,"ret":-0.2429218347940629,"vol_mean":0.941361714863208,"std_resid":-0.2580536588205763,"q1":0.7657586703652967,"q2":0.9265207761819332,"q3":1.156315038325339},
{"x":32,"ret":-0.03516866082973856,"vol_mean":0.941406113087924,"std_resid":-0.03735758706131743,"q1":0.7552578154162409,"q2":0.9308191786075422,"q3":1.1442748569326116},
{"x":33,"ret":-1.1741778355680308,"vol_mean":0.9446237829708322,"std_resid":-1.2430110873084874,"q1":0.7634925651413128,"q2":0.9340075944599076,"q3":1.1521683823278455},
{"x":34,"ret":1.2286976023402392,"vol_mean":0.9481451009461028,"std_resid":1.2958961672788143,"q1":0.7744409088569797,"q2":0.9374590729149838,"q3":1.1527800084589932},
{"x":35,"ret":0.36443715993347037,"vol_mean":0.9483925277750356,"std_resid":0.3842682742223345,"q1":0.7752505041582413,"q2":0.9356029367628229,"q3":1.1749874916527652},
{"x":36,"ret":0.863519047346861,"vol_mean":0.9519361320891904,"std_resid":0.9071186797497826,"q1":0.7669122140208472,"q2":0.9393549267870003,"q3":1.173615834346141},
{"x":37,"ret":-0.6110236695657176,"vol_mean":0.954007775240947,"std_resid":-0.6404808067852441,"q1":0.7781376046956759,"q2":0.9396065379204683,"q3":1.1725357603859219},
{"x":38,"ret":-1.0731628669281819,"vol_mean":0.9581039723600435,"std_resid":-1.120090196771359,"q1":0.7741086409766718,"q2":0.9446810856410381,"q3":1.1867485891824807},
{"x":39,"ret":-0.558994605387216,"vol_mean":0.9579029346931545,"std_resid":-0.5835608026049937,"q1":0.7782939774146848,"q2":0.9465618109385694,"q3":1.1802992650233632},
{"x":40,"ret":0.05819751744237116,"vol_mean":0.9583273710343504,"std_resid":0.0607282221101093,"q1":0.7738758832021834,"q2":0.9449037429602621,"q3":1.1829022904507553},
{"x":41,"ret":1.5143016801942752,"vol_mean":0.9630060802877939,"std_resid":1.5724736439272813,"q1":0.7818025017629732,"q2":0.9492181613705908,"q3":1.189366239371561},
{"x":42,"ret":-0.6268646591147701,"vol_mean":0.9639177610507106,"std_resid":-0.6503300223781139,"q1":0.7934360271884926,"q2":0.9492685814908174,"q3":1.1777394792380216},
{"x":43,"ret":-1.1987953363968185,"vol_mean":0.9660976560931396,"std_resid":-1.2408635181299363,"q1":0.794041937968595,"q2":0.9504321377381891,"q3":1.184313739776717},
{"x":44,"ret":1.899472039842352,"vol_mean":0.969982047843942,"std_resid":1.9582548399369482,"q1":0.7999478346985482,"q2":0.953729936990278,"q3":1.1907496338543628},
{"x":45,"ret":-0.09971254641057269,"vol_mean":0.964159707347914,"std_resid":-0.10341911786051408,"q1":0.7921071303853265,"q2":0.9492939916436218,"q3":1.1887342644341543},
{"x":46,"ret":0.009760745845731295,"vol_mean":0.9646244629202392,"std_resid":0.01011870030351736,"q1":0.7935332759291368,"q2":0.9522526738778956,"q3":1.1838030572924145},
{"x":47,"ret":1.545285105465797,"vol_mean":0.9667084331283129,"std_resid":1.5985017327977407,"q1":0.79891642827304,"q2":0.9525710000363014,"q3":1.1763190505254832},
{"x":48,"ret":-1.4799904964815829,"vol_mean":0.9629569952531172,"std_resid":-1.5369227325593717,"q1":0.7847153230480196,"q2":0.9498646399500412,"q3":1.1723157633186372},
{"x":49,"ret":0.6579032422092371,"vol_mean":0.9557310958380254,"std_resid":0.6883769347615082,"q1":0.7786216179375608,"q2":0.9413208899432245,"q3":1.1749773777325958},
{"x":50,"ret":0.018781499514349355,"vol_mean":0.9471022915567806,"std_resid":0.01983048682468885,"q1":0.7623668990344401,"q2":0.9350293937028231,"q3":1.1606172200519624},
{"x":51,"ret":0.43823774231229634,"vol_mean":0.9443321074529656,"std_resid":0.46407163205993573,"q1":0.7636096654673704,"q2":0.932121389158211,"q3":1.156400607662492},
{"x":52,"ret":-0.8184545502763483,"vol_mean":0.9434650953010361,"std_resid":-0.8674984950187267,"q1":0.7504226454916136,"q2":0.9313858729718021,"q3":1.160228128916636},
{"x":53,"ret":-0.4364375470212315,"vol_mean":0.9429369593254989,"std_resid":-0.4628491254955408,"q1":0.7545294804663623,"q2":0.930180375621223,"q3":1.1491775299014306},
{"x":54,"ret":1.5083581349182493,"vol_mean":0.945529085421949,"std_resid":1.595253026241,"q1":0.7616633996765513,"q2":0.9318871791681066,"q3":1.1528716219539827},
{"x":55,"ret":-0.399833933142405,"vol_mean":0.9416776379623438,"std_resid":-0.4245974599201364,"q1":0.7531856397642895,"q2":0.929096499725269,"q3":1.157793559695274},
{"x":56,"ret":0.6776588566587324,"vol_mean":0.9375516147690448,"std_resid":0.7227963196732011,"q1":0.7465654861007406,"q2":0.9264103952716762,"q3":1.1654218156976233},
{"x":57,"ret":-0.25870957887814156,"vol_mean":0.9376662538742846,"std_resid":-0.2759079553190654,"q1":0.7481373059207516,"q2":0.9251748878403896,"q3":1.1679381828138973},
{"x":58,"ret":-0.3325448241067508,"vol_mean":0.9372849456973673,"std_resid":-0.35479586611660313,"q1":0.7445818710397604,"q2":0.9263082510424745,"q3":1.1660850185697431},
{"x":59,"ret":-0.7045956337428738,"vol_mean":0.9383080444111037,"std_resid":-0.750921446256052,"q1":0.7482957307281007,"q2":0.927480446705504,"q3":1.151585575999288},
{"x":60,"ret":-0.475919965044083,"vol_mean":0.940208854922097,"std_resid":-0.5061853678069393,"q1":0.7516273880334411,"q2":0.9265860695125486,"q3":1.1562694663024418},
{"x":61,"ret":-0.1609112014771097,"vol_mean":0.9416532852254648,"std_resid":-0.17088158030328743,"q1":0.7621395656832199,"q2":0.929538478183781,"q3":1.1551170734564866},
{"x":62,"ret":0.6167444193105983,"vol_mean":0.9489174657421934,"std_resid":0.6499452708758113,"q1":0.7593485940564028,"q2":0.9384796210798269,"q3":1.162038215466939},
{"x":63,"ret":1.656725291225609,"vol_mean":0.9550721008347052,"std_resid":1.7346599170656114,"q1":0.7718454111671883,"q2":0.9425029600634264,"q3":1.1709776440560669},
{"x":64,"ret":-1.115507949315443,"vol_mean":0.9562553914001221,"std_resid":-1.1665376837061778,"q1":0.77858868906047,"q2":0.9430186700503252,"q3":1.1627356351934324},
{"x":65,"ret":-1.0786607458137447,"vol_mean":0.9554537146793665,"std_resid":-1.1289513340536066,"q1":0.768099183413625,"q2":0.9429800426124729,"q3":1.1620350495204366},
{"x":66,"ret":0.8024570646067546,"vol_mean":0.9520336434222335,"std_resid":0.8428872972620982,"q1":0.7692583524639514,"q2":0.9371574230001702,"q3":1.1698419980715327},
{"x":67,"ret":0.8848294326243195,"vol_mean":0.9526346239697789,"std_resid":0.9288235073139537,"q1":0.7695910331013259,"q2":0.9396159400391628,"q3":1.1776258169781864},
{"x":68,"ret":-1.0237559862922225,"vol_mean":0.95223632800528,"std_resid":-1.075107046626503,"q1":0.7619770411837193,"q2":0.9385410705698497,"q3":1.163078629717284},
{"x":69,"ret":0.19164735276562897,"vol_mean":0.94983042365237,"std_resid":0.2017700717868038,"q1":0.760426268755015,"q2":0.937149050141885,"q3":1.1754698142989102},
{"x":70,"ret":0.13301422503123553,"vol_mean":0.9486022794105253,"std_resid":0.1402212791581024,"q1":0.7693556933708176,"q2":0.9331449747170594,"q3":1.1680837986736679},
{"x":71,"ret":-0.4792172281770884,"vol_mean":0.9513350498950768,"std_resid":-0.5037312860804839,"q1":0.7741694421866929,"q2":0.9378576530678584,"q3":1.169579852927933},
{"x":72,"ret":0.2939583971472789,"vol_mean":0.9554140949934251,"std_resid":0.30767642919199534,"q1":0.7809685767865387,"q2":0.9433198342828052,"q3":1.1606140026364018},
{"x":73,"ret":-1.0602586327856445,"vol_mean":0.961431564646251,"std_resid":-1.1027915784892666,"q1":0.7886191468662785,"q2":0.9456781101172519,"q3":1.1810716402961743},
{"x":74,"ret":-0.026493476200401492,"vol_mean":0.9666032346111884,"std_resid":-0.02740884289618415,"q1":0.7959623383215363,"q2":0.9500705503325416,"q3":1.178541090535235},
{"x":75,"ret":1.644352653793086,"vol_mean":0.9771218063112367,"std_resid":1.6828532974826684,"q1":0.8064558311749117,"q2":0.9629183517794436,"q3":1.2057708869793664},
{"x":76,"ret":-1.272674368713393,"vol_mean":0.9824714955680397,"std_resid":-1.2953804506842872,"q1":0.8119095140737703,"q2":0.9646882603766977,"q3":1.2166193088352972},
{"x":77,"ret":-0.34438109788519616,"vol_mean":0.988038761665152,"std_resid":-0.34855018977677266,"q1":0.8144938632637411,"q2":0.9715713346408837,"q3":1.2192360646873752},
{"x":78,"ret":1.2497844874830284,"vol_mean":0.9956046239210637,"std_resid":1.2553020119180536,"q1":0.8255996937162804,"q2":0.975644623989724,"q3":1.2280134475550322},
{"x":79,"ret":1.007692869460378,"vol_mean":0.999511838011172,"std_resid":1.0081850270682982,"q1":0.8259606464916898,"q2":0.9783103548725572,"q3":1.2308714484165304},
{"x":80,"ret":-2.183101935152624,"vol_mean":1.0054725579131227,"std_resid":-2.171219809005721,"q1":0.8335522182192021,"q2":0.9856054835447486,"q3":1.2478176959825362},
{"x":81,"ret":-1.95694257620551,"vol_mean":1.002331453615531,"std_resid":-1.9523906679238499,"q1":0.8319355610967052,"q2":0.9830702889504326,"q3":1.2335863758863972},
{"x":82,"ret":0.5115918005306112,"vol_mean":0.9905277722354218,"std_resid":0.516484055137648,"q1":0.8124166359066657,"q2":0.9735445024809378,"q3":1.2311990143748113},
{"x":83,"ret":0.7868160673314945,"vol_mean":0.9836369212710134,"std_resid":0.7999049754199999,"q1":0.8108319114191166,"q2":0.9650701591620433,"q3":1.228899153187797},
{"x":84,"ret":-0.4318914694159917,"vol_mean":0.974773602272835,"std_resid":-0.44306849140043403,"q1":0.7911043762021377,"q2":0.959516187479846,"q3":1.2063926555929902},
{"x":85,"ret":0.08450767412628944,"vol_mean":0.972095843372472,"std_resid":0.08693347955599595,"q1":0.7863475423509592,"q2":0.9574720740168661,"q3":1.1961363896320554},
{"x":86,"ret":0.3627089596358936,"vol_mean":0.9693065338659728,"std_resid":0.37419427906801445,"q1":0.7897381199069776,"q2":0.9545291952903061,"q3":1.197238038321309},
{"x":87,"ret":0.4057153815080021,"vol_mean":0.9701064179309302,"std_resid":0.4182173976060514,"q1":0.7943401949977912,"q2":0.9539378353557811,"q3":1.1925876154786377},
{"x":88,"ret":0.648356747464586,"vol_mean":0.9773756268238578,"std_resid":0.6633649639612229,"q1":0.7998476112872701,"q2":0.9600444120909128,"q3":1.2200841765204817},
{"x":89,"ret":-2.3422253505792994,"vol_mean":0.9870209997007825,"std_resid":-2.373024840696753,"q1":0.809823138060402,"q2":0.9672451616574521,"q3":1.225839576408786},
{"x":90,"ret":0.058537307292524224,"vol_mean":0.9802585985237515,"std_resid":0.0597161885452269,"q1":0.8007744396478377,"q2":0.961697727981737,"q3":1.2173032513629076},
{"x":91,"ret":1.2407776250140905,"vol_mean":0.9769356579040368,"std_resid":1.2700709765022935,"q1":0.793083345841161,"q2":0.9601334745517974,"q3":1.2044537976144196},
{"x":92,"ret":-0.671120074880389,"vol_mean":0.9743159302765836,"std_resid":-0.688811558987725,"q1":0.7920402235185252,"q2":0.959151812207146,"q3":1.2018048666482568},
{"x":93,"ret":0.6545125074113552,"vol_mean":0.971830931166818,"std_resid":0.6734839223788875,"q1":0.7826929906023993,"q2":0.9542777817622681,"q3":1.2011287216312367},
{"x":94,"ret":1.4627322738064892,"vol_mean":0.9715531536496936,"std_resid":1.5055607285218042,"q1":0.7783294948573336,"q2":0.9557256353526267,"q3":1.2092002107830562},
{"x":95,"ret":-0.4026323321259725,"vol_mean":0.9673387757981811,"std_resid":-0.4162268092620893,"q1":0.7658613261593078,"q2":0.954178759474159,"q3":1.2026488731167704},
{"x":96,"ret":0.2478964729796932,"vol_mean":0.9638536319624512,"std_resid":0.2571930682825403,"q1":0.7660676587775122,"q2":0.9503017067911885,"q3":1.1965991087649197},
{"x":97,"ret":0.6378644683857844,"vol_mean":0.9644075399847117,"std_resid":0.6614055178331518,"q1":0.7824719662520652,"q2":0.949376118824337,"q3":1.1940708445437642},
{"x":98,"ret":-1.0784077774543137,"vol_mean":0.9672305291154472,"std_resid":-1.1149438990935703,"q1":0.785766249991355,"q2":0.9494127883737509,"q3":1.1842833935475008},
{"x":99,"ret":0.6661928537123607,"vol_mean":0.9679596857519097,"std_resid":0.6882444212486629,"q1":0.7872861535156577,"q2":0.9509585293405128,"q3":1.1913884593860782},
{"x":100,"ret":-1.3601924980733364,"vol_mean":0.9708883807014335,"std_resid":-1.4009772133544787,"q1":0.7857748890031012,"q2":0.9541234934610336,"q3":1.2127957513548666},
{"x":101,"ret":0.5950165375641198,"vol_mean":0.9709116411621315,"std_resid":0.6128431386937697,"q1":0.7827570471818464,"q2":0.9557335237738608,"q3":1.212639654366857},
{"x":102,"ret":-0.14126834445413233,"vol_mean":0.9703658962854441,"std_resid":-0.14558255292658867,"q1":0.7899524497619902,"q2":0.954278594999521,"q3":1.2044509911212116},
{"x":103,"ret":-1.3546396920477852,"vol_mean":0.9769800961439773,"std_resid":-1.3865581268179208,"q1":0.7871173684659191,"q2":0.957720318818139,"q3":1.2250295827328814},
{"x":104,"ret":-0.7149103634153315,"vol_mean":0.9785078030546952,"std_resid":-0.7306128384296293,"q1":0.7905008626839208,"q2":0.9604241977349154,"q3":1.2366968114363397},
{"x":105,"ret":-0.30829894213322245,"vol_mean":0.9787152265002053,"std_resid":-0.31500372507299274,"q1":0.7852250620793824,"q2":0.9570510101313988,"q3":1.235402255503482},
{"x":106,"ret":-0.5558008236381837,"vol_mean":0.983789886527942,"std_resid":-0.5649588710448669,"q1":0.7828510345291099,"q2":0.9628314437276114,"q3":1.2348182114060895},
{"x":107,"ret":0.11842629292379253,"vol_mean":0.988891972600586,"std_resid":0.11975655198449565,"q1":0.7998489732976901,"q2":0.9675400275246447,"q3":1.2537540636407167},
{"x":108,"ret":1.4784668469101363,"vol_mean":0.9993213858209589,"std_resid":1.479470836797465,"q1":0.8118129644586488,"q2":0.9763044553317617,"q3":1.2610748928567073},
{"x":109,"ret":0.3450991513310631,"vol_mean":1.007835954806767,"std_resid":0.3424159950685915,"q1":0.8219370224536734,"q2":0.985495523383395,"q3":1.2808415701897238},
{"x":110,"ret":-0.7875438839569323,"vol_mean":1.0172541579382626,"std_resid":-0.7741859571781947,"q1":0.8331307729652372,"q2":0.9936388473965428,"q3":1.280264723580186},
{"x":111,"ret":-2.459079052486651,"vol_mean":1.0306688401742172,"std_resid":-2.3859060802410452,"q1":0.8488103578597462,"q2":1.0057465434233839,"q3":1.301684261757103},
{"x":112,"ret":1.985713821808472,"vol_mean":1.0323126823326298,"std_resid":1.9235584874551013,"q1":0.8431531192996138,"q2":1.0052869303486878,"q3":1.303279901484109},
{"x":113,"ret":0.32277864640718545,"vol_mean":1.0236809343188944,"std_resid":0.3153117691128497,"q1":0.8418801897858779,"q2":0.9990422697342074,"q3":1.2899780312658846},
{"x":114,"ret":1.8546881587438901,"vol_mean":1.0221804023789136,"std_resid":1.8144430811112078,"q1":0.8427969138277471,"q2":0.9996529959040753,"q3":1.2752957535852203},
{"x":115,"ret":1.6327579825632743,"vol_mean":1.0147666312499972,"std_resid":1.608998495104269,"q1":0.8302037650109855,"q2":0.9940822935988689,"q3":1.257609398131322},
{"x":116,"ret":0.23699866408894116,"vol_mean":1.004309981284909,"std_resid":0.23598158786167422,"q1":0.8273813100469406,"q2":0.983309256848725,"q3":1.2370169041293124},
{"x":117,"ret":0.1938232907826632,"vol_mean":0.9961640539079374,"std_resid":0.19456964946917849,"q1":0.8173610729081539,"q2":0.9756734091157384,"q3":1.2412350593633725},
{"x":118,"ret":0.9690563038822385,"vol_mean":0.9899343031721718,"std_resid":0.9789097122677421,"q1":0.8142852317254575,"q2":0.9701033508293085,"q3":1.2231257072632866},
{"x":119,"ret":-1.0490474709800932,"vol_mean":0.9857770086751222,"std_resid":-1.064183341413091,"q1":0.8083673448328096,"q2":0.9686812502168258,"q3":1.2115459794222583},
{"x":120,"ret":-0.7696881032986889,"vol_mean":0.9792016012241623,"std_resid":-0.786036401836407,"q1":0.7964753628946457,"q2":0.9637753324468736,"q3":1.2127486540053805},
{"x":121,"ret":-0.42308277859212345,"vol_mean":0.9753789842485835,"std_resid":-0.43376245072376635,"q1":0.7942742677018384,"q2":0.9593396921037933,"q3":1.2058368749885184},
{"x":122,"ret":0.30928199837740133,"vol_mean":0.9739013813708068,"std_resid":0.31757014035864084,"q1":0.7939583503117627,"q2":0.956374516490287,"q3":1.2064903315354507},
{"x":123,"ret":0.8904646200777416,"vol_mean":0.9759529499030978,"std_resid":0.9124052754450466,"q1":0.7957361722962866,"q2":0.959952783353572,"q3":1.2091560711788114},
{"x":124,"ret":-0.9264139330741645,"vol_mean":0.9804682351556411,"std_resid":-0.9448688900432395,"q1":0.805910380927051,"q2":0.9638156175446492,"q3":1.2058124195580857},
{"x":125,"ret":0.9791979163882076,"vol_mean":0.983401134751698,"std_resid":0.9957258353534932,"q1":0.8090726343876735,"q2":0.9685754219336465,"q3":1.2087333012448593},
{"x":126,"ret":-1.3828053601964323,"vol_mean":0.9882093118628015,"std_resid":-1.399304118668753,"q1":0.8205000378871616,"q2":0.9744044314067903,"q3":1.2091082279851726},
{"x":127,"ret":-1.986484629440342,"vol_mean":0.9917418254766676,"std_resid":-2.003025967454347,"q1":0.827083713135169,"q2":0.9760358567090378,"q3":1.2233337474587216},
{"x":128,"ret":-0.8566022313678463,"vol_mean":0.9867935363702771,"std_resid":-0.868066317619678,"q1":0.8182645696354549,"q2":0.9725696771818777,"q3":1.2079793539252008},
{"x":129,"ret":-0.5228187593686185,"vol_mean":0.9827412666476562,"std_resid":-0.5320004126335988,"q1":0.8100327135225148,"q2":0.9676467308416207,"q3":1.1975448755845577},
{"x":130,"ret":0.38699283912599847,"vol_mean":0.9821055020705409,"std_resid":0.3940440597370793,"q1":0.8099298727704431,"q2":0.9679175094132016,"q3":1.2018659112211916},
{"x":131,"ret":0.6311105096037605,"vol_mean":0.9841307790886903,"std_resid":0.6412872384584616,"q1":0.8048681082955133,"q2":0.9697893876734451,"q3":1.2138390025460495},
{"x":132,"ret":-2.2156582542334338,"vol_mean":0.9886365105779351,"std_resid":-2.2411252573892995,"q1":0.8107641421908093,"q2":0.9745741671594426,"q3":1.2163830416194397},
{"x":133,"ret":0.22006438651225776,"vol_mean":0.9843044397016576,"std_resid":0.2235734978285369,"q1":0.801308370547954,"q2":0.9671244318524139,"q3":1.222920422751869},
{"x":134,"ret":-1.2966962818325518,"vol_mean":0.9807817976530768,"std_resid":-1.322104758607297,"q1":0.8033007687959149,"q2":0.9642277599924436,"q3":1.214973161205799},
{"x":135,"ret":0.12913907274949055,"vol_mean":0.9715809525873131,"std_resid":0.13291643110704685,"q1":0.7937482032620649,"q2":0.9543910590354483,"q3":1.1945562640930631},
{"x":136,"ret":-0.6706073470895847,"vol_mean":0.9724765091876787,"std_resid":-0.6895871938847665,"q1":0.7897068168592916,"q2":0.954872443581751,"q3":1.197103148665446},
{"x":137,"ret":-1.3920969135607244,"vol_mean":0.9711045758249525,"std_resid":-1.4335190547095706,"q1":0.7935556339288025,"q2":0.9556397816164877,"q3":1.1943693430072093},
{"x":138,"ret":-0.7698577304637512,"vol_mean":0.967333709706514,"std_resid":-0.7958553731135076,"q1":0.7858952322784738,"q2":0.9492634335798954,"q3":1.1979809744905563},
{"x":139,"ret":-0.6403040790449113,"vol_mean":0.9601113331316199,"std_resid":-0.6669060732325853,"q1":0.7753731921723362,"q2":0.9466829021555158,"q3":1.182564737958581},
{"x":140,"ret":0.09192223719142951,"vol_mean":0.9588258039263592,"std_resid":0.09586959050852727,"q1":0.7711204219352706,"q2":0.9452789090481831,"q3":1.1785352056213663},
{"x":141,"ret":-0.44595412461193007,"vol_mean":0.9571678341841875,"std_resid":-0.4659100616267839,"q1":0.771920813541269,"q2":0.9404420590338043,"q3":1.1945957893412578},
{"x":142,"ret":-0.8684779465340083,"vol_mean":0.9576547961492115,"std_resid":-0.906879963454693,"q1":0.7739453888070564,"q2":0.9416267372805851,"q3":1.1825765700050916},
{"x":143,"ret":1.0116831076128363,"vol_mean":0.9588158649367627,"std_resid":1.0551380558138348,"q1":0.7722384786977663,"q2":0.944757040607808,"q3":1.1869940552674525},
{"x":144,"ret":-0.5811084214553092,"vol_mean":0.9598823072640972,"std_resid":-0.6053954917781664,"q1":0.7798819261194615,"q2":0.9447094692891319,"q3":1.1941494819214986},
{"x":145,"ret":1.0593932021147066,"vol_mean":0.9622605183986551,"std_resid":1.1009421896241725,"q1":0.773234866018017,"q2":0.9451080754306385,"q3":1.1936284363145695},
{"x":146,"ret":1.1821782874978086,"vol_mean":0.9659357694048392,"std_resid":1.2238684237008919,"q1":0.7888596699600106,"q2":0.9503795581914178,"q3":1.1982574283810872},
{"x":147,"ret":-0.23344395094350798,"vol_mean":0.9636177245387024,"std_resid":-0.24225784250207824,"q1":0.7845980473123546,"q2":0.9484670552007654,"q3":1.18587143864395},
{"x":148,"ret":1.4223996688457998,"vol_mean":0.9644434568043133,"std_resid":1.474839876625765,"q1":0.7899743768804116,"q2":0.9502182932768111,"q3":1.1819210987755984},
{"x":149,"ret":0.9282411501765593,"vol_mean":0.9629291830615054,"std_resid":0.9639765483328067,"q1":0.7796487267886141,"q2":0.9488092878434469,"q3":1.1946861416117152},
{"x":150,"ret":0.939487795875224,"vol_mean":0.9630019480758325,"std_resid":0.9755824458635916,"q1":0.7708582313135188,"q2":0.9510024864114118,"q3":1.1861668064850537},
{"x":151,"ret":-1.1749982763140374,"vol_mean":0.9609193135372568,"std_resid":-1.2227855760217066,"q1":0.7726507102033202,"q2":0.948864555546777,"q3":1.1736721478435104},
{"x":152,"ret":-0.7934506135951656,"vol_mean":0.9578367913262787,"std_resid":-0.8283776743389715,"q1":0.7667812872634717,"q2":0.9461750064370833,"q3":1.1671479351851615},
{"x":153,"ret":1.382501018288413,"vol_mean":0.9580352195768175,"std_resid":1.4430586580095566,"q1":0.7681553485902662,"q2":0.9449231470184455,"q3":1.173498651129094},
{"x":154,"ret":-0.6613462785784165,"vol_mean":0.9525203513488524,"std_resid":-0.6943119668171837,"q1":0.7637881057195267,"q2":0.9404465187511001,"q3":1.164224492030924},
{"x":155,"ret":0.9428755689280497,"vol_mean":0.9509187855782347,"std_resid":0.9915416366022319,"q1":0.7618642834198845,"q2":0.939398382930709,"q3":1.1650510997987111},
{"x":156,"ret":-0.49557300638543084,"vol_mean":0.9467609587347766,"std_resid":-0.5234404754582402,"q1":0.7522362054568319,"q2":0.9350108317225809,"q3":1.1685119662349877},
{"x":157,"ret":-0.4598402502641967,"vol_mean":0.9441024192393573,"std_resid":-0.48706606496642596,"q1":0.7487013450103654,"q2":0.9348546311984473,"q3":1.1533002566631176},
{"x":158,"ret":0.28129575649935373,"vol_mean":0.9422457640871672,"std_resid":0.2985375654852305,"q1":0.743248641979116,"q2":0.9336825492546177,"q3":1.1470569463035447},
{"x":159,"ret":-0.5178240340695159,"vol_mean":0.948024708018841,"std_resid":-0.5462136479033886,"q1":0.7488433921949598,"q2":0.9378393082928895,"q3":1.160397146701209},
{"x":160,"ret":-1.3815426391665615,"vol_mean":0.9541242202490834,"std_resid":-1.447969362737586,"q1":0.759149533086921,"q2":0.9426883307550097,"q3":1.1796121474188819},
{"x":161,"ret":1.502711573684822,"vol_mean":0.956085422404185,"std_resid":1.5717335904004097,"q1":0.7633910465349126,"q2":0.9448499556943064,"q3":1.1710243249330745},
{"x":162,"ret":-0.4431399891208335,"vol_mean":0.9514173187434202,"std_resid":-0.4657682600376757,"q1":0.7568196598790949,"q2":0.9405727999707605,"q3":1.1625463055259573},
{"x":163,"ret":0.2585764750416383,"vol_mean":0.9496665527462766,"std_resid":0.27228133316254893,"q1":0.7522791896146731,"q2":0.942295417892085,"q3":1.1586867825754625},
{"x":164,"ret":-1.7095032286358498,"vol_mean":0.9528127508585259,"std_resid":-1.794164936495143,"q1":0.7535044969012153,"q2":0.9448534861852443,"q3":1.159514905807013},
{"x":165,"ret":-1.5897575243606703,"vol_mean":0.9489152871915676,"std_resid":-1.6753418833263343,"q1":0.7568784672892513,"q2":0.9425718832479826,"q3":1.146168593005893},
{"x":166,"ret":-0.11419463655310703,"vol_mean":0.9382394614075339,"std_resid":-0.12171161121468267,"q1":0.7384936042899213,"q2":0.9308834644173378,"q3":1.1478019143462457},
{"x":167,"ret":0.045466532570209814,"vol_mean":0.9313588621369563,"std_resid":0.04881741551896455,"q1":0.7194185318945399,"q2":0.9237755128473186,"q3":1.136019924254953},
{"x":168,"ret":-0.653229380434178,"vol_mean":0.9251168516342275,"std_resid":-0.7061047253438766,"q1":0.7230055737298154,"q2":0.9168470194389307,"q3":1.1257488511495273},
{"x":169,"ret":-0.05142140675282799,"vol_mean":0.9202915305126078,"std_resid":-0.05587512766110752,"q1":0.7005949338599265,"q2":0.9140159955628371,"q3":1.1291402001811544},
{"x":170,"ret":0.27205117912114607,"vol_mean":0.9193021887932474,"std_resid":0.2959322651872102,"q1":0.7003195132145595,"q2":0.913245882480962,"q3":1.1218451121443527},
{"x":171,"ret":0.745312260251881,"vol_mean":0.9184415059410429,"std_resid":0.8114967098402504,"q1":0.7117359056664344,"q2":0.912297390926886,"q3":1.1155421637277376},
{"x":172,"ret":-0.11035395888602917,"vol_mean":0.916730635535199,"std_resid":-0.12037773650010412,"q1":0.7098750296097057,"q2":0.910191993878974,"q3":1.117226769136986},
{"x":173,"ret":0.432364067831331,"vol_mean":0.9173903346282191,"std_resid":0.47129782330500636,"q1":0.7030321513851573,"q2":0.9109698643218385,"q3":1.124943317097429},
{"x":174,"ret":-1.19819001580385,"vol_mean":0.9188219515200218,"std_resid":-1.304050272005001,"q1":0.7080779235483703,"q2":0.9124914642984607,"q3":1.1269020814210982},
{"x":175,"ret":0.2983284889136429,"vol_mean":0.9170284426420089,"std_resid":0.32532086797018234,"q1":0.7069751524224996,"q2":0.9102807748250639,"q3":1.1171545505131757},
{"x":176,"ret":-0.021512606705105092,"vol_mean":0.918027599857471,"std_resid":-0.02343350756387395,"q1":0.7211760721135304,"q2":0.9076104000359051,"q3":1.1215049026171828},
{"x":177,"ret":1.131813828761745,"vol_mean":0.9189323052401747,"std_resid":1.2316618126358405,"q1":0.7180624947416288,"q2":0.9110613921196975,"q3":1.1238791675062831},
{"x":178,"ret":0.783212207126035,"vol_mean":0.9182235902208421,"std_resid":0.8529645888728088,"q1":0.7133889503779459,"q2":0.9097326482685018,"q3":1.1224606801226258},
{"x":179,"ret":-0.025703397311993892,"vol_mean":0.9175311493202,"std_resid":-0.02801365090551702,"q1":0.7165309417157076,"q2":0.9085602238557428,"q3":1.1183359984729222},
{"x":180,"ret":-0.23281054824649824,"vol_mean":0.9190456345860102,"std_resid":-0.25331772382703194,"q1":0.7118111378963662,"q2":0.912010167297139,"q3":1.1233733332629838},
{"x":181,"ret":-1.0032054239549346,"vol_mean":0.9232678547534756,"std_resid":-1.0865811246323565,"q1":0.7155420992283638,"q2":0.9158812052327692,"q3":1.1339209480517154},
{"x":182,"ret":0.8354753313942387,"vol_mean":0.9255328428248223,"std_resid":0.9026965794582517,"q1":0.7248648932141333,"q2":0.9149819116603543,"q3":1.139340735671738},
{"x":183,"ret":-0.5732709973166978,"vol_mean":0.9262550243985493,"std_resid":-0.618912699220113,"q1":0.7288596039611879,"q2":0.9168218157877762,"q3":1.1295604170065283},
{"x":184,"ret":1.1450568162366033,"vol_mean":0.927099408806692,"std_resid":1.235096048341195,"q1":0.7316577176995233,"q2":0.916875078653957,"q3":1.138915558146535},
{"x":185,"ret":0.8783648313226607,"vol_mean":0.9269335294538641,"std_resid":0.947602825242691,"q1":0.7374538796588129,"q2":0.9186275313740445,"q3":1.1250148498053418},
{"x":186,"ret":-0.24888300727752527,"vol_mean":0.9292361376360533,"std_resid":-0.2678361260364622,"q1":0.7340747601049934,"q2":0.9223768832992459,"q3":1.1261204986235192},
{"x":187,"ret":0.7228996624267281,"vol_mean":0.9328546538402371,"std_resid":0.7749327930678187,"q1":0.7433632468759868,"q2":0.9246948381838087,"q3":1.1359180232806556},
{"x":188,"ret":-0.12041647632534423,"vol_mean":0.9350297565629774,"std_resid":-0.12878357665105364,"q1":0.742295498893845,"q2":0.9265686983668338,"q3":1.1390804598451025},
{"x":189,"ret":-1.4352318894349707,"vol_mean":0.941742422807952,"std_resid":-1.5240174538974287,"q1":0.7550653578002194,"q2":0.9308249886479524,"q3":1.15470503590848},
{"x":190,"ret":0.8855858383172982,"vol_mean":0.9430679765271126,"std_resid":0.9390477254656713,"q1":0.7595580041983092,"q2":0.9332713466174807,"q3":1.1559142088173555},
{"x":191,"ret":-0.9025208818149901,"vol_mean":0.9437683924997448,"std_resid":-0.9562948801712855,"q1":0.7622584159667094,"q2":0.9321680230439976,"q3":1.1594048958246892},
{"x":192,"ret":-0.12074409616803661,"vol_mean":0.9452041609348878,"std_resid":-0.12774393211368257,"q1":0.7533675999149095,"q2":0.9331196999554,"q3":1.1636003821104224},
{"x":193,"ret":0.17269602853502322,"vol_mean":0.9518666313986637,"std_resid":0.1814288082367856,"q1":0.7628921409875679,"q2":0.9362227889795262,"q3":1.166619088535936},
{"x":194,"ret":1.3197102226275068,"vol_mean":0.9596942646970662,"std_resid":1.3751360940393678,"q1":0.7812657988982256,"q2":0.9461242653396652,"q3":1.1630431200755424},
{"x":195,"ret":0.32175060242573034,"vol_mean":0.9644642541603903,"std_resid":0.33360552352023537,"q1":0.7775685381610072,"q2":0.951953479597286,"q3":1.1762626150613344},
{"x":196,"ret":-0.7908568134899913,"vol_mean":0.9718384982673557,"std_resid":-0.8137739088335891,"q1":0.7894540255176363,"q2":0.9558720572362241,"q3":1.2010776508274505},
{"x":197,"ret":0.3874579326049864,"vol_mean":0.9820845906427474,"std_resid":0.3945260278968493,"q1":0.7970949832953207,"q2":0.9662574545469973,"q3":1.223877557013252},
{"x":198,"ret":1.5677556877923258,"vol_mean":0.9913678153729015,"std_resid":1.5814066822439832,"q1":0.8028458061367337,"q2":0.973143759570601,"q3":1.2311252173573488},
{"x":199,"ret":1.7762816619624333,"vol_mean":1.0006096859553908,"std_resid":1.775199347852029,"q1":0.8133434741301802,"q2":0.9818671139128013,"q3":1.2453738474738705},
{"x":200,"ret":1.9489452010696782,"vol_mean":1.0016030632797852,"std_resid":1.9458259189900908,"q1":0.8084318562253209,"q2":0.9835334816894943,"q3":1.2690446750679638}];
    const series = [{"name":"Returns","color":"#1f77b4","key":"ret","dash":""}];
    const bands = [];
    const refLines = [{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#sv_ret_84');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('');
    if('Returns') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Returns');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":1,"ret":0.2088332105422406,"vol_mean":0.9429135212758868,"std_resid":0.22147652550327376,"q1":0.7248570071258801,"q2":0.9303695862633153,"q3":1.1867570981617124},
{"x":2,"ret":0.4384722422321556,"vol_mean":0.9417216688642108,"std_resid":0.4656070437043113,"q1":0.7300512848110202,"q2":0.9293365453310337,"q3":1.1752386758105615},
{"x":3,"ret":0.4725842035933498,"vol_mean":0.9425243819120511,"std_resid":0.5014026296430044,"q1":0.7435262946402053,"q2":0.9286237832473603,"q3":1.1780413057190355},
{"x":4,"ret":1.6201447720624402,"vol_mean":0.9462825976839138,"std_resid":1.7121151504083945,"q1":0.7482729814049173,"q2":0.9329704094575311,"q3":1.1751682724404184},
{"x":5,"ret":0.28045405795416234,"vol_mean":0.9418779693553612,"std_resid":0.2977605030364075,"q1":0.742233284390177,"q2":0.9280765846367496,"q3":1.1686756276432566},
{"x":6,"ret":1.2983159215175022,"vol_mean":0.9418335159766515,"std_resid":1.3784983221489944,"q1":0.7482482124144146,"q2":0.927864141106228,"q3":1.1663041753714363},
{"x":7,"ret":-0.01987996243675271,"vol_mean":0.9373606550313351,"std_resid":-0.0212084455753993,"q1":0.738743668637602,"q2":0.9242463618343842,"q3":1.1601984470907243},
{"x":8,"ret":0.21824565572954072,"vol_mean":0.9351699451037727,"std_resid":0.23337539542646735,"q1":0.7433352294150543,"q2":0.923257891359834,"q3":1.1559219826078464},
{"x":9,"ret":0.25509660863237965,"vol_mean":0.9348644793823507,"std_resid":0.27287014776828156,"q1":0.7415127287286629,"q2":0.9236580703898575,"q3":1.1556344171896473},
{"x":10,"ret":-0.11999203046929163,"vol_mean":0.9375265218175804,"std_resid":-0.12798787839800346,"q1":0.7474386609362612,"q2":0.9255278034200293,"q3":1.1548496298422268},
{"x":11,"ret":-0.7174524918352548,"vol_mean":0.9401171355135414,"std_resid":-0.7631522336238926,"q1":0.7568315250789027,"q2":0.9279251656879792,"q3":1.154840794187391},
{"x":12,"ret":-0.21424087596888453,"vol_mean":0.9460128809138965,"std_resid":-0.22646718696041113,"q1":0.7601483772721638,"q2":0.9336680193506524,"q3":1.1625281767877975},
{"x":13,"ret":-0.4694096628322326,"vol_mean":0.9550362672346415,"std_resid":-0.49150977710138,"q1":0.7643222332356912,"q2":0.9394390228927934,"q3":1.1810979598814313},
{"x":14,"ret":1.5834667570079413,"vol_mean":0.9661672980394491,"std_resid":1.6389157035444264,"q1":0.7833389513156154,"q2":0.9500365777561,"q3":1.2087376222575814},
{"x":15,"ret":0.6132359583166904,"vol_mean":0.9724025264155485,"std_resid":0.6306400298826753,"q1":0.795681869048061,"q2":0.9564641392329147,"q3":1.2054407938316092},
{"x":16,"ret":-1.59366826383876,"vol_mean":0.9824557829855111,"std_resid":-1.6221272157367543,"q1":0.8073509680289646,"q2":0.9645833350667077,"q3":1.214798252448206},
{"x":17,"ret":-1.518919919412247,"vol_mean":0.9856876830769661,"std_resid":-1.540974839688287,"q1":0.8147822528189089,"q2":0.9705266372504486,"q3":1.2076219154985848},
{"x":18,"ret":1.3585377890997221,"vol_mean":0.986102349128575,"std_resid":1.377684365421369,"q1":0.8098996147793921,"q2":0.9688453030200872,"q3":1.1966832202546958},
{"x":19,"ret":-0.4835243227290544,"vol_mean":0.9869086547713657,"std_resid":-0.48993827381225175,"q1":0.810414670416662,"q2":0.971234824166134,"q3":1.2013066144620914},
{"x":20,"ret":-2.250502757283063,"vol_mean":0.9879283526029327,"std_resid":-2.278001994125968,"q1":0.8068687857256499,"q2":0.9717365615502475,"q3":1.2082537088032126},
{"x":21,"ret":0.3193832464242711,"vol_mean":0.9757977523950714,"std_resid":0.3273047572003039,"q1":0.8012297106627061,"q2":0.9622860022963725,"q3":1.1812790256188939},
{"x":22,"ret":-0.70656180301821,"vol_mean":0.9677345023059661,"std_resid":-0.730119471130335,"q1":0.7919912384358448,"q2":0.9567312696200635,"q3":1.1771021038117284},
{"x":23,"ret":-0.5381929256618667,"vol_mean":0.9616683819610192,"std_resid":-0.5596450249974863,"q1":0.7922781385158937,"q2":0.9472727100541936,"q3":1.1779511332217796},
{"x":24,"ret":-0.1561158927236592,"vol_mean":0.9582525988696764,"std_resid":-0.16291726514262359,"q1":0.7813135152654467,"q2":0.943994215532977,"q3":1.17983966823213},
{"x":25,"ret":0.6037225274273443,"vol_mean":0.9577202240012332,"std_resid":0.6303746253838813,"q1":0.7814285635636663,"q2":0.942834674832653,"q3":1.1854069883497504},
{"x":26,"ret":1.2657433557326152,"vol_mean":0.9566922693208041,"std_resid":1.3230412707643382,"q1":0.7807724620050549,"q2":0.9418493566532607,"q3":1.1909543577597972},
{"x":27,"ret":-1.1505071143854853,"vol_mean":0.9540870517437259,"std_resid":-1.205872265306163,"q1":0.7785296951917018,"q2":0.9402552146709101,"q3":1.159611495424805},
{"x":28,"ret":-0.9158592464479492,"vol_mean":0.9522929890730326,"std_resid":-0.9617410365894343,"q1":0.7686560176656045,"q2":0.9398897146305825,"q3":1.159466507701581},
{"x":29,"ret":0.5879337179676579,"vol_mean":0.9486931770110262,"std_resid":0.6197301005368405,"q1":0.7726566304300222,"q2":0.9362825842868723,"q3":1.1600971251933447},
{"x":30,"ret":-0.41282154828080614,"vol_mean":0.9420921417811711,"std_resid":-0.4381965733206341,"q1":0.7651498064493177,"q2":0.9286099934789303,"q3":1.1468477414378673},
{"x":31,"ret":-0.2429218347940629,"vol_mean":0.941361714863208,"std_resid":-0.2580536588205763,"q1":0.7657586703652967,"q2":0.9265207761819332,"q3":1.156315038325339},
{"x":32,"ret":-0.03516866082973856,"vol_mean":0.941406113087924,"std_resid":-0.03735758706131743,"q1":0.7552578154162409,"q2":0.9308191786075422,"q3":1.1442748569326116},
{"x":33,"ret":-1.1741778355680308,"vol_mean":0.9446237829708322,"std_resid":-1.2430110873084874,"q1":0.7634925651413128,"q2":0.9340075944599076,"q3":1.1521683823278455},
{"x":34,"ret":1.2286976023402392,"vol_mean":0.9481451009461028,"std_resid":1.2958961672788143,"q1":0.7744409088569797,"q2":0.9374590729149838,"q3":1.1527800084589932},
{"x":35,"ret":0.36443715993347037,"vol_mean":0.9483925277750356,"std_resid":0.3842682742223345,"q1":0.7752505041582413,"q2":0.9356029367628229,"q3":1.1749874916527652},
{"x":36,"ret":0.863519047346861,"vol_mean":0.9519361320891904,"std_resid":0.9071186797497826,"q1":0.7669122140208472,"q2":0.9393549267870003,"q3":1.173615834346141},
{"x":37,"ret":-0.6110236695657176,"vol_mean":0.954007775240947,"std_resid":-0.6404808067852441,"q1":0.7781376046956759,"q2":0.9396065379204683,"q3":1.1725357603859219},
{"x":38,"ret":-1.0731628669281819,"vol_mean":0.9581039723600435,"std_resid":-1.120090196771359,"q1":0.7741086409766718,"q2":0.9446810856410381,"q3":1.1867485891824807},
{"x":39,"ret":-0.558994605387216,"vol_mean":0.9579029346931545,"std_resid":-0.5835608026049937,"q1":0.7782939774146848,"q2":0.9465618109385694,"q3":1.1802992650233632},
{"x":40,"ret":0.05819751744237116,"vol_mean":0.9583273710343504,"std_resid":0.0607282221101093,"q1":0.7738758832021834,"q2":0.9449037429602621,"q3":1.1829022904507553},
{"x":41,"ret":1.5143016801942752,"vol_mean":0.9630060802877939,"std_resid":1.5724736439272813,"q1":0.7818025017629732,"q2":0.9492181613705908,"q3":1.189366239371561},
{"x":42,"ret":-0.6268646591147701,"vol_mean":0.9639177610507106,"std_resid":-0.6503300223781139,"q1":0.7934360271884926,"q2":0.9492685814908174,"q3":1.1777394792380216},
{"x":43,"ret":-1.1987953363968185,"vol_mean":0.9660976560931396,"std_resid":-1.2408635181299363,"q1":0.794041937968595,"q2":0.9504321377381891,"q3":1.184313739776717},
{"x":44,"ret":1.899472039842352,"vol_mean":0.969982047843942,"std_resid":1.9582548399369482,"q1":0.7999478346985482,"q2":0.953729936990278,"q3":1.1907496338543628},
{"x":45,"ret":-0.09971254641057269,"vol_mean":0.964159707347914,"std_resid":-0.10341911786051408,"q1":0.7921071303853265,"q2":0.9492939916436218,"q3":1.1887342644341543},
{"x":46,"ret":0.009760745845731295,"vol_mean":0.9646244629202392,"std_resid":0.01011870030351736,"q1":0.7935332759291368,"q2":0.9522526738778956,"q3":1.1838030572924145},
{"x":47,"ret":1.545285105465797,"vol_mean":0.9667084331283129,"std_resid":1.5985017327977407,"q1":0.79891642827304,"q2":0.9525710000363014,"q3":1.1763190505254832},
{"x":48,"ret":-1.4799904964815829,"vol_mean":0.9629569952531172,"std_resid":-1.5369227325593717,"q1":0.7847153230480196,"q2":0.9498646399500412,"q3":1.1723157633186372},
{"x":49,"ret":0.6579032422092371,"vol_mean":0.9557310958380254,"std_resid":0.6883769347615082,"q1":0.7786216179375608,"q2":0.9413208899432245,"q3":1.1749773777325958},
{"x":50,"ret":0.018781499514349355,"vol_mean":0.9471022915567806,"std_resid":0.01983048682468885,"q1":0.7623668990344401,"q2":0.9350293937028231,"q3":1.1606172200519624},
{"x":51,"ret":0.43823774231229634,"vol_mean":0.9443321074529656,"std_resid":0.46407163205993573,"q1":0.7636096654673704,"q2":0.932121389158211,"q3":1.156400607662492},
{"x":52,"ret":-0.8184545502763483,"vol_mean":0.9434650953010361,"std_resid":-0.8674984950187267,"q1":0.7504226454916136,"q2":0.9313858729718021,"q3":1.160228128916636},
{"x":53,"ret":-0.4364375470212315,"vol_mean":0.9429369593254989,"std_resid":-0.4628491254955408,"q1":0.7545294804663623,"q2":0.930180375621223,"q3":1.1491775299014306},
{"x":54,"ret":1.5083581349182493,"vol_mean":0.945529085421949,"std_resid":1.595253026241,"q1":0.7616633996765513,"q2":0.9318871791681066,"q3":1.1528716219539827},
{"x":55,"ret":-0.399833933142405,"vol_mean":0.9416776379623438,"std_resid":-0.4245974599201364,"q1":0.7531856397642895,"q2":0.929096499725269,"q3":1.157793559695274},
{"x":56,"ret":0.6776588566587324,"vol_mean":0.9375516147690448,"std_resid":0.7227963196732011,"q1":0.7465654861007406,"q2":0.9264103952716762,"q3":1.1654218156976233},
{"x":57,"ret":-0.25870957887814156,"vol_mean":0.9376662538742846,"std_resid":-0.2759079553190654,"q1":0.7481373059207516,"q2":0.9251748878403896,"q3":1.1679381828138973},
{"x":58,"ret":-0.3325448241067508,"vol_mean":0.9372849456973673,"std_resid":-0.35479586611660313,"q1":0.7445818710397604,"q2":0.9263082510424745,"q3":1.1660850185697431},
{"x":59,"ret":-0.7045956337428738,"vol_mean":0.9383080444111037,"std_resid":-0.750921446256052,"q1":0.7482957307281007,"q2":0.927480446705504,"q3":1.151585575999288},
{"x":60,"ret":-0.475919965044083,"vol_mean":0.940208854922097,"std_resid":-0.5061853678069393,"q1":0.7516273880334411,"q2":0.9265860695125486,"q3":1.1562694663024418},
{"x":61,"ret":-0.1609112014771097,"vol_mean":0.9416532852254648,"std_resid":-0.17088158030328743,"q1":0.7621395656832199,"q2":0.929538478183781,"q3":1.1551170734564866},
{"x":62,"ret":0.6167444193105983,"vol_mean":0.9489174657421934,"std_resid":0.6499452708758113,"q1":0.7593485940564028,"q2":0.9384796210798269,"q3":1.162038215466939},
{"x":63,"ret":1.656725291225609,"vol_mean":0.9550721008347052,"std_resid":1.7346599170656114,"q1":0.7718454111671883,"q2":0.9425029600634264,"q3":1.1709776440560669},
{"x":64,"ret":-1.115507949315443,"vol_mean":0.9562553914001221,"std_resid":-1.1665376837061778,"q1":0.77858868906047,"q2":0.9430186700503252,"q3":1.1627356351934324},
{"x":65,"ret":-1.0786607458137447,"vol_mean":0.9554537146793665,"std_resid":-1.1289513340536066,"q1":0.768099183413625,"q2":0.9429800426124729,"q3":1.1620350495204366},
{"x":66,"ret":0.8024570646067546,"vol_mean":0.9520336434222335,"std_resid":0.8428872972620982,"q1":0.7692583524639514,"q2":0.9371574230001702,"q3":1.1698419980715327},
{"x":67,"ret":0.8848294326243195,"vol_mean":0.9526346239697789,"std_resid":0.9288235073139537,"q1":0.7695910331013259,"q2":0.9396159400391628,"q3":1.1776258169781864},
{"x":68,"ret":-1.0237559862922225,"vol_mean":0.95223632800528,"std_resid":-1.075107046626503,"q1":0.7619770411837193,"q2":0.9385410705698497,"q3":1.163078629717284},
{"x":69,"ret":0.19164735276562897,"vol_mean":0.94983042365237,"std_resid":0.2017700717868038,"q1":0.760426268755015,"q2":0.937149050141885,"q3":1.1754698142989102},
{"x":70,"ret":0.13301422503123553,"vol_mean":0.9486022794105253,"std_resid":0.1402212791581024,"q1":0.7693556933708176,"q2":0.9331449747170594,"q3":1.1680837986736679},
{"x":71,"ret":-0.4792172281770884,"vol_mean":0.9513350498950768,"std_resid":-0.5037312860804839,"q1":0.7741694421866929,"q2":0.9378576530678584,"q3":1.169579852927933},
{"x":72,"ret":0.2939583971472789,"vol_mean":0.9554140949934251,"std_resid":0.30767642919199534,"q1":0.7809685767865387,"q2":0.9433198342828052,"q3":1.1606140026364018},
{"x":73,"ret":-1.0602586327856445,"vol_mean":0.961431564646251,"std_resid":-1.1027915784892666,"q1":0.7886191468662785,"q2":0.9456781101172519,"q3":1.1810716402961743},
{"x":74,"ret":-0.026493476200401492,"vol_mean":0.9666032346111884,"std_resid":-0.02740884289618415,"q1":0.7959623383215363,"q2":0.9500705503325416,"q3":1.178541090535235},
{"x":75,"ret":1.644352653793086,"vol_mean":0.9771218063112367,"std_resid":1.6828532974826684,"q1":0.8064558311749117,"q2":0.9629183517794436,"q3":1.2057708869793664},
{"x":76,"ret":-1.272674368713393,"vol_mean":0.9824714955680397,"std_resid":-1.2953804506842872,"q1":0.8119095140737703,"q2":0.9646882603766977,"q3":1.2166193088352972},
{"x":77,"ret":-0.34438109788519616,"vol_mean":0.988038761665152,"std_resid":-0.34855018977677266,"q1":0.8144938632637411,"q2":0.9715713346408837,"q3":1.2192360646873752},
{"x":78,"ret":1.2497844874830284,"vol_mean":0.9956046239210637,"std_resid":1.2553020119180536,"q1":0.8255996937162804,"q2":0.975644623989724,"q3":1.2280134475550322},
{"x":79,"ret":1.007692869460378,"vol_mean":0.999511838011172,"std_resid":1.0081850270682982,"q1":0.8259606464916898,"q2":0.9783103548725572,"q3":1.2308714484165304},
{"x":80,"ret":-2.183101935152624,"vol_mean":1.0054725579131227,"std_resid":-2.171219809005721,"q1":0.8335522182192021,"q2":0.9856054835447486,"q3":1.2478176959825362},
{"x":81,"ret":-1.95694257620551,"vol_mean":1.002331453615531,"std_resid":-1.9523906679238499,"q1":0.8319355610967052,"q2":0.9830702889504326,"q3":1.2335863758863972},
{"x":82,"ret":0.5115918005306112,"vol_mean":0.9905277722354218,"std_resid":0.516484055137648,"q1":0.8124166359066657,"q2":0.9735445024809378,"q3":1.2311990143748113},
{"x":83,"ret":0.7868160673314945,"vol_mean":0.9836369212710134,"std_resid":0.7999049754199999,"q1":0.8108319114191166,"q2":0.9650701591620433,"q3":1.228899153187797},
{"x":84,"ret":-0.4318914694159917,"vol_mean":0.974773602272835,"std_resid":-0.44306849140043403,"q1":0.7911043762021377,"q2":0.959516187479846,"q3":1.2063926555929902},
{"x":85,"ret":0.08450767412628944,"vol_mean":0.972095843372472,"std_resid":0.08693347955599595,"q1":0.7863475423509592,"q2":0.9574720740168661,"q3":1.1961363896320554},
{"x":86,"ret":0.3627089596358936,"vol_mean":0.9693065338659728,"std_resid":0.37419427906801445,"q1":0.7897381199069776,"q2":0.9545291952903061,"q3":1.197238038321309},
{"x":87,"ret":0.4057153815080021,"vol_mean":0.9701064179309302,"std_resid":0.4182173976060514,"q1":0.7943401949977912,"q2":0.9539378353557811,"q3":1.1925876154786377},
{"x":88,"ret":0.648356747464586,"vol_mean":0.9773756268238578,"std_resid":0.6633649639612229,"q1":0.7998476112872701,"q2":0.9600444120909128,"q3":1.2200841765204817},
{"x":89,"ret":-2.3422253505792994,"vol_mean":0.9870209997007825,"std_resid":-2.373024840696753,"q1":0.809823138060402,"q2":0.9672451616574521,"q3":1.225839576408786},
{"x":90,"ret":0.058537307292524224,"vol_mean":0.9802585985237515,"std_resid":0.0597161885452269,"q1":0.8007744396478377,"q2":0.961697727981737,"q3":1.2173032513629076},
{"x":91,"ret":1.2407776250140905,"vol_mean":0.9769356579040368,"std_resid":1.2700709765022935,"q1":0.793083345841161,"q2":0.9601334745517974,"q3":1.2044537976144196},
{"x":92,"ret":-0.671120074880389,"vol_mean":0.9743159302765836,"std_resid":-0.688811558987725,"q1":0.7920402235185252,"q2":0.959151812207146,"q3":1.2018048666482568},
{"x":93,"ret":0.6545125074113552,"vol_mean":0.971830931166818,"std_resid":0.6734839223788875,"q1":0.7826929906023993,"q2":0.9542777817622681,"q3":1.2011287216312367},
{"x":94,"ret":1.4627322738064892,"vol_mean":0.9715531536496936,"std_resid":1.5055607285218042,"q1":0.7783294948573336,"q2":0.9557256353526267,"q3":1.2092002107830562},
{"x":95,"ret":-0.4026323321259725,"vol_mean":0.9673387757981811,"std_resid":-0.4162268092620893,"q1":0.7658613261593078,"q2":0.954178759474159,"q3":1.2026488731167704},
{"x":96,"ret":0.2478964729796932,"vol_mean":0.9638536319624512,"std_resid":0.2571930682825403,"q1":0.7660676587775122,"q2":0.9503017067911885,"q3":1.1965991087649197},
{"x":97,"ret":0.6378644683857844,"vol_mean":0.9644075399847117,"std_resid":0.6614055178331518,"q1":0.7824719662520652,"q2":0.949376118824337,"q3":1.1940708445437642},
{"x":98,"ret":-1.0784077774543137,"vol_mean":0.9672305291154472,"std_resid":-1.1149438990935703,"q1":0.785766249991355,"q2":0.9494127883737509,"q3":1.1842833935475008},
{"x":99,"ret":0.6661928537123607,"vol_mean":0.9679596857519097,"std_resid":0.6882444212486629,"q1":0.7872861535156577,"q2":0.9509585293405128,"q3":1.1913884593860782},
{"x":100,"ret":-1.3601924980733364,"vol_mean":0.9708883807014335,"std_resid":-1.4009772133544787,"q1":0.7857748890031012,"q2":0.9541234934610336,"q3":1.2127957513548666},
{"x":101,"ret":0.5950165375641198,"vol_mean":0.9709116411621315,"std_resid":0.6128431386937697,"q1":0.7827570471818464,"q2":0.9557335237738608,"q3":1.212639654366857},
{"x":102,"ret":-0.14126834445413233,"vol_mean":0.9703658962854441,"std_resid":-0.14558255292658867,"q1":0.7899524497619902,"q2":0.954278594999521,"q3":1.2044509911212116},
{"x":103,"ret":-1.3546396920477852,"vol_mean":0.9769800961439773,"std_resid":-1.3865581268179208,"q1":0.7871173684659191,"q2":0.957720318818139,"q3":1.2250295827328814},
{"x":104,"ret":-0.7149103634153315,"vol_mean":0.9785078030546952,"std_resid":-0.7306128384296293,"q1":0.7905008626839208,"q2":0.9604241977349154,"q3":1.2366968114363397},
{"x":105,"ret":-0.30829894213322245,"vol_mean":0.9787152265002053,"std_resid":-0.31500372507299274,"q1":0.7852250620793824,"q2":0.9570510101313988,"q3":1.235402255503482},
{"x":106,"ret":-0.5558008236381837,"vol_mean":0.983789886527942,"std_resid":-0.5649588710448669,"q1":0.7828510345291099,"q2":0.9628314437276114,"q3":1.2348182114060895},
{"x":107,"ret":0.11842629292379253,"vol_mean":0.988891972600586,"std_resid":0.11975655198449565,"q1":0.7998489732976901,"q2":0.9675400275246447,"q3":1.2537540636407167},
{"x":108,"ret":1.4784668469101363,"vol_mean":0.9993213858209589,"std_resid":1.479470836797465,"q1":0.8118129644586488,"q2":0.9763044553317617,"q3":1.2610748928567073},
{"x":109,"ret":0.3450991513310631,"vol_mean":1.007835954806767,"std_resid":0.3424159950685915,"q1":0.8219370224536734,"q2":0.985495523383395,"q3":1.2808415701897238},
{"x":110,"ret":-0.7875438839569323,"vol_mean":1.0172541579382626,"std_resid":-0.7741859571781947,"q1":0.8331307729652372,"q2":0.9936388473965428,"q3":1.280264723580186},
{"x":111,"ret":-2.459079052486651,"vol_mean":1.0306688401742172,"std_resid":-2.3859060802410452,"q1":0.8488103578597462,"q2":1.0057465434233839,"q3":1.301684261757103},
{"x":112,"ret":1.985713821808472,"vol_mean":1.0323126823326298,"std_resid":1.9235584874551013,"q1":0.8431531192996138,"q2":1.0052869303486878,"q3":1.303279901484109},
{"x":113,"ret":0.32277864640718545,"vol_mean":1.0236809343188944,"std_resid":0.3153117691128497,"q1":0.8418801897858779,"q2":0.9990422697342074,"q3":1.2899780312658846},
{"x":114,"ret":1.8546881587438901,"vol_mean":1.0221804023789136,"std_resid":1.8144430811112078,"q1":0.8427969138277471,"q2":0.9996529959040753,"q3":1.2752957535852203},
{"x":115,"ret":1.6327579825632743,"vol_mean":1.0147666312499972,"std_resid":1.608998495104269,"q1":0.8302037650109855,"q2":0.9940822935988689,"q3":1.257609398131322},
{"x":116,"ret":0.23699866408894116,"vol_mean":1.004309981284909,"std_resid":0.23598158786167422,"q1":0.8273813100469406,"q2":0.983309256848725,"q3":1.2370169041293124},
{"x":117,"ret":0.1938232907826632,"vol_mean":0.9961640539079374,"std_resid":0.19456964946917849,"q1":0.8173610729081539,"q2":0.9756734091157384,"q3":1.2412350593633725},
{"x":118,"ret":0.9690563038822385,"vol_mean":0.9899343031721718,"std_resid":0.9789097122677421,"q1":0.8142852317254575,"q2":0.9701033508293085,"q3":1.2231257072632866},
{"x":119,"ret":-1.0490474709800932,"vol_mean":0.9857770086751222,"std_resid":-1.064183341413091,"q1":0.8083673448328096,"q2":0.9686812502168258,"q3":1.2115459794222583},
{"x":120,"ret":-0.7696881032986889,"vol_mean":0.9792016012241623,"std_resid":-0.786036401836407,"q1":0.7964753628946457,"q2":0.9637753324468736,"q3":1.2127486540053805},
{"x":121,"ret":-0.42308277859212345,"vol_mean":0.9753789842485835,"std_resid":-0.43376245072376635,"q1":0.7942742677018384,"q2":0.9593396921037933,"q3":1.2058368749885184},
{"x":122,"ret":0.30928199837740133,"vol_mean":0.9739013813708068,"std_resid":0.31757014035864084,"q1":0.7939583503117627,"q2":0.956374516490287,"q3":1.2064903315354507},
{"x":123,"ret":0.8904646200777416,"vol_mean":0.9759529499030978,"std_resid":0.9124052754450466,"q1":0.7957361722962866,"q2":0.959952783353572,"q3":1.2091560711788114},
{"x":124,"ret":-0.9264139330741645,"vol_mean":0.9804682351556411,"std_resid":-0.9448688900432395,"q1":0.805910380927051,"q2":0.9638156175446492,"q3":1.2058124195580857},
{"x":125,"ret":0.9791979163882076,"vol_mean":0.983401134751698,"std_resid":0.9957258353534932,"q1":0.8090726343876735,"q2":0.9685754219336465,"q3":1.2087333012448593},
{"x":126,"ret":-1.3828053601964323,"vol_mean":0.9882093118628015,"std_resid":-1.399304118668753,"q1":0.8205000378871616,"q2":0.9744044314067903,"q3":1.2091082279851726},
{"x":127,"ret":-1.986484629440342,"vol_mean":0.9917418254766676,"std_resid":-2.003025967454347,"q1":0.827083713135169,"q2":0.9760358567090378,"q3":1.2233337474587216},
{"x":128,"ret":-0.8566022313678463,"vol_mean":0.9867935363702771,"std_resid":-0.868066317619678,"q1":0.8182645696354549,"q2":0.9725696771818777,"q3":1.2079793539252008},
{"x":129,"ret":-0.5228187593686185,"vol_mean":0.9827412666476562,"std_resid":-0.5320004126335988,"q1":0.8100327135225148,"q2":0.9676467308416207,"q3":1.1975448755845577},
{"x":130,"ret":0.38699283912599847,"vol_mean":0.9821055020705409,"std_resid":0.3940440597370793,"q1":0.8099298727704431,"q2":0.9679175094132016,"q3":1.2018659112211916},
{"x":131,"ret":0.6311105096037605,"vol_mean":0.9841307790886903,"std_resid":0.6412872384584616,"q1":0.8048681082955133,"q2":0.9697893876734451,"q3":1.2138390025460495},
{"x":132,"ret":-2.2156582542334338,"vol_mean":0.9886365105779351,"std_resid":-2.2411252573892995,"q1":0.8107641421908093,"q2":0.9745741671594426,"q3":1.2163830416194397},
{"x":133,"ret":0.22006438651225776,"vol_mean":0.9843044397016576,"std_resid":0.2235734978285369,"q1":0.801308370547954,"q2":0.9671244318524139,"q3":1.222920422751869},
{"x":134,"ret":-1.2966962818325518,"vol_mean":0.9807817976530768,"std_resid":-1.322104758607297,"q1":0.8033007687959149,"q2":0.9642277599924436,"q3":1.214973161205799},
{"x":135,"ret":0.12913907274949055,"vol_mean":0.9715809525873131,"std_resid":0.13291643110704685,"q1":0.7937482032620649,"q2":0.9543910590354483,"q3":1.1945562640930631},
{"x":136,"ret":-0.6706073470895847,"vol_mean":0.9724765091876787,"std_resid":-0.6895871938847665,"q1":0.7897068168592916,"q2":0.954872443581751,"q3":1.197103148665446},
{"x":137,"ret":-1.3920969135607244,"vol_mean":0.9711045758249525,"std_resid":-1.4335190547095706,"q1":0.7935556339288025,"q2":0.9556397816164877,"q3":1.1943693430072093},
{"x":138,"ret":-0.7698577304637512,"vol_mean":0.967333709706514,"std_resid":-0.7958553731135076,"q1":0.7858952322784738,"q2":0.9492634335798954,"q3":1.1979809744905563},
{"x":139,"ret":-0.6403040790449113,"vol_mean":0.9601113331316199,"std_resid":-0.6669060732325853,"q1":0.7753731921723362,"q2":0.9466829021555158,"q3":1.182564737958581},
{"x":140,"ret":0.09192223719142951,"vol_mean":0.9588258039263592,"std_resid":0.09586959050852727,"q1":0.7711204219352706,"q2":0.9452789090481831,"q3":1.1785352056213663},
{"x":141,"ret":-0.44595412461193007,"vol_mean":0.9571678341841875,"std_resid":-0.4659100616267839,"q1":0.771920813541269,"q2":0.9404420590338043,"q3":1.1945957893412578},
{"x":142,"ret":-0.8684779465340083,"vol_mean":0.9576547961492115,"std_resid":-0.906879963454693,"q1":0.7739453888070564,"q2":0.9416267372805851,"q3":1.1825765700050916},
{"x":143,"ret":1.0116831076128363,"vol_mean":0.9588158649367627,"std_resid":1.0551380558138348,"q1":0.7722384786977663,"q2":0.944757040607808,"q3":1.1869940552674525},
{"x":144,"ret":-0.5811084214553092,"vol_mean":0.9598823072640972,"std_resid":-0.6053954917781664,"q1":0.7798819261194615,"q2":0.9447094692891319,"q3":1.1941494819214986},
{"x":145,"ret":1.0593932021147066,"vol_mean":0.9622605183986551,"std_resid":1.1009421896241725,"q1":0.773234866018017,"q2":0.9451080754306385,"q3":1.1936284363145695},
{"x":146,"ret":1.1821782874978086,"vol_mean":0.9659357694048392,"std_resid":1.2238684237008919,"q1":0.7888596699600106,"q2":0.9503795581914178,"q3":1.1982574283810872},
{"x":147,"ret":-0.23344395094350798,"vol_mean":0.9636177245387024,"std_resid":-0.24225784250207824,"q1":0.7845980473123546,"q2":0.9484670552007654,"q3":1.18587143864395},
{"x":148,"ret":1.4223996688457998,"vol_mean":0.9644434568043133,"std_resid":1.474839876625765,"q1":0.7899743768804116,"q2":0.9502182932768111,"q3":1.1819210987755984},
{"x":149,"ret":0.9282411501765593,"vol_mean":0.9629291830615054,"std_resid":0.9639765483328067,"q1":0.7796487267886141,"q2":0.9488092878434469,"q3":1.1946861416117152},
{"x":150,"ret":0.939487795875224,"vol_mean":0.9630019480758325,"std_resid":0.9755824458635916,"q1":0.7708582313135188,"q2":0.9510024864114118,"q3":1.1861668064850537},
{"x":151,"ret":-1.1749982763140374,"vol_mean":0.9609193135372568,"std_resid":-1.2227855760217066,"q1":0.7726507102033202,"q2":0.948864555546777,"q3":1.1736721478435104},
{"x":152,"ret":-0.7934506135951656,"vol_mean":0.9578367913262787,"std_resid":-0.8283776743389715,"q1":0.7667812872634717,"q2":0.9461750064370833,"q3":1.1671479351851615},
{"x":153,"ret":1.382501018288413,"vol_mean":0.9580352195768175,"std_resid":1.4430586580095566,"q1":0.7681553485902662,"q2":0.9449231470184455,"q3":1.173498651129094},
{"x":154,"ret":-0.6613462785784165,"vol_mean":0.9525203513488524,"std_resid":-0.6943119668171837,"q1":0.7637881057195267,"q2":0.9404465187511001,"q3":1.164224492030924},
{"x":155,"ret":0.9428755689280497,"vol_mean":0.9509187855782347,"std_resid":0.9915416366022319,"q1":0.7618642834198845,"q2":0.939398382930709,"q3":1.1650510997987111},
{"x":156,"ret":-0.49557300638543084,"vol_mean":0.9467609587347766,"std_resid":-0.5234404754582402,"q1":0.7522362054568319,"q2":0.9350108317225809,"q3":1.1685119662349877},
{"x":157,"ret":-0.4598402502641967,"vol_mean":0.9441024192393573,"std_resid":-0.48706606496642596,"q1":0.7487013450103654,"q2":0.9348546311984473,"q3":1.1533002566631176},
{"x":158,"ret":0.28129575649935373,"vol_mean":0.9422457640871672,"std_resid":0.2985375654852305,"q1":0.743248641979116,"q2":0.9336825492546177,"q3":1.1470569463035447},
{"x":159,"ret":-0.5178240340695159,"vol_mean":0.948024708018841,"std_resid":-0.5462136479033886,"q1":0.7488433921949598,"q2":0.9378393082928895,"q3":1.160397146701209},
{"x":160,"ret":-1.3815426391665615,"vol_mean":0.9541242202490834,"std_resid":-1.447969362737586,"q1":0.759149533086921,"q2":0.9426883307550097,"q3":1.1796121474188819},
{"x":161,"ret":1.502711573684822,"vol_mean":0.956085422404185,"std_resid":1.5717335904004097,"q1":0.7633910465349126,"q2":0.9448499556943064,"q3":1.1710243249330745},
{"x":162,"ret":-0.4431399891208335,"vol_mean":0.9514173187434202,"std_resid":-0.4657682600376757,"q1":0.7568196598790949,"q2":0.9405727999707605,"q3":1.1625463055259573},
{"x":163,"ret":0.2585764750416383,"vol_mean":0.9496665527462766,"std_resid":0.27228133316254893,"q1":0.7522791896146731,"q2":0.942295417892085,"q3":1.1586867825754625},
{"x":164,"ret":-1.7095032286358498,"vol_mean":0.9528127508585259,"std_resid":-1.794164936495143,"q1":0.7535044969012153,"q2":0.9448534861852443,"q3":1.159514905807013},
{"x":165,"ret":-1.5897575243606703,"vol_mean":0.9489152871915676,"std_resid":-1.6753418833263343,"q1":0.7568784672892513,"q2":0.9425718832479826,"q3":1.146168593005893},
{"x":166,"ret":-0.11419463655310703,"vol_mean":0.9382394614075339,"std_resid":-0.12171161121468267,"q1":0.7384936042899213,"q2":0.9308834644173378,"q3":1.1478019143462457},
{"x":167,"ret":0.045466532570209814,"vol_mean":0.9313588621369563,"std_resid":0.04881741551896455,"q1":0.7194185318945399,"q2":0.9237755128473186,"q3":1.136019924254953},
{"x":168,"ret":-0.653229380434178,"vol_mean":0.9251168516342275,"std_resid":-0.7061047253438766,"q1":0.7230055737298154,"q2":0.9168470194389307,"q3":1.1257488511495273},
{"x":169,"ret":-0.05142140675282799,"vol_mean":0.9202915305126078,"std_resid":-0.05587512766110752,"q1":0.7005949338599265,"q2":0.9140159955628371,"q3":1.1291402001811544},
{"x":170,"ret":0.27205117912114607,"vol_mean":0.9193021887932474,"std_resid":0.2959322651872102,"q1":0.7003195132145595,"q2":0.913245882480962,"q3":1.1218451121443527},
{"x":171,"ret":0.745312260251881,"vol_mean":0.9184415059410429,"std_resid":0.8114967098402504,"q1":0.7117359056664344,"q2":0.912297390926886,"q3":1.1155421637277376},
{"x":172,"ret":-0.11035395888602917,"vol_mean":0.916730635535199,"std_resid":-0.12037773650010412,"q1":0.7098750296097057,"q2":0.910191993878974,"q3":1.117226769136986},
{"x":173,"ret":0.432364067831331,"vol_mean":0.9173903346282191,"std_resid":0.47129782330500636,"q1":0.7030321513851573,"q2":0.9109698643218385,"q3":1.124943317097429},
{"x":174,"ret":-1.19819001580385,"vol_mean":0.9188219515200218,"std_resid":-1.304050272005001,"q1":0.7080779235483703,"q2":0.9124914642984607,"q3":1.1269020814210982},
{"x":175,"ret":0.2983284889136429,"vol_mean":0.9170284426420089,"std_resid":0.32532086797018234,"q1":0.7069751524224996,"q2":0.9102807748250639,"q3":1.1171545505131757},
{"x":176,"ret":-0.021512606705105092,"vol_mean":0.918027599857471,"std_resid":-0.02343350756387395,"q1":0.7211760721135304,"q2":0.9076104000359051,"q3":1.1215049026171828},
{"x":177,"ret":1.131813828761745,"vol_mean":0.9189323052401747,"std_resid":1.2316618126358405,"q1":0.7180624947416288,"q2":0.9110613921196975,"q3":1.1238791675062831},
{"x":178,"ret":0.783212207126035,"vol_mean":0.9182235902208421,"std_resid":0.8529645888728088,"q1":0.7133889503779459,"q2":0.9097326482685018,"q3":1.1224606801226258},
{"x":179,"ret":-0.025703397311993892,"vol_mean":0.9175311493202,"std_resid":-0.02801365090551702,"q1":0.7165309417157076,"q2":0.9085602238557428,"q3":1.1183359984729222},
{"x":180,"ret":-0.23281054824649824,"vol_mean":0.9190456345860102,"std_resid":-0.25331772382703194,"q1":0.7118111378963662,"q2":0.912010167297139,"q3":1.1233733332629838},
{"x":181,"ret":-1.0032054239549346,"vol_mean":0.9232678547534756,"std_resid":-1.0865811246323565,"q1":0.7155420992283638,"q2":0.9158812052327692,"q3":1.1339209480517154},
{"x":182,"ret":0.8354753313942387,"vol_mean":0.9255328428248223,"std_resid":0.9026965794582517,"q1":0.7248648932141333,"q2":0.9149819116603543,"q3":1.139340735671738},
{"x":183,"ret":-0.5732709973166978,"vol_mean":0.9262550243985493,"std_resid":-0.618912699220113,"q1":0.7288596039611879,"q2":0.9168218157877762,"q3":1.1295604170065283},
{"x":184,"ret":1.1450568162366033,"vol_mean":0.927099408806692,"std_resid":1.235096048341195,"q1":0.7316577176995233,"q2":0.916875078653957,"q3":1.138915558146535},
{"x":185,"ret":0.8783648313226607,"vol_mean":0.9269335294538641,"std_resid":0.947602825242691,"q1":0.7374538796588129,"q2":0.9186275313740445,"q3":1.1250148498053418},
{"x":186,"ret":-0.24888300727752527,"vol_mean":0.9292361376360533,"std_resid":-0.2678361260364622,"q1":0.7340747601049934,"q2":0.9223768832992459,"q3":1.1261204986235192},
{"x":187,"ret":0.7228996624267281,"vol_mean":0.9328546538402371,"std_resid":0.7749327930678187,"q1":0.7433632468759868,"q2":0.9246948381838087,"q3":1.1359180232806556},
{"x":188,"ret":-0.12041647632534423,"vol_mean":0.9350297565629774,"std_resid":-0.12878357665105364,"q1":0.742295498893845,"q2":0.9265686983668338,"q3":1.1390804598451025},
{"x":189,"ret":-1.4352318894349707,"vol_mean":0.941742422807952,"std_resid":-1.5240174538974287,"q1":0.7550653578002194,"q2":0.9308249886479524,"q3":1.15470503590848},
{"x":190,"ret":0.8855858383172982,"vol_mean":0.9430679765271126,"std_resid":0.9390477254656713,"q1":0.7595580041983092,"q2":0.9332713466174807,"q3":1.1559142088173555},
{"x":191,"ret":-0.9025208818149901,"vol_mean":0.9437683924997448,"std_resid":-0.9562948801712855,"q1":0.7622584159667094,"q2":0.9321680230439976,"q3":1.1594048958246892},
{"x":192,"ret":-0.12074409616803661,"vol_mean":0.9452041609348878,"std_resid":-0.12774393211368257,"q1":0.7533675999149095,"q2":0.9331196999554,"q3":1.1636003821104224},
{"x":193,"ret":0.17269602853502322,"vol_mean":0.9518666313986637,"std_resid":0.1814288082367856,"q1":0.7628921409875679,"q2":0.9362227889795262,"q3":1.166619088535936},
{"x":194,"ret":1.3197102226275068,"vol_mean":0.9596942646970662,"std_resid":1.3751360940393678,"q1":0.7812657988982256,"q2":0.9461242653396652,"q3":1.1630431200755424},
{"x":195,"ret":0.32175060242573034,"vol_mean":0.9644642541603903,"std_resid":0.33360552352023537,"q1":0.7775685381610072,"q2":0.951953479597286,"q3":1.1762626150613344},
{"x":196,"ret":-0.7908568134899913,"vol_mean":0.9718384982673557,"std_resid":-0.8137739088335891,"q1":0.7894540255176363,"q2":0.9558720572362241,"q3":1.2010776508274505},
{"x":197,"ret":0.3874579326049864,"vol_mean":0.9820845906427474,"std_resid":0.3945260278968493,"q1":0.7970949832953207,"q2":0.9662574545469973,"q3":1.223877557013252},
{"x":198,"ret":1.5677556877923258,"vol_mean":0.9913678153729015,"std_resid":1.5814066822439832,"q1":0.8028458061367337,"q2":0.973143759570601,"q3":1.2311252173573488},
{"x":199,"ret":1.7762816619624333,"vol_mean":1.0006096859553908,"std_resid":1.775199347852029,"q1":0.8133434741301802,"q2":0.9818671139128013,"q3":1.2453738474738705},
{"x":200,"ret":1.9489452010696782,"vol_mean":1.0016030632797852,"std_resid":1.9458259189900908,"q1":0.8084318562253209,"q2":0.9835334816894943,"q3":1.2690446750679638}];
    const series = [{"name":"Posterior mean σ","color":"#ff7f0e","key":"vol_mean","dash":""}];
    const bands = [{"lo_key":"q1","hi_key":"q3","color":"#ff7f0e","alpha":0.15}];
    const refLines = [];

    const container = d3.select('#sv_vol_85');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('');
    if('σₜ') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('σₜ');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

(function() {
    const data = [{"x":1,"ret":0.2088332105422406,"vol_mean":0.9429135212758868,"std_resid":0.22147652550327376,"q1":0.7248570071258801,"q2":0.9303695862633153,"q3":1.1867570981617124},
{"x":2,"ret":0.4384722422321556,"vol_mean":0.9417216688642108,"std_resid":0.4656070437043113,"q1":0.7300512848110202,"q2":0.9293365453310337,"q3":1.1752386758105615},
{"x":3,"ret":0.4725842035933498,"vol_mean":0.9425243819120511,"std_resid":0.5014026296430044,"q1":0.7435262946402053,"q2":0.9286237832473603,"q3":1.1780413057190355},
{"x":4,"ret":1.6201447720624402,"vol_mean":0.9462825976839138,"std_resid":1.7121151504083945,"q1":0.7482729814049173,"q2":0.9329704094575311,"q3":1.1751682724404184},
{"x":5,"ret":0.28045405795416234,"vol_mean":0.9418779693553612,"std_resid":0.2977605030364075,"q1":0.742233284390177,"q2":0.9280765846367496,"q3":1.1686756276432566},
{"x":6,"ret":1.2983159215175022,"vol_mean":0.9418335159766515,"std_resid":1.3784983221489944,"q1":0.7482482124144146,"q2":0.927864141106228,"q3":1.1663041753714363},
{"x":7,"ret":-0.01987996243675271,"vol_mean":0.9373606550313351,"std_resid":-0.0212084455753993,"q1":0.738743668637602,"q2":0.9242463618343842,"q3":1.1601984470907243},
{"x":8,"ret":0.21824565572954072,"vol_mean":0.9351699451037727,"std_resid":0.23337539542646735,"q1":0.7433352294150543,"q2":0.923257891359834,"q3":1.1559219826078464},
{"x":9,"ret":0.25509660863237965,"vol_mean":0.9348644793823507,"std_resid":0.27287014776828156,"q1":0.7415127287286629,"q2":0.9236580703898575,"q3":1.1556344171896473},
{"x":10,"ret":-0.11999203046929163,"vol_mean":0.9375265218175804,"std_resid":-0.12798787839800346,"q1":0.7474386609362612,"q2":0.9255278034200293,"q3":1.1548496298422268},
{"x":11,"ret":-0.7174524918352548,"vol_mean":0.9401171355135414,"std_resid":-0.7631522336238926,"q1":0.7568315250789027,"q2":0.9279251656879792,"q3":1.154840794187391},
{"x":12,"ret":-0.21424087596888453,"vol_mean":0.9460128809138965,"std_resid":-0.22646718696041113,"q1":0.7601483772721638,"q2":0.9336680193506524,"q3":1.1625281767877975},
{"x":13,"ret":-0.4694096628322326,"vol_mean":0.9550362672346415,"std_resid":-0.49150977710138,"q1":0.7643222332356912,"q2":0.9394390228927934,"q3":1.1810979598814313},
{"x":14,"ret":1.5834667570079413,"vol_mean":0.9661672980394491,"std_resid":1.6389157035444264,"q1":0.7833389513156154,"q2":0.9500365777561,"q3":1.2087376222575814},
{"x":15,"ret":0.6132359583166904,"vol_mean":0.9724025264155485,"std_resid":0.6306400298826753,"q1":0.795681869048061,"q2":0.9564641392329147,"q3":1.2054407938316092},
{"x":16,"ret":-1.59366826383876,"vol_mean":0.9824557829855111,"std_resid":-1.6221272157367543,"q1":0.8073509680289646,"q2":0.9645833350667077,"q3":1.214798252448206},
{"x":17,"ret":-1.518919919412247,"vol_mean":0.9856876830769661,"std_resid":-1.540974839688287,"q1":0.8147822528189089,"q2":0.9705266372504486,"q3":1.2076219154985848},
{"x":18,"ret":1.3585377890997221,"vol_mean":0.986102349128575,"std_resid":1.377684365421369,"q1":0.8098996147793921,"q2":0.9688453030200872,"q3":1.1966832202546958},
{"x":19,"ret":-0.4835243227290544,"vol_mean":0.9869086547713657,"std_resid":-0.48993827381225175,"q1":0.810414670416662,"q2":0.971234824166134,"q3":1.2013066144620914},
{"x":20,"ret":-2.250502757283063,"vol_mean":0.9879283526029327,"std_resid":-2.278001994125968,"q1":0.8068687857256499,"q2":0.9717365615502475,"q3":1.2082537088032126},
{"x":21,"ret":0.3193832464242711,"vol_mean":0.9757977523950714,"std_resid":0.3273047572003039,"q1":0.8012297106627061,"q2":0.9622860022963725,"q3":1.1812790256188939},
{"x":22,"ret":-0.70656180301821,"vol_mean":0.9677345023059661,"std_resid":-0.730119471130335,"q1":0.7919912384358448,"q2":0.9567312696200635,"q3":1.1771021038117284},
{"x":23,"ret":-0.5381929256618667,"vol_mean":0.9616683819610192,"std_resid":-0.5596450249974863,"q1":0.7922781385158937,"q2":0.9472727100541936,"q3":1.1779511332217796},
{"x":24,"ret":-0.1561158927236592,"vol_mean":0.9582525988696764,"std_resid":-0.16291726514262359,"q1":0.7813135152654467,"q2":0.943994215532977,"q3":1.17983966823213},
{"x":25,"ret":0.6037225274273443,"vol_mean":0.9577202240012332,"std_resid":0.6303746253838813,"q1":0.7814285635636663,"q2":0.942834674832653,"q3":1.1854069883497504},
{"x":26,"ret":1.2657433557326152,"vol_mean":0.9566922693208041,"std_resid":1.3230412707643382,"q1":0.7807724620050549,"q2":0.9418493566532607,"q3":1.1909543577597972},
{"x":27,"ret":-1.1505071143854853,"vol_mean":0.9540870517437259,"std_resid":-1.205872265306163,"q1":0.7785296951917018,"q2":0.9402552146709101,"q3":1.159611495424805},
{"x":28,"ret":-0.9158592464479492,"vol_mean":0.9522929890730326,"std_resid":-0.9617410365894343,"q1":0.7686560176656045,"q2":0.9398897146305825,"q3":1.159466507701581},
{"x":29,"ret":0.5879337179676579,"vol_mean":0.9486931770110262,"std_resid":0.6197301005368405,"q1":0.7726566304300222,"q2":0.9362825842868723,"q3":1.1600971251933447},
{"x":30,"ret":-0.41282154828080614,"vol_mean":0.9420921417811711,"std_resid":-0.4381965733206341,"q1":0.7651498064493177,"q2":0.9286099934789303,"q3":1.1468477414378673},
{"x":31,"ret":-0.2429218347940629,"vol_mean":0.941361714863208,"std_resid":-0.2580536588205763,"q1":0.7657586703652967,"q2":0.9265207761819332,"q3":1.156315038325339},
{"x":32,"ret":-0.03516866082973856,"vol_mean":0.941406113087924,"std_resid":-0.03735758706131743,"q1":0.7552578154162409,"q2":0.9308191786075422,"q3":1.1442748569326116},
{"x":33,"ret":-1.1741778355680308,"vol_mean":0.9446237829708322,"std_resid":-1.2430110873084874,"q1":0.7634925651413128,"q2":0.9340075944599076,"q3":1.1521683823278455},
{"x":34,"ret":1.2286976023402392,"vol_mean":0.9481451009461028,"std_resid":1.2958961672788143,"q1":0.7744409088569797,"q2":0.9374590729149838,"q3":1.1527800084589932},
{"x":35,"ret":0.36443715993347037,"vol_mean":0.9483925277750356,"std_resid":0.3842682742223345,"q1":0.7752505041582413,"q2":0.9356029367628229,"q3":1.1749874916527652},
{"x":36,"ret":0.863519047346861,"vol_mean":0.9519361320891904,"std_resid":0.9071186797497826,"q1":0.7669122140208472,"q2":0.9393549267870003,"q3":1.173615834346141},
{"x":37,"ret":-0.6110236695657176,"vol_mean":0.954007775240947,"std_resid":-0.6404808067852441,"q1":0.7781376046956759,"q2":0.9396065379204683,"q3":1.1725357603859219},
{"x":38,"ret":-1.0731628669281819,"vol_mean":0.9581039723600435,"std_resid":-1.120090196771359,"q1":0.7741086409766718,"q2":0.9446810856410381,"q3":1.1867485891824807},
{"x":39,"ret":-0.558994605387216,"vol_mean":0.9579029346931545,"std_resid":-0.5835608026049937,"q1":0.7782939774146848,"q2":0.9465618109385694,"q3":1.1802992650233632},
{"x":40,"ret":0.05819751744237116,"vol_mean":0.9583273710343504,"std_resid":0.0607282221101093,"q1":0.7738758832021834,"q2":0.9449037429602621,"q3":1.1829022904507553},
{"x":41,"ret":1.5143016801942752,"vol_mean":0.9630060802877939,"std_resid":1.5724736439272813,"q1":0.7818025017629732,"q2":0.9492181613705908,"q3":1.189366239371561},
{"x":42,"ret":-0.6268646591147701,"vol_mean":0.9639177610507106,"std_resid":-0.6503300223781139,"q1":0.7934360271884926,"q2":0.9492685814908174,"q3":1.1777394792380216},
{"x":43,"ret":-1.1987953363968185,"vol_mean":0.9660976560931396,"std_resid":-1.2408635181299363,"q1":0.794041937968595,"q2":0.9504321377381891,"q3":1.184313739776717},
{"x":44,"ret":1.899472039842352,"vol_mean":0.969982047843942,"std_resid":1.9582548399369482,"q1":0.7999478346985482,"q2":0.953729936990278,"q3":1.1907496338543628},
{"x":45,"ret":-0.09971254641057269,"vol_mean":0.964159707347914,"std_resid":-0.10341911786051408,"q1":0.7921071303853265,"q2":0.9492939916436218,"q3":1.1887342644341543},
{"x":46,"ret":0.009760745845731295,"vol_mean":0.9646244629202392,"std_resid":0.01011870030351736,"q1":0.7935332759291368,"q2":0.9522526738778956,"q3":1.1838030572924145},
{"x":47,"ret":1.545285105465797,"vol_mean":0.9667084331283129,"std_resid":1.5985017327977407,"q1":0.79891642827304,"q2":0.9525710000363014,"q3":1.1763190505254832},
{"x":48,"ret":-1.4799904964815829,"vol_mean":0.9629569952531172,"std_resid":-1.5369227325593717,"q1":0.7847153230480196,"q2":0.9498646399500412,"q3":1.1723157633186372},
{"x":49,"ret":0.6579032422092371,"vol_mean":0.9557310958380254,"std_resid":0.6883769347615082,"q1":0.7786216179375608,"q2":0.9413208899432245,"q3":1.1749773777325958},
{"x":50,"ret":0.018781499514349355,"vol_mean":0.9471022915567806,"std_resid":0.01983048682468885,"q1":0.7623668990344401,"q2":0.9350293937028231,"q3":1.1606172200519624},
{"x":51,"ret":0.43823774231229634,"vol_mean":0.9443321074529656,"std_resid":0.46407163205993573,"q1":0.7636096654673704,"q2":0.932121389158211,"q3":1.156400607662492},
{"x":52,"ret":-0.8184545502763483,"vol_mean":0.9434650953010361,"std_resid":-0.8674984950187267,"q1":0.7504226454916136,"q2":0.9313858729718021,"q3":1.160228128916636},
{"x":53,"ret":-0.4364375470212315,"vol_mean":0.9429369593254989,"std_resid":-0.4628491254955408,"q1":0.7545294804663623,"q2":0.930180375621223,"q3":1.1491775299014306},
{"x":54,"ret":1.5083581349182493,"vol_mean":0.945529085421949,"std_resid":1.595253026241,"q1":0.7616633996765513,"q2":0.9318871791681066,"q3":1.1528716219539827},
{"x":55,"ret":-0.399833933142405,"vol_mean":0.9416776379623438,"std_resid":-0.4245974599201364,"q1":0.7531856397642895,"q2":0.929096499725269,"q3":1.157793559695274},
{"x":56,"ret":0.6776588566587324,"vol_mean":0.9375516147690448,"std_resid":0.7227963196732011,"q1":0.7465654861007406,"q2":0.9264103952716762,"q3":1.1654218156976233},
{"x":57,"ret":-0.25870957887814156,"vol_mean":0.9376662538742846,"std_resid":-0.2759079553190654,"q1":0.7481373059207516,"q2":0.9251748878403896,"q3":1.1679381828138973},
{"x":58,"ret":-0.3325448241067508,"vol_mean":0.9372849456973673,"std_resid":-0.35479586611660313,"q1":0.7445818710397604,"q2":0.9263082510424745,"q3":1.1660850185697431},
{"x":59,"ret":-0.7045956337428738,"vol_mean":0.9383080444111037,"std_resid":-0.750921446256052,"q1":0.7482957307281007,"q2":0.927480446705504,"q3":1.151585575999288},
{"x":60,"ret":-0.475919965044083,"vol_mean":0.940208854922097,"std_resid":-0.5061853678069393,"q1":0.7516273880334411,"q2":0.9265860695125486,"q3":1.1562694663024418},
{"x":61,"ret":-0.1609112014771097,"vol_mean":0.9416532852254648,"std_resid":-0.17088158030328743,"q1":0.7621395656832199,"q2":0.929538478183781,"q3":1.1551170734564866},
{"x":62,"ret":0.6167444193105983,"vol_mean":0.9489174657421934,"std_resid":0.6499452708758113,"q1":0.7593485940564028,"q2":0.9384796210798269,"q3":1.162038215466939},
{"x":63,"ret":1.656725291225609,"vol_mean":0.9550721008347052,"std_resid":1.7346599170656114,"q1":0.7718454111671883,"q2":0.9425029600634264,"q3":1.1709776440560669},
{"x":64,"ret":-1.115507949315443,"vol_mean":0.9562553914001221,"std_resid":-1.1665376837061778,"q1":0.77858868906047,"q2":0.9430186700503252,"q3":1.1627356351934324},
{"x":65,"ret":-1.0786607458137447,"vol_mean":0.9554537146793665,"std_resid":-1.1289513340536066,"q1":0.768099183413625,"q2":0.9429800426124729,"q3":1.1620350495204366},
{"x":66,"ret":0.8024570646067546,"vol_mean":0.9520336434222335,"std_resid":0.8428872972620982,"q1":0.7692583524639514,"q2":0.9371574230001702,"q3":1.1698419980715327},
{"x":67,"ret":0.8848294326243195,"vol_mean":0.9526346239697789,"std_resid":0.9288235073139537,"q1":0.7695910331013259,"q2":0.9396159400391628,"q3":1.1776258169781864},
{"x":68,"ret":-1.0237559862922225,"vol_mean":0.95223632800528,"std_resid":-1.075107046626503,"q1":0.7619770411837193,"q2":0.9385410705698497,"q3":1.163078629717284},
{"x":69,"ret":0.19164735276562897,"vol_mean":0.94983042365237,"std_resid":0.2017700717868038,"q1":0.760426268755015,"q2":0.937149050141885,"q3":1.1754698142989102},
{"x":70,"ret":0.13301422503123553,"vol_mean":0.9486022794105253,"std_resid":0.1402212791581024,"q1":0.7693556933708176,"q2":0.9331449747170594,"q3":1.1680837986736679},
{"x":71,"ret":-0.4792172281770884,"vol_mean":0.9513350498950768,"std_resid":-0.5037312860804839,"q1":0.7741694421866929,"q2":0.9378576530678584,"q3":1.169579852927933},
{"x":72,"ret":0.2939583971472789,"vol_mean":0.9554140949934251,"std_resid":0.30767642919199534,"q1":0.7809685767865387,"q2":0.9433198342828052,"q3":1.1606140026364018},
{"x":73,"ret":-1.0602586327856445,"vol_mean":0.961431564646251,"std_resid":-1.1027915784892666,"q1":0.7886191468662785,"q2":0.9456781101172519,"q3":1.1810716402961743},
{"x":74,"ret":-0.026493476200401492,"vol_mean":0.9666032346111884,"std_resid":-0.02740884289618415,"q1":0.7959623383215363,"q2":0.9500705503325416,"q3":1.178541090535235},
{"x":75,"ret":1.644352653793086,"vol_mean":0.9771218063112367,"std_resid":1.6828532974826684,"q1":0.8064558311749117,"q2":0.9629183517794436,"q3":1.2057708869793664},
{"x":76,"ret":-1.272674368713393,"vol_mean":0.9824714955680397,"std_resid":-1.2953804506842872,"q1":0.8119095140737703,"q2":0.9646882603766977,"q3":1.2166193088352972},
{"x":77,"ret":-0.34438109788519616,"vol_mean":0.988038761665152,"std_resid":-0.34855018977677266,"q1":0.8144938632637411,"q2":0.9715713346408837,"q3":1.2192360646873752},
{"x":78,"ret":1.2497844874830284,"vol_mean":0.9956046239210637,"std_resid":1.2553020119180536,"q1":0.8255996937162804,"q2":0.975644623989724,"q3":1.2280134475550322},
{"x":79,"ret":1.007692869460378,"vol_mean":0.999511838011172,"std_resid":1.0081850270682982,"q1":0.8259606464916898,"q2":0.9783103548725572,"q3":1.2308714484165304},
{"x":80,"ret":-2.183101935152624,"vol_mean":1.0054725579131227,"std_resid":-2.171219809005721,"q1":0.8335522182192021,"q2":0.9856054835447486,"q3":1.2478176959825362},
{"x":81,"ret":-1.95694257620551,"vol_mean":1.002331453615531,"std_resid":-1.9523906679238499,"q1":0.8319355610967052,"q2":0.9830702889504326,"q3":1.2335863758863972},
{"x":82,"ret":0.5115918005306112,"vol_mean":0.9905277722354218,"std_resid":0.516484055137648,"q1":0.8124166359066657,"q2":0.9735445024809378,"q3":1.2311990143748113},
{"x":83,"ret":0.7868160673314945,"vol_mean":0.9836369212710134,"std_resid":0.7999049754199999,"q1":0.8108319114191166,"q2":0.9650701591620433,"q3":1.228899153187797},
{"x":84,"ret":-0.4318914694159917,"vol_mean":0.974773602272835,"std_resid":-0.44306849140043403,"q1":0.7911043762021377,"q2":0.959516187479846,"q3":1.2063926555929902},
{"x":85,"ret":0.08450767412628944,"vol_mean":0.972095843372472,"std_resid":0.08693347955599595,"q1":0.7863475423509592,"q2":0.9574720740168661,"q3":1.1961363896320554},
{"x":86,"ret":0.3627089596358936,"vol_mean":0.9693065338659728,"std_resid":0.37419427906801445,"q1":0.7897381199069776,"q2":0.9545291952903061,"q3":1.197238038321309},
{"x":87,"ret":0.4057153815080021,"vol_mean":0.9701064179309302,"std_resid":0.4182173976060514,"q1":0.7943401949977912,"q2":0.9539378353557811,"q3":1.1925876154786377},
{"x":88,"ret":0.648356747464586,"vol_mean":0.9773756268238578,"std_resid":0.6633649639612229,"q1":0.7998476112872701,"q2":0.9600444120909128,"q3":1.2200841765204817},
{"x":89,"ret":-2.3422253505792994,"vol_mean":0.9870209997007825,"std_resid":-2.373024840696753,"q1":0.809823138060402,"q2":0.9672451616574521,"q3":1.225839576408786},
{"x":90,"ret":0.058537307292524224,"vol_mean":0.9802585985237515,"std_resid":0.0597161885452269,"q1":0.8007744396478377,"q2":0.961697727981737,"q3":1.2173032513629076},
{"x":91,"ret":1.2407776250140905,"vol_mean":0.9769356579040368,"std_resid":1.2700709765022935,"q1":0.793083345841161,"q2":0.9601334745517974,"q3":1.2044537976144196},
{"x":92,"ret":-0.671120074880389,"vol_mean":0.9743159302765836,"std_resid":-0.688811558987725,"q1":0.7920402235185252,"q2":0.959151812207146,"q3":1.2018048666482568},
{"x":93,"ret":0.6545125074113552,"vol_mean":0.971830931166818,"std_resid":0.6734839223788875,"q1":0.7826929906023993,"q2":0.9542777817622681,"q3":1.2011287216312367},
{"x":94,"ret":1.4627322738064892,"vol_mean":0.9715531536496936,"std_resid":1.5055607285218042,"q1":0.7783294948573336,"q2":0.9557256353526267,"q3":1.2092002107830562},
{"x":95,"ret":-0.4026323321259725,"vol_mean":0.9673387757981811,"std_resid":-0.4162268092620893,"q1":0.7658613261593078,"q2":0.954178759474159,"q3":1.2026488731167704},
{"x":96,"ret":0.2478964729796932,"vol_mean":0.9638536319624512,"std_resid":0.2571930682825403,"q1":0.7660676587775122,"q2":0.9503017067911885,"q3":1.1965991087649197},
{"x":97,"ret":0.6378644683857844,"vol_mean":0.9644075399847117,"std_resid":0.6614055178331518,"q1":0.7824719662520652,"q2":0.949376118824337,"q3":1.1940708445437642},
{"x":98,"ret":-1.0784077774543137,"vol_mean":0.9672305291154472,"std_resid":-1.1149438990935703,"q1":0.785766249991355,"q2":0.9494127883737509,"q3":1.1842833935475008},
{"x":99,"ret":0.6661928537123607,"vol_mean":0.9679596857519097,"std_resid":0.6882444212486629,"q1":0.7872861535156577,"q2":0.9509585293405128,"q3":1.1913884593860782},
{"x":100,"ret":-1.3601924980733364,"vol_mean":0.9708883807014335,"std_resid":-1.4009772133544787,"q1":0.7857748890031012,"q2":0.9541234934610336,"q3":1.2127957513548666},
{"x":101,"ret":0.5950165375641198,"vol_mean":0.9709116411621315,"std_resid":0.6128431386937697,"q1":0.7827570471818464,"q2":0.9557335237738608,"q3":1.212639654366857},
{"x":102,"ret":-0.14126834445413233,"vol_mean":0.9703658962854441,"std_resid":-0.14558255292658867,"q1":0.7899524497619902,"q2":0.954278594999521,"q3":1.2044509911212116},
{"x":103,"ret":-1.3546396920477852,"vol_mean":0.9769800961439773,"std_resid":-1.3865581268179208,"q1":0.7871173684659191,"q2":0.957720318818139,"q3":1.2250295827328814},
{"x":104,"ret":-0.7149103634153315,"vol_mean":0.9785078030546952,"std_resid":-0.7306128384296293,"q1":0.7905008626839208,"q2":0.9604241977349154,"q3":1.2366968114363397},
{"x":105,"ret":-0.30829894213322245,"vol_mean":0.9787152265002053,"std_resid":-0.31500372507299274,"q1":0.7852250620793824,"q2":0.9570510101313988,"q3":1.235402255503482},
{"x":106,"ret":-0.5558008236381837,"vol_mean":0.983789886527942,"std_resid":-0.5649588710448669,"q1":0.7828510345291099,"q2":0.9628314437276114,"q3":1.2348182114060895},
{"x":107,"ret":0.11842629292379253,"vol_mean":0.988891972600586,"std_resid":0.11975655198449565,"q1":0.7998489732976901,"q2":0.9675400275246447,"q3":1.2537540636407167},
{"x":108,"ret":1.4784668469101363,"vol_mean":0.9993213858209589,"std_resid":1.479470836797465,"q1":0.8118129644586488,"q2":0.9763044553317617,"q3":1.2610748928567073},
{"x":109,"ret":0.3450991513310631,"vol_mean":1.007835954806767,"std_resid":0.3424159950685915,"q1":0.8219370224536734,"q2":0.985495523383395,"q3":1.2808415701897238},
{"x":110,"ret":-0.7875438839569323,"vol_mean":1.0172541579382626,"std_resid":-0.7741859571781947,"q1":0.8331307729652372,"q2":0.9936388473965428,"q3":1.280264723580186},
{"x":111,"ret":-2.459079052486651,"vol_mean":1.0306688401742172,"std_resid":-2.3859060802410452,"q1":0.8488103578597462,"q2":1.0057465434233839,"q3":1.301684261757103},
{"x":112,"ret":1.985713821808472,"vol_mean":1.0323126823326298,"std_resid":1.9235584874551013,"q1":0.8431531192996138,"q2":1.0052869303486878,"q3":1.303279901484109},
{"x":113,"ret":0.32277864640718545,"vol_mean":1.0236809343188944,"std_resid":0.3153117691128497,"q1":0.8418801897858779,"q2":0.9990422697342074,"q3":1.2899780312658846},
{"x":114,"ret":1.8546881587438901,"vol_mean":1.0221804023789136,"std_resid":1.8144430811112078,"q1":0.8427969138277471,"q2":0.9996529959040753,"q3":1.2752957535852203},
{"x":115,"ret":1.6327579825632743,"vol_mean":1.0147666312499972,"std_resid":1.608998495104269,"q1":0.8302037650109855,"q2":0.9940822935988689,"q3":1.257609398131322},
{"x":116,"ret":0.23699866408894116,"vol_mean":1.004309981284909,"std_resid":0.23598158786167422,"q1":0.8273813100469406,"q2":0.983309256848725,"q3":1.2370169041293124},
{"x":117,"ret":0.1938232907826632,"vol_mean":0.9961640539079374,"std_resid":0.19456964946917849,"q1":0.8173610729081539,"q2":0.9756734091157384,"q3":1.2412350593633725},
{"x":118,"ret":0.9690563038822385,"vol_mean":0.9899343031721718,"std_resid":0.9789097122677421,"q1":0.8142852317254575,"q2":0.9701033508293085,"q3":1.2231257072632866},
{"x":119,"ret":-1.0490474709800932,"vol_mean":0.9857770086751222,"std_resid":-1.064183341413091,"q1":0.8083673448328096,"q2":0.9686812502168258,"q3":1.2115459794222583},
{"x":120,"ret":-0.7696881032986889,"vol_mean":0.9792016012241623,"std_resid":-0.786036401836407,"q1":0.7964753628946457,"q2":0.9637753324468736,"q3":1.2127486540053805},
{"x":121,"ret":-0.42308277859212345,"vol_mean":0.9753789842485835,"std_resid":-0.43376245072376635,"q1":0.7942742677018384,"q2":0.9593396921037933,"q3":1.2058368749885184},
{"x":122,"ret":0.30928199837740133,"vol_mean":0.9739013813708068,"std_resid":0.31757014035864084,"q1":0.7939583503117627,"q2":0.956374516490287,"q3":1.2064903315354507},
{"x":123,"ret":0.8904646200777416,"vol_mean":0.9759529499030978,"std_resid":0.9124052754450466,"q1":0.7957361722962866,"q2":0.959952783353572,"q3":1.2091560711788114},
{"x":124,"ret":-0.9264139330741645,"vol_mean":0.9804682351556411,"std_resid":-0.9448688900432395,"q1":0.805910380927051,"q2":0.9638156175446492,"q3":1.2058124195580857},
{"x":125,"ret":0.9791979163882076,"vol_mean":0.983401134751698,"std_resid":0.9957258353534932,"q1":0.8090726343876735,"q2":0.9685754219336465,"q3":1.2087333012448593},
{"x":126,"ret":-1.3828053601964323,"vol_mean":0.9882093118628015,"std_resid":-1.399304118668753,"q1":0.8205000378871616,"q2":0.9744044314067903,"q3":1.2091082279851726},
{"x":127,"ret":-1.986484629440342,"vol_mean":0.9917418254766676,"std_resid":-2.003025967454347,"q1":0.827083713135169,"q2":0.9760358567090378,"q3":1.2233337474587216},
{"x":128,"ret":-0.8566022313678463,"vol_mean":0.9867935363702771,"std_resid":-0.868066317619678,"q1":0.8182645696354549,"q2":0.9725696771818777,"q3":1.2079793539252008},
{"x":129,"ret":-0.5228187593686185,"vol_mean":0.9827412666476562,"std_resid":-0.5320004126335988,"q1":0.8100327135225148,"q2":0.9676467308416207,"q3":1.1975448755845577},
{"x":130,"ret":0.38699283912599847,"vol_mean":0.9821055020705409,"std_resid":0.3940440597370793,"q1":0.8099298727704431,"q2":0.9679175094132016,"q3":1.2018659112211916},
{"x":131,"ret":0.6311105096037605,"vol_mean":0.9841307790886903,"std_resid":0.6412872384584616,"q1":0.8048681082955133,"q2":0.9697893876734451,"q3":1.2138390025460495},
{"x":132,"ret":-2.2156582542334338,"vol_mean":0.9886365105779351,"std_resid":-2.2411252573892995,"q1":0.8107641421908093,"q2":0.9745741671594426,"q3":1.2163830416194397},
{"x":133,"ret":0.22006438651225776,"vol_mean":0.9843044397016576,"std_resid":0.2235734978285369,"q1":0.801308370547954,"q2":0.9671244318524139,"q3":1.222920422751869},
{"x":134,"ret":-1.2966962818325518,"vol_mean":0.9807817976530768,"std_resid":-1.322104758607297,"q1":0.8033007687959149,"q2":0.9642277599924436,"q3":1.214973161205799},
{"x":135,"ret":0.12913907274949055,"vol_mean":0.9715809525873131,"std_resid":0.13291643110704685,"q1":0.7937482032620649,"q2":0.9543910590354483,"q3":1.1945562640930631},
{"x":136,"ret":-0.6706073470895847,"vol_mean":0.9724765091876787,"std_resid":-0.6895871938847665,"q1":0.7897068168592916,"q2":0.954872443581751,"q3":1.197103148665446},
{"x":137,"ret":-1.3920969135607244,"vol_mean":0.9711045758249525,"std_resid":-1.4335190547095706,"q1":0.7935556339288025,"q2":0.9556397816164877,"q3":1.1943693430072093},
{"x":138,"ret":-0.7698577304637512,"vol_mean":0.967333709706514,"std_resid":-0.7958553731135076,"q1":0.7858952322784738,"q2":0.9492634335798954,"q3":1.1979809744905563},
{"x":139,"ret":-0.6403040790449113,"vol_mean":0.9601113331316199,"std_resid":-0.6669060732325853,"q1":0.7753731921723362,"q2":0.9466829021555158,"q3":1.182564737958581},
{"x":140,"ret":0.09192223719142951,"vol_mean":0.9588258039263592,"std_resid":0.09586959050852727,"q1":0.7711204219352706,"q2":0.9452789090481831,"q3":1.1785352056213663},
{"x":141,"ret":-0.44595412461193007,"vol_mean":0.9571678341841875,"std_resid":-0.4659100616267839,"q1":0.771920813541269,"q2":0.9404420590338043,"q3":1.1945957893412578},
{"x":142,"ret":-0.8684779465340083,"vol_mean":0.9576547961492115,"std_resid":-0.906879963454693,"q1":0.7739453888070564,"q2":0.9416267372805851,"q3":1.1825765700050916},
{"x":143,"ret":1.0116831076128363,"vol_mean":0.9588158649367627,"std_resid":1.0551380558138348,"q1":0.7722384786977663,"q2":0.944757040607808,"q3":1.1869940552674525},
{"x":144,"ret":-0.5811084214553092,"vol_mean":0.9598823072640972,"std_resid":-0.6053954917781664,"q1":0.7798819261194615,"q2":0.9447094692891319,"q3":1.1941494819214986},
{"x":145,"ret":1.0593932021147066,"vol_mean":0.9622605183986551,"std_resid":1.1009421896241725,"q1":0.773234866018017,"q2":0.9451080754306385,"q3":1.1936284363145695},
{"x":146,"ret":1.1821782874978086,"vol_mean":0.9659357694048392,"std_resid":1.2238684237008919,"q1":0.7888596699600106,"q2":0.9503795581914178,"q3":1.1982574283810872},
{"x":147,"ret":-0.23344395094350798,"vol_mean":0.9636177245387024,"std_resid":-0.24225784250207824,"q1":0.7845980473123546,"q2":0.9484670552007654,"q3":1.18587143864395},
{"x":148,"ret":1.4223996688457998,"vol_mean":0.9644434568043133,"std_resid":1.474839876625765,"q1":0.7899743768804116,"q2":0.9502182932768111,"q3":1.1819210987755984},
{"x":149,"ret":0.9282411501765593,"vol_mean":0.9629291830615054,"std_resid":0.9639765483328067,"q1":0.7796487267886141,"q2":0.9488092878434469,"q3":1.1946861416117152},
{"x":150,"ret":0.939487795875224,"vol_mean":0.9630019480758325,"std_resid":0.9755824458635916,"q1":0.7708582313135188,"q2":0.9510024864114118,"q3":1.1861668064850537},
{"x":151,"ret":-1.1749982763140374,"vol_mean":0.9609193135372568,"std_resid":-1.2227855760217066,"q1":0.7726507102033202,"q2":0.948864555546777,"q3":1.1736721478435104},
{"x":152,"ret":-0.7934506135951656,"vol_mean":0.9578367913262787,"std_resid":-0.8283776743389715,"q1":0.7667812872634717,"q2":0.9461750064370833,"q3":1.1671479351851615},
{"x":153,"ret":1.382501018288413,"vol_mean":0.9580352195768175,"std_resid":1.4430586580095566,"q1":0.7681553485902662,"q2":0.9449231470184455,"q3":1.173498651129094},
{"x":154,"ret":-0.6613462785784165,"vol_mean":0.9525203513488524,"std_resid":-0.6943119668171837,"q1":0.7637881057195267,"q2":0.9404465187511001,"q3":1.164224492030924},
{"x":155,"ret":0.9428755689280497,"vol_mean":0.9509187855782347,"std_resid":0.9915416366022319,"q1":0.7618642834198845,"q2":0.939398382930709,"q3":1.1650510997987111},
{"x":156,"ret":-0.49557300638543084,"vol_mean":0.9467609587347766,"std_resid":-0.5234404754582402,"q1":0.7522362054568319,"q2":0.9350108317225809,"q3":1.1685119662349877},
{"x":157,"ret":-0.4598402502641967,"vol_mean":0.9441024192393573,"std_resid":-0.48706606496642596,"q1":0.7487013450103654,"q2":0.9348546311984473,"q3":1.1533002566631176},
{"x":158,"ret":0.28129575649935373,"vol_mean":0.9422457640871672,"std_resid":0.2985375654852305,"q1":0.743248641979116,"q2":0.9336825492546177,"q3":1.1470569463035447},
{"x":159,"ret":-0.5178240340695159,"vol_mean":0.948024708018841,"std_resid":-0.5462136479033886,"q1":0.7488433921949598,"q2":0.9378393082928895,"q3":1.160397146701209},
{"x":160,"ret":-1.3815426391665615,"vol_mean":0.9541242202490834,"std_resid":-1.447969362737586,"q1":0.759149533086921,"q2":0.9426883307550097,"q3":1.1796121474188819},
{"x":161,"ret":1.502711573684822,"vol_mean":0.956085422404185,"std_resid":1.5717335904004097,"q1":0.7633910465349126,"q2":0.9448499556943064,"q3":1.1710243249330745},
{"x":162,"ret":-0.4431399891208335,"vol_mean":0.9514173187434202,"std_resid":-0.4657682600376757,"q1":0.7568196598790949,"q2":0.9405727999707605,"q3":1.1625463055259573},
{"x":163,"ret":0.2585764750416383,"vol_mean":0.9496665527462766,"std_resid":0.27228133316254893,"q1":0.7522791896146731,"q2":0.942295417892085,"q3":1.1586867825754625},
{"x":164,"ret":-1.7095032286358498,"vol_mean":0.9528127508585259,"std_resid":-1.794164936495143,"q1":0.7535044969012153,"q2":0.9448534861852443,"q3":1.159514905807013},
{"x":165,"ret":-1.5897575243606703,"vol_mean":0.9489152871915676,"std_resid":-1.6753418833263343,"q1":0.7568784672892513,"q2":0.9425718832479826,"q3":1.146168593005893},
{"x":166,"ret":-0.11419463655310703,"vol_mean":0.9382394614075339,"std_resid":-0.12171161121468267,"q1":0.7384936042899213,"q2":0.9308834644173378,"q3":1.1478019143462457},
{"x":167,"ret":0.045466532570209814,"vol_mean":0.9313588621369563,"std_resid":0.04881741551896455,"q1":0.7194185318945399,"q2":0.9237755128473186,"q3":1.136019924254953},
{"x":168,"ret":-0.653229380434178,"vol_mean":0.9251168516342275,"std_resid":-0.7061047253438766,"q1":0.7230055737298154,"q2":0.9168470194389307,"q3":1.1257488511495273},
{"x":169,"ret":-0.05142140675282799,"vol_mean":0.9202915305126078,"std_resid":-0.05587512766110752,"q1":0.7005949338599265,"q2":0.9140159955628371,"q3":1.1291402001811544},
{"x":170,"ret":0.27205117912114607,"vol_mean":0.9193021887932474,"std_resid":0.2959322651872102,"q1":0.7003195132145595,"q2":0.913245882480962,"q3":1.1218451121443527},
{"x":171,"ret":0.745312260251881,"vol_mean":0.9184415059410429,"std_resid":0.8114967098402504,"q1":0.7117359056664344,"q2":0.912297390926886,"q3":1.1155421637277376},
{"x":172,"ret":-0.11035395888602917,"vol_mean":0.916730635535199,"std_resid":-0.12037773650010412,"q1":0.7098750296097057,"q2":0.910191993878974,"q3":1.117226769136986},
{"x":173,"ret":0.432364067831331,"vol_mean":0.9173903346282191,"std_resid":0.47129782330500636,"q1":0.7030321513851573,"q2":0.9109698643218385,"q3":1.124943317097429},
{"x":174,"ret":-1.19819001580385,"vol_mean":0.9188219515200218,"std_resid":-1.304050272005001,"q1":0.7080779235483703,"q2":0.9124914642984607,"q3":1.1269020814210982},
{"x":175,"ret":0.2983284889136429,"vol_mean":0.9170284426420089,"std_resid":0.32532086797018234,"q1":0.7069751524224996,"q2":0.9102807748250639,"q3":1.1171545505131757},
{"x":176,"ret":-0.021512606705105092,"vol_mean":0.918027599857471,"std_resid":-0.02343350756387395,"q1":0.7211760721135304,"q2":0.9076104000359051,"q3":1.1215049026171828},
{"x":177,"ret":1.131813828761745,"vol_mean":0.9189323052401747,"std_resid":1.2316618126358405,"q1":0.7180624947416288,"q2":0.9110613921196975,"q3":1.1238791675062831},
{"x":178,"ret":0.783212207126035,"vol_mean":0.9182235902208421,"std_resid":0.8529645888728088,"q1":0.7133889503779459,"q2":0.9097326482685018,"q3":1.1224606801226258},
{"x":179,"ret":-0.025703397311993892,"vol_mean":0.9175311493202,"std_resid":-0.02801365090551702,"q1":0.7165309417157076,"q2":0.9085602238557428,"q3":1.1183359984729222},
{"x":180,"ret":-0.23281054824649824,"vol_mean":0.9190456345860102,"std_resid":-0.25331772382703194,"q1":0.7118111378963662,"q2":0.912010167297139,"q3":1.1233733332629838},
{"x":181,"ret":-1.0032054239549346,"vol_mean":0.9232678547534756,"std_resid":-1.0865811246323565,"q1":0.7155420992283638,"q2":0.9158812052327692,"q3":1.1339209480517154},
{"x":182,"ret":0.8354753313942387,"vol_mean":0.9255328428248223,"std_resid":0.9026965794582517,"q1":0.7248648932141333,"q2":0.9149819116603543,"q3":1.139340735671738},
{"x":183,"ret":-0.5732709973166978,"vol_mean":0.9262550243985493,"std_resid":-0.618912699220113,"q1":0.7288596039611879,"q2":0.9168218157877762,"q3":1.1295604170065283},
{"x":184,"ret":1.1450568162366033,"vol_mean":0.927099408806692,"std_resid":1.235096048341195,"q1":0.7316577176995233,"q2":0.916875078653957,"q3":1.138915558146535},
{"x":185,"ret":0.8783648313226607,"vol_mean":0.9269335294538641,"std_resid":0.947602825242691,"q1":0.7374538796588129,"q2":0.9186275313740445,"q3":1.1250148498053418},
{"x":186,"ret":-0.24888300727752527,"vol_mean":0.9292361376360533,"std_resid":-0.2678361260364622,"q1":0.7340747601049934,"q2":0.9223768832992459,"q3":1.1261204986235192},
{"x":187,"ret":0.7228996624267281,"vol_mean":0.9328546538402371,"std_resid":0.7749327930678187,"q1":0.7433632468759868,"q2":0.9246948381838087,"q3":1.1359180232806556},
{"x":188,"ret":-0.12041647632534423,"vol_mean":0.9350297565629774,"std_resid":-0.12878357665105364,"q1":0.742295498893845,"q2":0.9265686983668338,"q3":1.1390804598451025},
{"x":189,"ret":-1.4352318894349707,"vol_mean":0.941742422807952,"std_resid":-1.5240174538974287,"q1":0.7550653578002194,"q2":0.9308249886479524,"q3":1.15470503590848},
{"x":190,"ret":0.8855858383172982,"vol_mean":0.9430679765271126,"std_resid":0.9390477254656713,"q1":0.7595580041983092,"q2":0.9332713466174807,"q3":1.1559142088173555},
{"x":191,"ret":-0.9025208818149901,"vol_mean":0.9437683924997448,"std_resid":-0.9562948801712855,"q1":0.7622584159667094,"q2":0.9321680230439976,"q3":1.1594048958246892},
{"x":192,"ret":-0.12074409616803661,"vol_mean":0.9452041609348878,"std_resid":-0.12774393211368257,"q1":0.7533675999149095,"q2":0.9331196999554,"q3":1.1636003821104224},
{"x":193,"ret":0.17269602853502322,"vol_mean":0.9518666313986637,"std_resid":0.1814288082367856,"q1":0.7628921409875679,"q2":0.9362227889795262,"q3":1.166619088535936},
{"x":194,"ret":1.3197102226275068,"vol_mean":0.9596942646970662,"std_resid":1.3751360940393678,"q1":0.7812657988982256,"q2":0.9461242653396652,"q3":1.1630431200755424},
{"x":195,"ret":0.32175060242573034,"vol_mean":0.9644642541603903,"std_resid":0.33360552352023537,"q1":0.7775685381610072,"q2":0.951953479597286,"q3":1.1762626150613344},
{"x":196,"ret":-0.7908568134899913,"vol_mean":0.9718384982673557,"std_resid":-0.8137739088335891,"q1":0.7894540255176363,"q2":0.9558720572362241,"q3":1.2010776508274505},
{"x":197,"ret":0.3874579326049864,"vol_mean":0.9820845906427474,"std_resid":0.3945260278968493,"q1":0.7970949832953207,"q2":0.9662574545469973,"q3":1.223877557013252},
{"x":198,"ret":1.5677556877923258,"vol_mean":0.9913678153729015,"std_resid":1.5814066822439832,"q1":0.8028458061367337,"q2":0.973143759570601,"q3":1.2311252173573488},
{"x":199,"ret":1.7762816619624333,"vol_mean":1.0006096859553908,"std_resid":1.775199347852029,"q1":0.8133434741301802,"q2":0.9818671139128013,"q3":1.2453738474738705},
{"x":200,"ret":1.9489452010696782,"vol_mean":1.0016030632797852,"std_resid":1.9458259189900908,"q1":0.8084318562253209,"q2":0.9835334816894943,"q3":1.2690446750679638}];
    const series = [{"name":"Std. Residuals","color":"#2ca02c","key":"std_resid","dash":""}];
    const bands = [];
    const refLines = [{"value":2,"color":"#d62728","dash":"4,3"},{"value":-2,"color":"#d62728","dash":"4,3"},{"value":0,"color":"#999","dash":"4,3"}];

    const container = d3.select('#sv_zr_86');
    const W = Math.max(container.node().clientWidth - 24, 280);
    const margin = {top:10, right:15, bottom:35, left:55};
    const w = W - margin.left - margin.right;
    const h = Math.min(w * 0.6, 250);

    const svg = container.append('svg').attr('width', W).attr('height', h + margin.top + margin.bottom);
    const g = svg.append('g').attr('transform', 'translate('+margin.left+','+margin.top+')');

    // Compute domains
    const xVals = data.map(d => d.x);
    const allYVals = [];
    series.forEach(s => data.forEach(d => { if(d[s.key]!==null) allYVals.push(d[s.key]); }));
    bands.forEach(b => data.forEach(d => {
        if(d[b.lo_key]!==null) allYVals.push(d[b.lo_key]);
        if(d[b.hi_key]!==null) allYVals.push(d[b.hi_key]);
    }));
    refLines.forEach(r => allYVals.push(r.value));

    const x = d3.scaleLinear().domain(d3.extent(xVals)).range([0,w]);
    const yExt = d3.extent(allYVals);
    const yPad = (yExt[1]-yExt[0])*0.08 || 1;
    const y = d3.scaleLinear().domain([yExt[0]-yPad, yExt[1]+yPad]).range([h,0]);

    // Grid
    g.append('g').attr('class','grid').call(d3.axisLeft(y).tickSize(-w).tickFormat(''));

    // Bands
    bands.forEach(b => {
        const area = d3.area()
            .x(d => x(d.x))
            .y0(d => y(d[b.lo_key]!==null ? d[b.lo_key] : 0))
            .y1(d => y(d[b.hi_key]!==null ? d[b.hi_key] : 0))
            .defined(d => d[b.lo_key]!==null && d[b.hi_key]!==null);
        g.append('path').datum(data).attr('d',area)
            .attr('fill',b.color).attr('opacity',b.alpha||0.15);
    });

    // Reference lines
    refLines.forEach(r => {
        g.append('line').attr('x1',0).attr('x2',w)
            .attr('y1',y(r.value)).attr('y2',y(r.value))
            .attr('stroke',r.color||'#999').attr('stroke-width',1)
            .attr('stroke-dasharray',r.dash||'4,3');
    });

    // Lines
    series.forEach(s => {
        const line = d3.line().x(d=>x(d.x)).y(d=>y(d[s.key]))
            .defined(d=>d[s.key]!==null);
        g.append('path').datum(data).attr('d',line)
            .attr('fill','none').attr('stroke',s.color).attr('stroke-width',1.8)
            .attr('stroke-dasharray',s.dash||'');
    });

    // Axes
    g.append('g').attr('class','axis').attr('transform','translate(0,'+h+')')
        .call(d3.axisBottom(x).ticks(Math.min(xVals.length,8)));
    g.append('g').attr('class','axis').call(d3.axisLeft(y).ticks(6));

    if('Period') g.append('text').attr('x',w/2).attr('y',h+30).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('Period');
    if('zₜ') g.append('text').attr('transform','rotate(-90)')
        .attr('x',-h/2).attr('y',-42).attr('text-anchor','middle')
        .attr('font-size','11px').attr('fill','#666').text('zₜ');

    // Legend
    if(series.length > 1) {
        const leg = g.append('g').attr('class','legend').attr('transform','translate(5,-5)');
        series.forEach((s,i) => {
            const gi = leg.append('g').attr('transform','translate('+(i*100)+',0)');
            gi.append('line').attr('x1',0).attr('x2',16).attr('y1',0).attr('y2',0)
                .attr('stroke',s.color).attr('stroke-width',2)
                .attr('stroke-dasharray',s.dash||'');
            gi.append('text').attr('x',20).attr('y',4).attr('font-size','10px')
                .attr('fill','#555').text(s.name);
        });
    }

    // Tooltip overlay
    svg.append('rect').attr('width',W).attr('height',h+margin.top+margin.bottom)
        .attr('fill','none').attr('pointer-events','all')
        .on('mousemove', function(evt) {
            const [mx] = d3.pointer(evt, g.node());
            const x0 = x.invert(mx);
            const idx = d3.minIndex(data, d => Math.abs(d.x - x0));
            const d = data[idx];
            let html = '<b>x='+fmt(d.x)+'</b>';
            series.forEach(s => { if(d[s.key]!==null) html += '<br>'+s.name+': '+fmt(d[s.key]); });
            showTip(evt, html);
        })
        .on('mouseout', hideTip);
})();

</script>
</body>
</html>